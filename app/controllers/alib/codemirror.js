!(function(ge){var ca=/gecko\/\d/i.test(navigator.userAgent);var eE=/MSIE \d/.test(navigator.userAgent);var bo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var dS=eE||bo;var r=dS&&(eE?document.documentMode||6:bo[1]);var aq=/WebKit\//.test(navigator.userAgent);var G=aq&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var ah=/Chrome\//.test(navigator.userAgent);var x=/Opera\//.test(navigator.userAgent);var cI=/Apple Computer/.test(navigator.vendor);var ak=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var fg=/PhantomJS/.test(navigator.userAgent);var eV=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var k=eV||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var bL=eV||/Mac/.test(navigator.platform);var aK=/win/i.test(navigator.platform);var cq=x&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(cq){cq=Number(cq[1])}if(cq&&cq>=15){x=false;aq=true}var by=bL&&(G||x&&(cq==null||cq<12.11));var es=ca||(dS&&r>=9);var f4=false,cf=false;function P(gg,gk){if(!(this instanceof P)){return new P(gg,gk)}this.options=gk=gk?aI(gk):{};aI(eW,gk,false);bU(gk);var gm=gk.value;if(typeof gm=="string"){gm=new ay(gm,gk.mode)}this.doc=gm;var gh=new P.inputStyles[gk.inputStyle](this);var gl=this.display=new fV(gg,gm,gh);gl.wrapper.CodeMirror=this;p(this);cT(this);if(gk.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gk.autofocus&&!k){gl.input.focus()}aG(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new em(),keySeq:null};var gf=this;if(dS&&r<11){setTimeout(function(){gf.display.input.reset(true)},20)}eN(this);bZ();cM(this);this.curOp.forceUpdate=true;q(this,gm);if((gk.autofocus&&!k)||gf.hasFocus()){setTimeout(cn(aL,this),20)}else{cs(this)}for(var gj in a1){if(a1.hasOwnProperty(gj)){a1[gj](this,gk[gj],bP)}}v(this);if(gk.finishInit){gk.finishInit(this)}for(var gi=0;gi<cd.length;++gi){cd[gi](this)}ar(this);if(aq&&gk.lineWrapping&&getComputedStyle(gl.lineDiv).textRendering=="optimizelegibility"){gl.lineDiv.style.textRendering="auto"}}function fV(gf,gh,gg){var gi=this;this.input=gg;gi.scrollbarFiller=fT("div",null,"CodeMirror-scrollbar-filler");gi.scrollbarFiller.setAttribute("cm-not-content","true");gi.gutterFiller=fT("div",null,"CodeMirror-gutter-filler");gi.gutterFiller.setAttribute("cm-not-content","true");gi.lineDiv=fT("div",null,"CodeMirror-code");gi.selectionDiv=fT("div",null,null,"position: relative; z-index: 1");gi.cursorDiv=fT("div",null,"CodeMirror-cursors");gi.measure=fT("div",null,"CodeMirror-measure");gi.lineMeasure=fT("div",null,"CodeMirror-measure");gi.lineSpace=fT("div",[gi.measure,gi.lineMeasure,gi.selectionDiv,gi.cursorDiv,gi.lineDiv],null,"position: relative; outline: none");gi.mover=fT("div",[fT("div",[gi.lineSpace],"CodeMirror-lines")],null,"position: relative");gi.sizer=fT("div",[gi.mover],"CodeMirror-sizer");gi.sizerWidth=null;gi.heightForcer=fT("div",null,null,"position: absolute; height: "+dR+"px; width: 1px;");gi.gutters=fT("div",null,"CodeMirror-gutters");gi.lineGutter=null;gi.scroller=fT("div",[gi.sizer,gi.heightForcer,gi.gutters],"CodeMirror-scroll");gi.scroller.setAttribute("tabIndex","-1");gi.wrapper=fT("div",[gi.scrollbarFiller,gi.gutterFiller,gi.scroller],"CodeMirror");if(dS&&r<8){gi.gutters.style.zIndex=-1;gi.scroller.style.paddingRight=0}if(!aq&&!(ca&&k)){gi.scroller.draggable=true}if(gf){if(gf.appendChild){gf.appendChild(gi.wrapper)}else{gf(gi.wrapper)}}gi.viewFrom=gi.viewTo=gh.first;gi.reportedViewFrom=gi.reportedViewTo=gh.first;gi.view=[];gi.renderedView=null;gi.externalMeasured=null;gi.viewOffset=0;gi.lastWrapHeight=gi.lastWrapWidth=0;gi.updateLineNumbers=null;gi.nativeBarWidth=gi.barHeight=gi.barWidth=0;gi.scrollbarsClipped=false;gi.lineNumWidth=gi.lineNumInnerWidth=gi.lineNumChars=null;gi.alignWidgets=false;gi.cachedCharWidth=gi.cachedTextHeight=gi.cachedPaddingH=null;gi.maxLine=null;gi.maxLineLength=0;gi.maxLineChanged=false;gi.wheelDX=gi.wheelDY=gi.wheelStartX=gi.wheelStartY=null;gi.shift=false;gi.selForContextMenu=null;gi.activeTouch=null;gg.init(gi)}function a5(gf){gf.doc.mode=P.getMode(gf.options,gf.doc.modeOption);d(gf)}function d(gf){gf.doc.iter(function(gg){if(gg.stateAfter){gg.stateAfter=null}if(gg.styles){gg.styles=null}});gf.doc.frontier=gf.doc.first;n(gf,100);gf.state.modeGen++;if(gf.curOp){c7(gf)}}function ez(gf){if(gf.options.lineWrapping){e3(gf.display.wrapper,"CodeMirror-wrap");gf.display.sizer.style.minWidth="";gf.display.sizerWidth=null}else{i(gf.display.wrapper,"CodeMirror-wrap");j(gf)}ag(gf);c7(gf);c2(gf);setTimeout(function(){fE(gf)},100)}function aZ(gf){var gh=aS(gf.display),gg=gf.options.lineWrapping;var gi=gg&&Math.max(5,gf.display.scroller.clientWidth/dK(gf.display)-3);return function(gk){if(fe(gf.doc,gk)){return 0}var gj=0;if(gk.widgets){for(var gl=0;gl<gk.widgets.length;gl++){if(gk.widgets[gl].height){gj+=gk.widgets[gl].height}}}if(gg){return gj+(Math.ceil(gk.text.length/gi)||1)*gh}else{return gj+gh}}}function ag(gf){var gh=gf.doc,gg=aZ(gf);gh.iter(function(gi){var gj=gg(gi);if(gj!=gi.height){ew(gi,gj)}})}function cT(gf){gf.display.wrapper.className=gf.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+gf.options.theme.replace(/(^|\s)\s*/g," cm-s-");c2(gf)}function dB(gf){p(gf);c7(gf);setTimeout(function(){ev(gf)},20)}function p(gf){var gg=gf.display.gutters,gk=gf.options.gutters;d7(gg);for(var gh=0;gh<gk.length;++gh){var gi=gk[gh];var gj=gg.appendChild(fT("div",null,"CodeMirror-gutter "+gi));if(gi=="CodeMirror-linenumbers"){gf.display.lineGutter=gj;gj.style.width=(gf.display.lineNumWidth||1)+"px"}}gg.style.display=gh?"":"none";db(gf)}function db(gf){var gg=gf.display.gutters.offsetWidth;gf.display.sizer.style.marginLeft=gg+"px"}function c(gg){if(gg.height==0){return 0}var gf=gg.text.length,gi,gj=gg;while(gi=eK(gj)){var gh=gi.find(0,true);gj=gh.from.line;gf+=gh.from.ch-gh.to.ch}gj=gg;while(gi=f6(gj)){var gh=gi.find(0,true);gf-=gj.text.length-gh.from.ch;gj=gh.to.line;gf+=gj.text.length-gh.to.ch}return gf}function j(gf){var gh=gf.display,gg=gf.doc;gh.maxLine=fs(gg,gg.first);gh.maxLineLength=c(gh.maxLine);gh.maxLineChanged=true;gg.iter(function(gj){var gi=c(gj);if(gi>gh.maxLineLength){gh.maxLineLength=gi;gh.maxLine=gj}})}function bU(gf){var gg=dq(gf.gutters,"CodeMirror-linenumbers");if(gg==-1&&gf.lineNumbers){gf.gutters=gf.gutters.concat(["CodeMirror-linenumbers"])}else{if(gg>-1&&!gf.lineNumbers){gf.gutters=gf.gutters.slice(0);gf.gutters.splice(gg,1)}}}function dH(gf){var gi=gf.display,gh=gi.gutters.offsetWidth;var gg=Math.round(gf.doc.height+bv(gf.display));return{clientHeight:gi.scroller.clientHeight,viewHeight:gi.wrapper.clientHeight,scrollWidth:gi.scroller.scrollWidth,clientWidth:gi.scroller.clientWidth,viewWidth:gi.wrapper.clientWidth,barLeft:gf.options.fixedGutter?gh:0,docHeight:gg,scrollHeight:gg+cX(gf)+gi.barHeight,nativeBarWidth:gi.nativeBarWidth,gutterWidth:gh}}function aa(gg,gi,gf){this.cm=gf;var gh=this.vert=fT("div",[fT("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gj=this.horiz=fT("div",[fT("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gg(gh);gg(gj);bF(gh,"scroll",function(){if(gh.clientHeight){gi(gh.scrollTop,"vertical")}});bF(gj,"scroll",function(){if(gj.clientWidth){gi(gj.scrollLeft,"horizontal")}});this.checkedOverlay=false;if(dS&&r<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}aa.prototype=aI({update:function(gi){var gf=gi.scrollWidth>gi.clientWidth+1;var gh=gi.scrollHeight>gi.clientHeight+1;var gk=gi.nativeBarWidth;if(gh){this.vert.style.display="block";this.vert.style.bottom=gf?gk+"px":"0";var gg=gi.viewHeight-(gf?gk:0);this.vert.firstChild.style.height=Math.max(0,gi.scrollHeight-gi.clientHeight+gg)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gf){this.horiz.style.display="block";this.horiz.style.right=gh?gk+"px":"0";this.horiz.style.left=gi.barLeft+"px";var gj=gi.viewWidth-gi.barLeft-(gh?gk:0);this.horiz.firstChild.style.width=(gi.scrollWidth-gi.clientWidth+gj)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedOverlay&&gi.clientHeight>0){if(gk==0){this.overlayHack()}this.checkedOverlay=true}return{right:gh?gk:0,bottom:gf?gk:0}},setScrollLeft:function(gf){if(this.horiz.scrollLeft!=gf){this.horiz.scrollLeft=gf}},setScrollTop:function(gf){if(this.vert.scrollTop!=gf){this.vert.scrollTop=gf}},overlayHack:function(){var gf=bL&&!ak?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=gf;var gh=this;var gg=function(gi){if(T(gi)!=gh.vert&&T(gi)!=gh.horiz){c9(gh.cm,en)(gi)}};bF(this.vert,"mousedown",gg);bF(this.horiz,"mousedown",gg)},clear:function(){var gf=this.horiz.parentNode;gf.removeChild(this.horiz);gf.removeChild(this.vert)}},aa.prototype);function eX(){}eX.prototype=aI({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},eX.prototype);P.scrollbarModel={"native":aa,"null":eX};function aG(gf){if(gf.display.scrollbars){gf.display.scrollbars.clear();if(gf.display.scrollbars.addClass){i(gf.display.wrapper,gf.display.scrollbars.addClass)}}gf.display.scrollbars=new P.scrollbarModel[gf.options.scrollbarStyle](function(gg){gf.display.wrapper.insertBefore(gg,gf.display.scrollbarFiller);bF(gg,"mousedown",function(){if(gf.state.focused){setTimeout(function(){gf.display.input.focus()},0)}});gg.setAttribute("cm-not-content","true")},function(gh,gg){if(gg=="horizontal"){bl(gf,gh)}else{Y(gf,gh)}},gf);if(gf.display.scrollbars.addClass){e3(gf.display.wrapper,gf.display.scrollbars.addClass)}}function fE(gg,gi){if(!gi){gi=dH(gg)}var gj=gg.display.barWidth,gf=gg.display.barHeight;cr(gg,gi);for(var gh=0;gh<4&&gj!=gg.display.barWidth||gf!=gg.display.barHeight;gh++){if(gj!=gg.display.barWidth&&gg.options.lineWrapping){cb(gg)}cr(gg,dH(gg));gj=gg.display.barWidth;gf=gg.display.barHeight}}function cr(gf,gg){var gi=gf.display;var gh=gi.scrollbars.update(gg);gi.sizer.style.paddingRight=(gi.barWidth=gh.right)+"px";gi.sizer.style.paddingBottom=(gi.barHeight=gh.bottom)+"px";if(gh.right&&gh.bottom){gi.scrollbarFiller.style.display="block";gi.scrollbarFiller.style.height=gh.bottom+"px";gi.scrollbarFiller.style.width=gh.right+"px"}else{gi.scrollbarFiller.style.display=""}if(gh.bottom&&gf.options.coverGutterNextToScrollbar&&gf.options.fixedGutter){gi.gutterFiller.style.display="block";gi.gutterFiller.style.height=gh.bottom+"px";gi.gutterFiller.style.width=gg.gutterWidth+"px"}else{gi.gutterFiller.style.display=""}}function ba(gh,gl,gg){var gj=gg&&gg.top!=null?Math.max(0,gg.top):gh.scroller.scrollTop;gj=Math.floor(gj-e1(gh));var gi=gg&&gg.bottom!=null?gg.bottom:gj+gh.wrapper.clientHeight;var gn=bw(gl,gj),gm=bw(gl,gi);if(gg&&gg.ensure){var gf=gg.ensure.from.line,gk=gg.ensure.to.line;if(gf<gn){gn=gf;gm=bw(gl,bs(fs(gl,gf))+gh.wrapper.clientHeight)}else{if(Math.min(gk,gl.lastLine())>=gm){gn=bw(gl,bs(fs(gl,gk))-gh.wrapper.clientHeight);gm=gk}}}return{from:gn,to:Math.max(gm,gn+1)}}function ev(gn){var gl=gn.display,gm=gl.view;if(!gl.alignWidgets&&(!gl.gutters.firstChild||!gn.options.fixedGutter)){return}var gj=d5(gl)-gl.scroller.scrollLeft+gn.doc.scrollLeft;var gf=gl.gutters.offsetWidth,gg=gj+"px";for(var gi=0;gi<gm.length;gi++){if(!gm[gi].hidden){if(gn.options.fixedGutter&&gm[gi].gutter){gm[gi].gutter.style.left=gg}var gk=gm[gi].alignable;if(gk){for(var gh=0;gh<gk.length;gh++){gk[gh].style.left=gg}}}}if(gn.options.fixedGutter){gl.gutters.style.left=(gj+gf)+"px"}}function v(gg){if(!gg.options.lineNumbers){return false}var gj=gg.doc,gh=f7(gg.options,gj.first+gj.size-1),gi=gg.display;if(gh.length!=gi.lineNumChars){var gl=gi.measure.appendChild(fT("div",[fT("div",gh)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gf=gl.firstChild.offsetWidth,gk=gl.offsetWidth-gf;gi.lineGutter.style.width="";gi.lineNumInnerWidth=Math.max(gf,gi.lineGutter.offsetWidth-gk);gi.lineNumWidth=gi.lineNumInnerWidth+gk;gi.lineNumChars=gi.lineNumInnerWidth?gh.length:-1;gi.lineGutter.style.width=gi.lineNumWidth+"px";db(gg);return true}return false}function f7(gg,gf){return String(gg.lineNumberFormatter(gf+gg.firstLineNumber))}function d5(gf){return gf.scroller.getBoundingClientRect().left-gf.sizer.getBoundingClientRect().left}function cE(gg,gf,gh){var gi=gg.display;this.viewport=gf;this.visible=ba(gi,gg.doc,gf);this.editorIsHidden=!gi.wrapper.offsetWidth;this.wrapperHeight=gi.wrapper.clientHeight;this.wrapperWidth=gi.wrapper.clientWidth;this.oldDisplayWidth=dt(gg);this.force=gh;this.dims=e6(gg);this.events=[]}cE.prototype.signal=function(gf,gg){if(fq(gf,gg)){this.events.push(arguments)}};cE.prototype.finish=function(){for(var gf=0;gf<this.events.length;gf++){cH.apply(null,this.events[gf])}};function Q(gf){var gg=gf.display;if(!gg.scrollbarsClipped&&gg.scroller.offsetWidth){gg.nativeBarWidth=gg.scroller.offsetWidth-gg.scroller.clientWidth;gg.heightForcer.style.height=cX(gf)+"px";gg.sizer.style.marginBottom=-gg.nativeBarWidth+"px";gg.sizer.style.borderRightWidth=cX(gf)+"px";gg.scrollbarsClipped=true}}function L(gk,gh){var gi=gk.display,gl=gk.doc;if(gh.editorIsHidden){eq(gk);return false}if(!gh.force&&gh.visible.from>=gi.viewFrom&&gh.visible.to<=gi.viewTo&&(gi.updateLineNumbers==null||gi.updateLineNumbers>=gi.viewTo)&&gi.renderedView==gi.view&&di(gk)==0){return false}if(v(gk)){eq(gk);gh.dims=e6(gk)}var gg=gl.first+gl.size;var gn=Math.max(gh.visible.from-gk.options.viewportMargin,gl.first);var gm=Math.min(gg,gh.visible.to+gk.options.viewportMargin);if(gi.viewFrom<gn&&gn-gi.viewFrom<20){gn=Math.max(gl.first,gi.viewFrom)}if(gi.viewTo>gm&&gi.viewTo-gm<20){gm=Math.min(gg,gi.viewTo)}if(cf){gn=aO(gk.doc,gn);gm=eb(gk.doc,gm)}var gf=gn!=gi.viewFrom||gm!=gi.viewTo||gi.lastWrapHeight!=gh.wrapperHeight||gi.lastWrapWidth!=gh.wrapperWidth;cU(gk,gn,gm);gi.viewOffset=bs(fs(gk.doc,gi.viewFrom));gk.display.mover.style.top=gi.viewOffset+"px";var gj=di(gk);if(!gf&&gj==0&&!gh.force&&gi.renderedView==gi.view&&(gi.updateLineNumbers==null||gi.updateLineNumbers>=gi.viewTo)){return false}var go=dV();if(gj>4){gi.lineDiv.style.display="none"}aY(gk,gi.updateLineNumbers,gh.dims);if(gj>4){gi.lineDiv.style.display=""}gi.renderedView=gi.view;if(go&&dV()!=go&&go.offsetHeight){go.focus()}d7(gi.cursorDiv);d7(gi.selectionDiv);gi.gutters.style.height=0;if(gf){gi.lastWrapHeight=gh.wrapperHeight;gi.lastWrapWidth=gh.wrapperWidth;n(gk,400)}gi.updateLineNumbers=null;return true}function b4(gh,gj){var gi=gj.force,gg=gj.viewport;for(var gk=true;;gk=false){if(gk&&gh.options.lineWrapping&&gj.oldDisplayWidth!=dt(gh)){gi=true}else{gi=false;if(gg&&gg.top!=null){gg={top:Math.min(gh.doc.height+bv(gh.display)-at(gh),gg.top)}}gj.visible=ba(gh.display,gh.doc,gg);if(gj.visible.from>=gh.display.viewFrom&&gj.visible.to<=gh.display.viewTo){break}}if(!L(gh,gj)){break}cb(gh);var gf=dH(gh);bB(gh);dG(gh,gf);fE(gh,gf)}gj.signal(gh,"update",gh);if(gh.display.viewFrom!=gh.display.reportedViewFrom||gh.display.viewTo!=gh.display.reportedViewTo){gj.signal(gh,"viewportChange",gh,gh.display.viewFrom,gh.display.viewTo);gh.display.reportedViewFrom=gh.display.viewFrom;gh.display.reportedViewTo=gh.display.viewTo}}function C(gh,gg){var gi=new cE(gh,gg);if(L(gh,gi)){cb(gh);b4(gh,gi);var gf=dH(gh);bB(gh);dG(gh,gf);fE(gh,gf);gi.finish()}}function dG(gf,gg){gf.display.sizer.style.minHeight=gg.docHeight+"px";var gh=gg.docHeight+gf.display.barHeight;gf.display.heightForcer.style.top=gh+"px";gf.display.gutters.style.height=Math.max(gh+cX(gf),gg.clientHeight)+"px"}function cb(gm){var gj=gm.display;var gf=gj.lineDiv.offsetTop;for(var gh=0;gh<gj.view.length;gh++){var go=gj.view[gh],gn;if(go.hidden){continue}if(dS&&r<8){var gk=go.node.offsetTop+go.node.offsetHeight;gn=gk-gf;gf=gk}else{var gi=go.node.getBoundingClientRect();gn=gi.bottom-gi.top}var gl=go.line.height-gn;if(gn<2){gn=aS(gj)}if(gl>0.001||gl<-0.001){ew(go.line,gn);a4(go.line);if(go.rest){for(var gg=0;gg<go.rest.length;gg++){a4(go.rest[gg])}}}}}function a4(gf){if(gf.widgets){for(var gg=0;gg<gf.widgets.length;++gg){gf.widgets[gg].height=gf.widgets[gg].node.offsetHeight}}}function e6(gf){var gk=gf.display,gi={},gh={};var gj=gk.gutters.clientLeft;for(var gl=gk.gutters.firstChild,gg=0;gl;gl=gl.nextSibling,++gg){gi[gf.options.gutters[gg]]=gl.offsetLeft+gl.clientLeft+gj;gh[gf.options.gutters[gg]]=gl.clientWidth}return{fixedPos:d5(gk),gutterTotalWidth:gk.gutters.offsetWidth,gutterLeft:gi,gutterWidth:gh,wrapperWidth:gk.wrapper.clientWidth}}function aY(go,gh,gp){var gm=go.display,gq=go.options.lineNumbers;var gl=gm.lineDiv,gr=gl.firstChild;function gk(gu){var gt=gu.nextSibling;if(aq&&bL&&go.display.currentWheelTarget==gu){gu.style.display="none"}else{gu.parentNode.removeChild(gu)}return gt}var gn=gm.view,gj=gm.viewFrom;for(var gg=0;gg<gn.length;gg++){var gi=gn[gg];if(gi.hidden){}else{if(!gi.node||gi.node.parentNode!=gl){var gf=cG(go,gi,gj,gp);gl.insertBefore(gf,gr)}else{while(gr!=gi.node){gr=gk(gr)}var gs=gq&&gh!=null&&gh<=gj&&gi.lineNumber;if(gi.changes){if(dq(gi.changes,"gutter")>-1){gs=false}dc(go,gi,gj,gp)}if(gs){d7(gi.lineNumber);gi.lineNumber.appendChild(document.createTextNode(f7(go.options,gj)))}gr=gi.node.nextSibling}}gj+=gi.size}while(gr){gr=gk(gr)}}function dc(gf,gh,gj,gk){for(var gg=0;gg<gh.changes.length;gg++){var gi=gh.changes[gg];if(gi=="text"){fc(gf,gh)}else{if(gi=="gutter"){ae(gf,gh,gj,gk)}else{if(gi=="class"){dN(gh)}else{if(gi=="widget"){au(gf,gh,gk)}}}}}gh.changes=null}function fC(gf){if(gf.node==gf.text){gf.node=fT("div",null,null,"position: relative");if(gf.text.parentNode){gf.text.parentNode.replaceChild(gf.node,gf.text)}gf.node.appendChild(gf.text);if(dS&&r<8){gf.node.style.zIndex=2}}return gf.node}function f5(gg){var gf=gg.bgClass?gg.bgClass+" "+(gg.line.bgClass||""):gg.line.bgClass;if(gf){gf+=" CodeMirror-linebackground"}if(gg.background){if(gf){gg.background.className=gf}else{gg.background.parentNode.removeChild(gg.background);gg.background=null}}else{if(gf){var gh=fC(gg);gg.background=gh.insertBefore(fT("div",null,gf),gh.firstChild)}}}function d1(gf,gg){var gh=gf.display.externalMeasured;if(gh&&gh.line==gg.line){gf.display.externalMeasured=null;gg.measure=gh.measure;return gh.built}return eL(gf,gg)}function fc(gf,gi){var gg=gi.text.className;var gh=d1(gf,gi);if(gi.text==gi.node){gi.node=gh.pre}gi.text.parentNode.replaceChild(gh.pre,gi.text);gi.text=gh.pre;if(gh.bgClass!=gi.bgClass||gh.textClass!=gi.textClass){gi.bgClass=gh.bgClass;gi.textClass=gh.textClass;dN(gi)}else{if(gg){gi.text.className=gg}}}function dN(gf){f5(gf);if(gf.line.wrapClass){fC(gf).className=gf.line.wrapClass}else{if(gf.node!=gf.text){gf.node.className=""}}var gg=gf.textClass?gf.textClass+" "+(gf.line.textClass||""):gf.line.textClass;gf.text.className=gg||""}function ae(gm,gk,gl,gn){if(gk.gutter){gk.node.removeChild(gk.gutter);gk.gutter=null}var gj=gk.line.gutterMarkers;if(gm.options.lineNumbers||gj){var gg=fC(gk);var gh=gk.gutter=fT("div",null,"CodeMirror-gutter-wrapper","left: "+(gm.options.fixedGutter?gn.fixedPos:-gn.gutterTotalWidth)+"px; width: "+gn.gutterTotalWidth+"px");gm.display.input.setUneditable(gh);gg.insertBefore(gh,gk.text);if(gk.line.gutterClass){gh.className+=" "+gk.line.gutterClass}if(gm.options.lineNumbers&&(!gj||!gj["CodeMirror-linenumbers"])){gk.lineNumber=gh.appendChild(fT("div",f7(gm.options,gl),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gn.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gm.display.lineNumInnerWidth+"px"))}if(gj){for(var gi=0;gi<gm.options.gutters.length;++gi){var gf=gm.options.gutters[gi],go=gj.hasOwnProperty(gf)&&gj[gf];if(go){gh.appendChild(fT("div",[go],"CodeMirror-gutter-elt","left: "+gn.gutterLeft[gf]+"px; width: "+gn.gutterWidth[gf]+"px"))}}}}}function au(gf,gg,gj){if(gg.alignable){gg.alignable=null}for(var gi=gg.node.firstChild,gh;gi;gi=gh){var gh=gi.nextSibling;if(gi.className=="CodeMirror-linewidget"){gg.node.removeChild(gi)}}fh(gf,gg,gj)}function cG(gf,gh,gi,gj){var gg=d1(gf,gh);gh.text=gh.node=gg.pre;if(gg.bgClass){gh.bgClass=gg.bgClass}if(gg.textClass){gh.textClass=gg.textClass}dN(gh);ae(gf,gh,gi,gj);fh(gf,gh,gj);return gh.node}function fh(gf,gh,gi){ex(gf,gh.line,gh,gi,true);if(gh.rest){for(var gg=0;gg<gh.rest.length;gg++){ex(gf,gh.rest[gg],gh,gi,false)}}}function ex(gm,go,gl,gn,gi){if(!go.widgets){return}var gf=fC(gl);for(var gj=0,gk=go.widgets;gj<gk.length;++gj){var gh=gk[gj],gg=fT("div",[gh.node],"CodeMirror-linewidget");if(!gh.handleMouseEvents){gg.setAttribute("cm-ignore-events","true")}bn(gh,gg,gl,gn);gm.display.input.setUneditable(gg);if(gi&&gh.above){gf.insertBefore(gg,gl.gutter||gl.text)}else{gf.appendChild(gg)}an(gh,"redraw")}}function bn(gf,gi,gg,gj){if(gf.noHScroll){(gg.alignable||(gg.alignable=[])).push(gi);var gh=gj.wrapperWidth;gi.style.left=gj.fixedPos+"px";if(!gf.coverGutter){gh-=gj.gutterTotalWidth;gi.style.paddingLeft=gj.gutterTotalWidth+"px"}gi.style.width=gh+"px"}if(gf.coverGutter){gi.style.zIndex=5;gi.style.position="relative";if(!gf.noHScroll){gi.style.marginLeft=-gj.gutterTotalWidth+"px"}}}var af=P.Pos=function(gf,gg){if(!(this instanceof af)){return new af(gf,gg)}this.line=gf;this.ch=gg};var bV=P.cmpPos=function(gg,gf){return gg.line-gf.line||gg.ch-gf.ch};function b1(gf){return af(gf.line,gf.ch)}function bG(gg,gf){return bV(gg,gf)<0?gf:gg}function cQ(gg,gf){return bV(gg,gf)<0?gg:gf}function z(gf){if(!gf.state.focused){gf.display.input.focus();aL(gf)}}function c4(gf){return gf.options.readOnly||gf.doc.cantEdit}var a2=null;function eD(gs,gm,gh,gi){var gt=gs.doc;gs.display.shift=false;if(!gi){gi=gt.sel}var gj=cm(gm),gg=null;if(gs.state.pasteIncoming&&gi.ranges.length>1){if(a2&&a2.join("\n")==gm){gg=gi.ranges.length%a2.length==0&&bz(a2,cm)}else{if(gj.length==gi.ranges.length){gg=bz(gj,function(gv){return[gv]})}}}for(var gn=gi.ranges.length-1;gn>=0;gn--){var go=gi.ranges[gn];var gr=go.from(),gq=go.to();if(go.empty()){if(gh&&gh>0){gr=af(gr.line,gr.ch-gh)}else{if(gs.state.overwrite&&!gs.state.pasteIncoming){gq=af(gq.line,Math.min(fs(gt,gq.line).text.length,gq.ch+fA(gj).length))}}}var gf=gs.curOp.updateInput;var gu={from:gr,to:gq,text:gg?gg[gn%gg.length]:gj,origin:gs.state.pasteIncoming?"paste":gs.state.cutIncoming?"cut":"+input"};b5(gs.doc,gu);an(gs,"inputRead",gs,gu);if(gm&&!gs.state.pasteIncoming&&gs.options.electricChars&&gs.options.smartIndent&&go.head.ch<100&&(!gn||gi.ranges[gn-1].head.line!=go.head.line)){var gp=gs.getModeAt(go.head);var gk=c1(gu);if(gp.electricChars){for(var gl=0;gl<gp.electricChars.length;gl++){if(gm.indexOf(gp.electricChars.charAt(gl))>-1){am(gs,gk.line,"smart");break}}}else{if(gp.electricInput){if(gp.electricInput.test(fs(gt,gk.line).text.slice(0,gk.ch))){am(gs,gk.line,"smart")}}}}}fz(gs);gs.curOp.updateInput=gf;gs.curOp.typing=true;gs.state.pasteIncoming=gs.state.cutIncoming=false}function dr(gf){var gj=[],gi=[];for(var gh=0;gh<gf.doc.sel.ranges.length;gh++){var gg=gf.doc.sel.ranges[gh].head.line;var gk={anchor:af(gg,0),head:af(gg+1,0)};gi.push(gk);gj.push(gf.getRange(gk.anchor,gk.head))}return{text:gj,ranges:gi}}function eP(gf){gf.setAttribute("autocorrect","off");gf.setAttribute("autocapitalize","off");gf.setAttribute("spellcheck","false")}function dj(gf){this.cm=gf;this.prevInput="";this.pollingFast=false;this.polling=new em();this.inaccurateSelection=false;this.hasSelection=false}function cp(){var gf=fT("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var gg=fT("div",[gf],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(aq){gf.style.width="1000px"}else{gf.setAttribute("wrap","off")}if(eV){gf.style.border="1px solid black"}eP(gf);return gg}dj.prototype=aI({init:function(gh){var gg=this,gf=this.cm;var gk=this.wrapper=cp();var gi=this.textarea=gk.firstChild;gh.wrapper.insertBefore(gk,gh.wrapper.firstChild);if(eV){gi.style.width="0px"}bF(gi,"input",function(){if(dS&&r>=9&&gg.hasSelection){gg.hasSelection=null}gg.poll()});bF(gi,"paste",function(){if(aq&&!gf.state.fakedLastChar&&!(new Date-gf.state.lastMiddleDown<200)){var gm=gi.selectionStart,gl=gi.selectionEnd;gi.value+="$";gi.selectionEnd=gl;gi.selectionStart=gm;gf.state.fakedLastChar=true}gf.state.pasteIncoming=true;gg.fastPoll()});function gj(gm){if(gf.somethingSelected()){a2=gf.getSelections();if(gg.inaccurateSelection){gg.prevInput="";gg.inaccurateSelection=false;gi.value=a2.join("\n");dT(gi)}}else{var gl=dr(gf);a2=gl.text;if(gm.type=="cut"){gf.setSelections(gl.ranges,null,dh)}else{gg.prevInput="";gi.value=gl.text.join("\n");dT(gi)}}if(gm.type=="cut"){gf.state.cutIncoming=true}}bF(gi,"cut",gj);bF(gi,"copy",gj);bF(gh.scroller,"paste",function(gl){if(aX(gh,gl)){return}gf.state.pasteIncoming=true;gg.focus()});bF(gh.lineSpace,"selectstart",function(gl){if(!aX(gh,gl)){aF(gl)}})},prepareSelection:function(){var gf=this.cm,gk=gf.display,gj=gf.doc;var gi=eU(gf);if(gf.options.moveInputWithCursor){var gl=d0(gf,gj.sel.primary().head,"div");var gg=gk.wrapper.getBoundingClientRect(),gh=gk.lineDiv.getBoundingClientRect();gi.teTop=Math.max(0,Math.min(gk.wrapper.clientHeight-10,gl.top+gh.top-gg.top));gi.teLeft=Math.max(0,Math.min(gk.wrapper.clientWidth-10,gl.left+gh.left-gg.left))}return gi},showSelection:function(gh){var gf=this.cm,gg=gf.display;bk(gg.cursorDiv,gh.cursors);bk(gg.selectionDiv,gh.selection);if(gh.teTop!=null){this.wrapper.style.top=gh.teTop+"px";this.wrapper.style.left=gh.teLeft+"px"}},reset:function(gi){if(this.contextMenuPending){return}var gg,gj,gf=this.cm,gl=gf.doc;if(gf.somethingSelected()){this.prevInput="";var gh=gl.sel.primary();gg=df&&(gh.to().line-gh.from().line>100||(gj=gf.getSelection()).length>1000);var gk=gg?"-":gj||gf.getSelection();this.textarea.value=gk;if(gf.state.focused){dT(this.textarea)}if(dS&&r>=9){this.hasSelection=gk}}else{if(!gi){this.prevInput=this.textarea.value="";if(dS&&r>=9){this.hasSelection=null}}}this.inaccurateSelection=gg},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!k||dV()!=this.textarea)){try{this.textarea.focus()}catch(gf){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var gf=this;if(gf.pollingFast){return}gf.polling.set(this.cm.options.pollInterval,function(){gf.poll();if(gf.cm.state.focused){gf.slowPoll()}})},fastPoll:function(){var gf=false,gg=this;gg.pollingFast=true;function gh(){var gi=gg.poll();if(!gi&&!gf){gf=true;gg.polling.set(60,gh)}else{gg.pollingFast=false;gg.slowPoll()}}gg.polling.set(20,gh)},poll:function(){var gf=this.cm,gi=this.textarea,gj=this.prevInput;if(!gf.state.focused||(a6(gi)&&!gj)||c4(gf)||gf.options.disableInput||gf.state.keySeq){return false}if(gf.state.pasteIncoming&&gf.state.fakedLastChar){gi.value=gi.value.substring(0,gi.value.length-1);gf.state.fakedLastChar=false}var gk=gi.value;if(gk==gj&&!gf.somethingSelected()){return false}if(dS&&r>=9&&this.hasSelection===gk||bL&&/[\uf700-\uf7ff]/.test(gk)){gf.display.input.reset();return false}if(gk.charCodeAt(0)==8203&&gf.doc.sel==gf.display.selForContextMenu&&!gj){gj="\u200b"}var gl=0,gg=Math.min(gj.length,gk.length);while(gl<gg&&gj.charCodeAt(gl)==gk.charCodeAt(gl)){++gl}var gh=this;cR(gf,function(){eD(gf,gk.slice(gl),gj.length-gl);if(gk.length>1000||gk.indexOf("\n")>-1){gi.value=gh.prevInput=""}else{gh.prevInput=gk}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dS&&r>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gm){var gp=this,gq=gp.cm,gn=gq.display,gj=gp.textarea;var go=b9(gq,gm),gi=gn.scroller.scrollTop;if(!go||x){return}var gl=gq.options.resetSelectionOnContextMenu;if(gl&&gq.doc.sel.contains(go)==-1){c9(gq,bj)(gq.doc,eM(go),dh)}var gg=gj.style.cssText;gp.wrapper.style.position="absolute";gj.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(gm.clientY-5)+"px; left: "+(gm.clientX-5)+"px; z-index: 1000; background: "+(dS?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(aq){var gr=ge.scrollY}gn.input.focus();if(aq){ge.scrollTo(null,gr)}gn.input.reset();if(!gq.somethingSelected()){gj.value=gp.prevInput=" "}gp.contextMenuPending=true;gn.selForContextMenu=gq.doc.sel;clearTimeout(gn.detectingSelectAll);function gh(){if(gj.selectionStart!=null){var gt=gq.somethingSelected();var gs=gj.value="\u200b"+(gt?gj.value:"");gp.prevInput=gt?"":"\u200b";gj.selectionStart=1;gj.selectionEnd=gs.length;gn.selForContextMenu=gq.doc.sel}}function gf(){gp.contextMenuPending=false;gp.wrapper.style.position="relative";gj.style.cssText=gg;if(dS&&r<9){gn.scrollbars.setScrollTop(gn.scroller.scrollTop=gi)}if(gj.selectionStart!=null){if(!dS||(dS&&r<9)){gh()}var gs=0,gt=function(){if(gn.selForContextMenu==gq.doc.sel&&gj.selectionStart==0){c9(gq,fY.selectAll)(gq)}else{if(gs++<10){gn.detectingSelectAll=setTimeout(gt,500)}else{gn.input.reset()}}};gn.detectingSelectAll=setTimeout(gt,200)}}if(dS&&r>=9){gh()}if(es){f9(gm);var gk=function(){eg(ge,"mouseup",gk);setTimeout(gf,20)};bF(ge,"mouseup",gk)}else{setTimeout(gf,50)}},setUneditable:fP,needsContentAttribute:false},dj.prototype);function R(gf){this.cm=gf;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new em()}R.prototype=aI({init:function(gi){var gg=this,gf=gg.cm;var gj=gg.div=gi.lineDiv;gj.contentEditable="true";eP(gj);bF(gj,"paste",function(gl){var gk=gl.clipboardData&&gl.clipboardData.getData("text/plain");if(gk){gl.preventDefault();gf.replaceSelection(gk,null,"paste")}});bF(gj,"compositionstart",function(go){var gn=go.data;gg.composing={sel:gf.doc.sel,data:gn,startData:gn};if(!gn){return}var gl=gf.doc.sel.primary();var gk=gf.getLine(gl.head.line);var gm=gk.indexOf(gn,Math.max(0,gl.head.ch-gn.length));if(gm>-1&&gm<=gl.head.ch){gg.composing.sel=eM(af(gl.head.line,gm),af(gl.head.line,gm+gn.length))}});bF(gj,"compositionupdate",function(gk){gg.composing.data=gk.data});bF(gj,"compositionend",function(gl){var gk=gg.composing;if(!gk){return}if(gl.data!=gk.startData&&!/\u200b/.test(gl.data)){gk.data=gl.data}setTimeout(function(){if(!gk.handled){gg.applyComposition(gk)}if(gg.composing==gk){gg.composing=null}},50)});bF(gj,"touchstart",function(){gg.forceCompositionEnd()});bF(gj,"input",function(){if(gg.composing){return}if(!gg.pollContent()){cR(gg.cm,function(){c7(gf)})}});function gh(gn){if(gf.somethingSelected()){a2=gf.getSelections();if(gn.type=="cut"){gf.replaceSelection("",null,"cut")}}else{var gl=dr(gf);a2=gl.text;if(gn.type=="cut"){gf.operation(function(){gf.setSelections(gl.ranges,0,dh);gf.replaceSelection("",null,"cut")})}}if(gn.clipboardData&&!eV){gn.preventDefault();gn.clipboardData.clearData();gn.clipboardData.setData("text/plain",a2.join("\n"))}else{var gk=cp(),go=gk.firstChild;gf.display.lineSpace.insertBefore(gk,gf.display.lineSpace.firstChild);go.value=a2.join("\n");var gm=document.activeElement;dT(go);setTimeout(function(){gf.display.lineSpace.removeChild(gk);gm.focus()},50)}}bF(gj,"copy",gh);bF(gj,"cut",gh)},prepareSelection:function(){var gf=eU(this.cm,false);gf.focus=this.cm.state.focused;return gf},showSelection:function(gf){if(!gf||!this.cm.display.view.length){return}if(gf.focus){this.showPrimarySelection()}this.showMultipleSelections(gf)},showPrimarySelection:function(){var gj=ge.getSelection(),gl=this.cm.doc.sel.primary();var go=aE(this.cm,gj.anchorNode,gj.anchorOffset);var gn=aE(this.cm,gj.focusNode,gj.focusOffset);if(go&&!go.bad&&gn&&!gn.bad&&bV(cQ(go,gn),gl.from())==0&&bV(bG(go,gn),gl.to())==0){return}var gi=ct(this.cm,gl.from());var gm=ct(this.cm,gl.to());if(!gi&&!gm){return}var gq=this.cm.display.view;var gk=gj.rangeCount&&gj.getRangeAt(0);if(!gi){gi={node:gq[0].measure.map[2],offset:0}}else{if(!gm){var gh=gq[gq.length-1].measure;var gg=gh.maps?gh.maps[gh.maps.length-1]:gh.map;gm={node:gg[gg.length-1],offset:gg[gg.length-2]-gg[gg.length-3]}}}try{var gf=b8(gi.node,gi.offset,gm.offset,gm.node)}catch(gp){}if(gf){gj.removeAllRanges();gj.addRange(gf);if(gk&&gj.anchorNode==null){gj.addRange(gk)}}this.rememberSelection()},showMultipleSelections:function(gf){bk(this.cm.display.cursorDiv,gf.cursors);bk(this.cm.display.selectionDiv,gf.selection)},rememberSelection:function(){var gf=ge.getSelection();this.lastAnchorNode=gf.anchorNode;this.lastAnchorOffset=gf.anchorOffset;this.lastFocusNode=gf.focusNode;this.lastFocusOffset=gf.focusOffset},selectionInEditor:function(){var gg=ge.getSelection();if(!gg.rangeCount){return false}var gf=gg.getRangeAt(0).commonAncestorContainer;return er(this.div,gf)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gf=this;if(this.selectionInEditor()){this.pollSelection()}else{cR(this.cm,function(){gf.cm.curOp.selectionChanged=true})}function gg(){if(gf.cm.state.focused){gf.pollSelection();gf.polling.set(gf.cm.options.pollInterval,gg)}}this.polling.set(this.cm.options.pollInterval,gg)},pollSelection:function(){if(this.composing){return}var gi=ge.getSelection(),gf=this.cm;if(gi.anchorNode!=this.lastAnchorNode||gi.anchorOffset!=this.lastAnchorOffset||gi.focusNode!=this.lastFocusNode||gi.focusOffset!=this.lastFocusOffset){this.rememberSelection();var gh=aE(gf,gi.anchorNode,gi.anchorOffset);var gg=aE(gf,gi.focusNode,gi.focusOffset);if(gh&&gg){cR(gf,function(){bj(gf.doc,eM(gh,gg),dh);if(gh.bad||gg.bad){gf.curOp.selectionChanged=true}})}}},pollContent:function(){var gn=this.cm,gy=gn.display,gw=gn.doc.sel.primary();var gx=gw.from(),gh=gw.to();if(gx.line<gy.viewFrom||gh.line>gy.viewTo-1){return false}var gl;if(gx.line==gy.viewFrom||(gl=U(gn,gx.line))==0){var go=bp(gy.view[0].line);var gk=gy.view[0].node}else{var go=bp(gy.view[gl].line);var gk=gy.view[gl-1].node.nextSibling}var gz=U(gn,gh.line);if(gz==gy.view.length-1){var gg=gy.viewTo-1;var gA=gy.view[gz].node}else{var gg=bp(gy.view[gz+1].line)-1;var gA=gy.view[gz+1].node.previousSibling}var gB=cm(fS(gn,gk,gA,go,gg));var gf=fW(gn.doc,af(go,0),af(gg,fs(gn.doc,gg).text.length));while(gB.length>1&&gf.length>1){if(fA(gB)==fA(gf)){gB.pop();gf.pop();gg--}else{if(gB[0]==gf[0]){gB.shift();gf.shift();go++}else{break}}}var gv=0,gr=0;var gi=gB[0],gt=gf[0],gs=Math.min(gi.length,gt.length);while(gv<gs&&gi.charCodeAt(gv)==gt.charCodeAt(gv)){++gv}var gj=fA(gB),gu=fA(gf);var gp=Math.min(gj.length-(gB.length==1?gv:0),gu.length-(gf.length==1?gv:0));while(gr<gp&&gj.charCodeAt(gj.length-gr-1)==gu.charCodeAt(gu.length-gr-1)){++gr}gB[gB.length-1]=gj.slice(0,gj.length-gr);gB[0]=gB[0].slice(gv);var gm=af(go,gv);var gq=af(gg,gf.length?fA(gf).length-gr:0);if(gB.length>1||gB[0]||bV(gm,gq)){aT(gn.doc,gB,gm,gq,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(gf){if(gf.data&&gf.data!=gf.startData){c9(this.cm,eD)(this.cm,gf.data,0,gf.sel)}},setUneditable:function(gf){gf.setAttribute("contenteditable","false")},onKeyPress:function(gf){gf.preventDefault();c9(this.cm,eD)(this.cm,String.fromCharCode(gf.charCode==null?gf.keyCode:gf.charCode),0)},onContextMenu:fP,resetPosition:fP,needsContentAttribute:true},R.prototype);function ct(gm,gl){var gk=e4(gm,gl.line);if(!gk||gk.hidden){return null}var gn=fs(gm.doc,gl.line);var gf=aV(gk,gn,gl.line);var gg=a(gn),gh="left";if(gg){var gi=aH(gg,gl.ch);gh=gi%2?"right":"left"}var gj=cC(gf.map,gl.ch,"left");gj.offset=gj.collapse=="right"?gj.end:gj.start;return gj}function f8(gg,gf){if(gf){gg.bad=true}return gg}function aE(gf,gi,gk){var gj;if(gi==gf.display.lineDiv){gj=gf.display.lineDiv.childNodes[gk];if(!gj){return f8(gf.clipPos(af(gf.display.viewTo-1)),true)}gi=null;gk=0}else{for(gj=gi;;gj=gj.parentNode){if(!gj||gj==gf.display.lineDiv){return null}if(gj.parentNode&&gj.parentNode==gf.display.lineDiv){break}}}for(var gh=0;gh<gf.display.view.length;gh++){var gg=gf.display.view[gh];if(gg.node==gj){return dg(gg,gi,gk)}}}function dg(gn,gj,gk){var gh=gn.text.firstChild,gi=false;if(!gj||!er(gh,gj)){return f8(af(bp(gn.line),0),true)}if(gj==gh){gi=true;gj=gh.childNodes[gk];gk=0;if(!gj){var gt=gn.rest?fA(gn.rest):gn.line;return f8(af(bp(gt),gt.text.length),gi)}}var gl=gj.nodeType==3?gj:null,gq=gj;if(!gl&&gj.childNodes.length==1&&gj.firstChild.nodeType==3){gl=gj.firstChild;if(gk){gk=gl.nodeValue.length}}while(gq.parentNode!=gh){gq=gq.parentNode}var gg=gn.measure,gp=gg.maps;function gm(gA,gB,gx){for(var gz=-1;gz<(gp?gp.length:0);gz++){var gv=gz<0?gg.map:gp[gz];for(var gy=0;gy<gv.length;gy+=3){var gw=gv[gy+2];if(gw==gA||gw==gB){var gC=bp(gz<0?gn.line:gn.rest[gz]);var gu=gv[gy]+gx;if(gx<0||gw!=gA){gu=gv[gy+(gx?1:0)]}return af(gC,gu)}}}}var gs=gm(gl,gq,gk);if(gs){return f8(gs,gi)}for(var gf=gq.nextSibling,go=gl?gl.nodeValue.length-gk:0;gf;gf=gf.nextSibling){gs=gm(gf,gf.firstChild,0);if(gs){return f8(af(gs.line,gs.ch-go),gi)}else{go+=gf.textContent.length}}for(var gr=gq.previousSibling,go=gk;gr;gr=gr.previousSibling){gs=gm(gr,gr.firstChild,-1);if(gs){return f8(af(gs.line,gs.ch+go),gi)}else{go+=gf.textContent.length}}}function fS(gk,gm,gl,gf,gh){var gn="",gg=false;function gi(go){return function(gp){return gp.id==go}}function gj(gs){if(gs.nodeType==1){var gr=gs.getAttribute("cm-text");if(gr!=null){if(gr==""){gr=gs.textContent.replace(/\u200b/g,"")}gn+=gr;return}var gq=gs.getAttribute("cm-marker"),go;if(gq){var gt=gk.findMarks(af(gf,0),af(gh+1,0),gi(+gq));if(gt.length&&(go=gt[0].find())){gn+=fW(gk.doc,go.from,go.to).join("\n")}return}if(gs.getAttribute("contenteditable")=="false"){return}for(var gp=0;gp<gs.childNodes.length;gp++){gj(gs.childNodes[gp])}if(/^(pre|div|p)$/i.test(gs.nodeName)){gg=true}}else{if(gs.nodeType==3){var gu=gs.nodeValue;if(!gu){return}if(gg){gn+="\n";gg=false}gn+=gu}}}for(;;){gj(gm);if(gm==gl){break}gm=gm.nextSibling}return gn}P.inputStyles={textarea:dj,contenteditable:R};function fU(gg,gf){this.ranges=gg;this.primIndex=gf}fU.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gf){if(gf==this){return true}if(gf.primIndex!=this.primIndex||gf.ranges.length!=this.ranges.length){return false}for(var gh=0;gh<this.ranges.length;gh++){var gg=this.ranges[gh],gi=gf.ranges[gh];if(bV(gg.anchor,gi.anchor)!=0||bV(gg.head,gi.head)!=0){return false}}return true},deepCopy:function(){for(var gf=[],gg=0;gg<this.ranges.length;gg++){gf[gg]=new d3(b1(this.ranges[gg].anchor),b1(this.ranges[gg].head))}return new fU(gf,this.primIndex)},somethingSelected:function(){for(var gf=0;gf<this.ranges.length;gf++){if(!this.ranges[gf].empty()){return true}}return false},contains:function(gi,gf){if(!gf){gf=gi}for(var gh=0;gh<this.ranges.length;gh++){var gg=this.ranges[gh];if(bV(gf,gg.from())>=0&&bV(gi,gg.to())<=0){return gh}}return -1}};function d3(gg,gf){this.anchor=gg;this.head=gf}d3.prototype={from:function(){return cQ(this.anchor,this.head)},to:function(){return bG(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function aR(gj,gn){var gf=gj[gn];gj.sort(function(gp,go){return bV(gp.from(),go.from())});gn=dq(gj,gf);for(var gi=1;gi<gj.length;gi++){var gm=gj[gi],gg=gj[gi-1];if(bV(gg.to(),gm.from())>=0){var gl=cQ(gg.from(),gm.from()),gk=bG(gg.to(),gm.to());var gh=gg.empty()?gm.from()==gm.head:gg.from()==gg.head;if(gi<=gn){--gn}gj.splice(--gi,2,new d3(gh?gk:gl,gh?gl:gk))}}return new fU(gj,gn)}function eM(gg,gf){return new fU([new d3(gg,gf||gg)],0)}function dd(gf,gg){return Math.max(gf.first,Math.min(gg,gf.first+gf.size-1))}function fF(gg,gh){if(gh.line<gg.first){return af(gg.first,0)}var gf=gg.first+gg.size-1;if(gh.line>gf){return af(gf,fs(gg,gf).text.length)}return fj(gh,fs(gg,gh.line).text.length)}function fj(gh,gg){var gf=gh.ch;if(gf==null||gf>gg){return af(gh.line,gg)}else{if(gf<0){return af(gh.line,0)}else{return gh}}}function a7(gg,gf){return gf>=gg.first&&gf<gg.first+gg.size}function d6(gh,gi){for(var gf=[],gg=0;gg<gi.length;gg++){gf[gg]=fF(gh,gi[gg])}return gf}function ff(gk,gg,gj,gf){if(gk.cm&&gk.cm.display.shift||gk.extend){var gi=gg.anchor;if(gf){var gh=bV(gj,gi)<0;if(gh!=(bV(gf,gi)<0)){gi=gj;gj=gf}else{if(gh!=(bV(gj,gf)<0)){gj=gf}}}return new d3(gi,gj)}else{return new d3(gf||gj,gj)}}function eH(gi,gh,gf,gg){bj(gi,new fU([ff(gi,gi.sel.primary(),gh,gf)],0),gg)}function aB(gk,gj,gh){for(var gf=[],gg=0;gg<gk.sel.ranges.length;gg++){gf[gg]=ff(gk,gk.sel.ranges[gg],gj[gg],null)}var gi=aR(gf,gk.sel.primIndex);bj(gk,gi,gh)}function ej(gj,gh,gf,gg){var gi=gj.sel.ranges.slice(0);gi[gh]=gf;bj(gj,aR(gi,gj.sel.primIndex),gg)}function O(gi,gh,gg,gf){bj(gi,eM(gh,gg),gf)}function e(gh,gf){var gg={ranges:gf.ranges,update:function(gj){this.ranges=[];for(var gi=0;gi<gj.length;gi++){this.ranges[gi]=new d3(fF(gh,gj[gi].anchor),fF(gh,gj[gi].head))}}};cH(gh,"beforeSelectionChange",gh,gg);if(gh.cm){cH(gh.cm,"beforeSelectionChange",gh.cm,gg)}if(gg.ranges!=gf.ranges){return aR(gg.ranges,gg.ranges.length-1)}else{return gf}}function e2(gj,gi,gg){var gf=gj.history.done,gh=fA(gf);if(gh&&gh.ranges){gf[gf.length-1]=gi;gd(gj,gi,gg)}else{bj(gj,gi,gg)}}function bj(gh,gg,gf){gd(gh,gg,gf);f3(gh,gh.sel,gh.cm?gh.cm.curOp.id:NaN,gf)}function gd(gi,gh,gg){if(fq(gi,"beforeSelectionChange")||gi.cm&&fq(gi.cm,"beforeSelectionChange")){gh=e(gi,gh)}var gf=gg&&gg.bias||(bV(gh.primary().head,gi.sel.primary().head)<0?-1:1);de(gi,ea(gi,gh,gf,true));if(!(gg&&gg.scroll===false)&&gi.cm){fz(gi.cm)}}function de(gg,gf){if(gf.equals(gg.sel)){return}gg.sel=gf;if(gg.cm){gg.cm.curOp.updateInput=gg.cm.curOp.selectionChanged=true;dl(gg.cm)}an(gg,"cursorActivity",gg)}function f2(gf){de(gf,ea(gf,gf.sel,null,false),dh)}function ea(gn,gg,gm,gl){var gi;for(var gj=0;gj<gg.ranges.length;gj++){var gk=gg.ranges[gj];var gf=bi(gn,gk.anchor,gm,gl);var gh=bi(gn,gk.head,gm,gl);if(gi||gf!=gk.anchor||gh!=gk.head){if(!gi){gi=gg.ranges.slice(0,gj)}gi[gj]=new d3(gf,gh)}}return gi?aR(gi,gg.primIndex):gg}function bi(gp,gn,gm,gl){var go=false,gk=gn;var gi=gm||1;gp.cantEdit=false;search:for(;;){var gq=fs(gp,gk.line);if(gq.markedSpans){for(var gj=0;gj<gq.markedSpans.length;++gj){var gg=gq.markedSpans[gj],gh=gg.marker;if((gg.from==null||(gh.inclusiveLeft?gg.from<=gk.ch:gg.from<gk.ch))&&(gg.to==null||(gh.inclusiveRight?gg.to>=gk.ch:gg.to>gk.ch))){if(gl){cH(gh,"beforeCursorEnter");if(gh.explicitlyCleared){if(!gq.markedSpans){break}else{--gj;continue}}}if(!gh.atomic){continue}var gf=gh.find(gi<0?-1:1);if(bV(gf,gk)==0){gf.ch+=gi;if(gf.ch<0){if(gf.line>gp.first){gf=fF(gp,af(gf.line-1))}else{gf=null}}else{if(gf.ch>gq.text.length){if(gf.line<gp.first+gp.size-1){gf=af(gf.line+1,0)}else{gf=null}}}if(!gf){if(go){if(!gl){return bi(gp,gn,gm,true)}gp.cantEdit=true;return af(gp.first,0)}go=true;gf=gn;gi=-gi}}gk=gf;continue search}}}return gk}}function bB(gf){gf.display.input.showSelection(gf.display.input.prepareSelection())}function eU(gm,gk){var gn=gm.doc,gl={};var gf=gl.cursors=document.createDocumentFragment();var gg=gl.selection=document.createDocumentFragment();for(var gi=0;gi<gn.sel.ranges.length;gi++){if(gk===false&&gi==gn.sel.primIndex){continue}var gj=gn.sel.ranges[gi];var gh=gj.empty();if(gh||gm.options.showCursorWhenSelecting){dP(gm,gj,gf)}if(!gh){bm(gm,gj,gg)}}return gl}function dP(gf,gh,gi){var gk=d0(gf,gh.head,"div",null,null,!gf.options.singleCursorHeightPerLine);var gj=gi.appendChild(fT("div","\u00a0","CodeMirror-cursor"));gj.style.left=gk.left+"px";gj.style.top=gk.top+"px";gj.style.height=Math.max(0,gk.bottom-gk.top)*gf.options.cursorHeight+"px";if(gk.other){var gg=gi.appendChild(fT("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gg.style.display="";gg.style.left=gk.other.left+"px";gg.style.top=gk.other.top+"px";gg.style.height=(gk.other.bottom-gk.other.top)*0.85+"px"}}function bm(gj,gn,gh){var gq=gj.display,gv=gj.doc;var gm=document.createDocumentFragment();var gw=eY(gj.display),gi=gw.left;var gr=Math.max(gq.sizerWidth,dt(gj)-gq.sizer.offsetLeft)-gw.right;function gp(gA,gz,gy,gx){if(gz<0){gz=0}gz=Math.round(gz);gx=Math.round(gx);gm.appendChild(fT("div",null,"CodeMirror-selected","position: absolute; left: "+gA+"px; top: "+gz+"px; width: "+(gy==null?gr-gA:gy)+"px; height: "+(gx-gz)+"px"))}function gl(gz,gA,gD){var gB=fs(gv,gz);var gC=gB.text.length;var gE,gy;function gx(gG,gF){return cN(gj,af(gz,gG),"div",gB,gF)}u(a(gB),gA||0,gD==null?gC:gD,function(gM,gL,gG){var gJ=gx(gM,"left"),gF,gK,gI;if(gM==gL){gF=gJ;gK=gI=gJ.left}else{gF=gx(gL-1,"right");if(gG=="rtl"){var gH=gJ;gJ=gF;gF=gH}gK=gJ.left;gI=gF.right}if(gA==null&&gM==0){gK=gi}if(gF.top-gJ.top>3){gp(gK,gJ.top,null,gJ.bottom);gK=gi;if(gJ.bottom<gF.top){gp(gK,gJ.bottom,null,gF.top)}}if(gD==null&&gL==gC){gI=gr}if(!gE||gJ.top<gE.top||gJ.top==gE.top&&gJ.left<gE.left){gE=gJ}if(!gy||gF.bottom>gy.bottom||gF.bottom==gy.bottom&&gF.right>gy.right){gy=gF}if(gK<gi+1){gK=gi}gp(gK,gF.top,gI-gK,gF.bottom)});return{start:gE,end:gy}}var gt=gn.from(),gs=gn.to();if(gt.line==gs.line){gl(gt.line,gt.ch,gs.ch)}else{var gk=fs(gv,gt.line),gg=fs(gv,gs.line);var gf=dU(gk)==dU(gg);var go=gl(gt.line,gt.ch,gf?gk.text.length+1:null).end;var gu=gl(gs.line,gf?0:null,gs.ch).start;if(gf){if(go.top<gu.top-2){gp(go.right,go.top,null,go.bottom);gp(gi,gu.top,gu.left,gu.bottom)}else{gp(go.right,go.top,gu.left-go.right,go.bottom)}}if(go.bottom<gu.top){gp(gi,go.bottom,null,gu.top)}}gh.appendChild(gm)}function d9(gf){if(!gf.state.focused){return}var gh=gf.display;clearInterval(gh.blinker);var gg=true;gh.cursorDiv.style.visibility="";if(gf.options.cursorBlinkRate>0){gh.blinker=setInterval(function(){gh.cursorDiv.style.visibility=(gg=!gg)?"":"hidden"},gf.options.cursorBlinkRate)}else{if(gf.options.cursorBlinkRate<0){gh.cursorDiv.style.visibility="hidden"}}}function n(gf,gg){if(gf.doc.mode.startState&&gf.doc.frontier<gf.display.viewTo){gf.state.highlight.set(gg,cn(ax,gf))}}function ax(gf){var gj=gf.doc;if(gj.frontier<gj.first){gj.frontier=gj.first}if(gj.frontier>=gf.display.viewTo){return}var gh=+new Date+gf.options.workTime;var gi=bJ(gj.mode,dJ(gf,gj.frontier));var gg=[];gj.iter(gj.frontier,Math.min(gj.first+gj.size,gf.display.viewTo+500),function(gm){if(gj.frontier>=gf.display.viewFrom){var gp=gm.styles;var gl=fp(gf,gm,gi,true);gm.styles=gl.styles;var gn=gm.styleClasses,gk=gl.classes;if(gk){gm.styleClasses=gk}else{if(gn){gm.styleClasses=null}}var gq=!gp||gp.length!=gm.styles.length||gn!=gk&&(!gn||!gk||gn.bgClass!=gk.bgClass||gn.textClass!=gk.textClass);for(var go=0;!gq&&go<gp.length;++go){gq=gp[go]!=gm.styles[go]}if(gq){gg.push(gj.frontier)}gm.stateAfter=bJ(gj.mode,gi)}else{dD(gf,gm.text,gi);gm.stateAfter=gj.frontier%5==0?bJ(gj.mode,gi):null}++gj.frontier;if(+new Date>gh){n(gf,gf.options.workDelay);return true}});if(gg.length){cR(gf,function(){for(var gk=0;gk<gg.length;gk++){Z(gf,gg[gk],"text")}})}}function aQ(gl,gh,gi){var gg,gk,gm=gl.doc;var gf=gi?-1:gh-(gl.doc.mode.innerMode?1000:100);for(var gj=gh;gj>gf;--gj){if(gj<=gm.first){return gm.first}var go=fs(gm,gj-1);if(go.stateAfter&&(!gi||gj<=gm.frontier)){return gj}var gn=bA(go.text,null,gl.options.tabSize);if(gk==null||gg>gn){gk=gj-1;gg=gn}}return gk}function dJ(gf,gl,gg){var gj=gf.doc,gi=gf.display;if(!gj.mode.startState){return true}var gk=aQ(gf,gl,gg),gh=gk>gj.first&&fs(gj,gk-1).stateAfter;if(!gh){gh=be(gj.mode)}else{gh=bJ(gj.mode,gh)}gj.iter(gk,gl,function(gm){dD(gf,gm.text,gh);var gn=gk==gl-1||gk%5==0||gk>=gi.viewFrom&&gk<gi.viewTo;gm.stateAfter=gn?bJ(gj.mode,gh):null;++gk});if(gg){gj.frontier=gk}return gh}function e1(gf){return gf.lineSpace.offsetTop}function bv(gf){return gf.mover.offsetHeight-gf.lineSpace.offsetHeight}function eY(gi){if(gi.cachedPaddingH){return gi.cachedPaddingH}var gh=bk(gi.measure,fT("pre","x"));var gf=ge.getComputedStyle?ge.getComputedStyle(gh):gh.currentStyle;var gg={left:parseInt(gf.paddingLeft),right:parseInt(gf.paddingRight)};if(!isNaN(gg.left)&&!isNaN(gg.right)){gi.cachedPaddingH=gg}return gg}function cX(gf){return dR-gf.display.nativeBarWidth}function dt(gf){return gf.display.scroller.clientWidth-cX(gf)-gf.display.barWidth}function at(gf){return gf.display.scroller.clientHeight-cX(gf)-gf.display.barHeight}function bX(gm,gi,gl){var gf=gm.options.lineWrapping;var gj=gf&&dt(gm);if(!gi.measure.heights||gf&&gi.measure.width!=gj){var gk=gi.measure.heights=[];if(gf){gi.measure.width=gj;var go=gi.text.firstChild.getClientRects();for(var gg=0;gg<go.length-1;gg++){var gn=go[gg],gh=go[gg+1];if(Math.abs(gn.bottom-gh.bottom)>2){gk.push((gn.bottom+gh.top)/2-gl.top)}}}gk.push(gl.bottom-gl.top)}}function aV(gh,gf,gi){if(gh.line==gf){return{map:gh.measure.map,cache:gh.measure.cache}}for(var gg=0;gg<gh.rest.length;gg++){if(gh.rest[gg]==gf){return{map:gh.measure.maps[gg],cache:gh.measure.caches[gg]}}}for(var gg=0;gg<gh.rest.length;gg++){if(bp(gh.rest[gg])>gi){return{map:gh.measure.maps[gg],cache:gh.measure.caches[gg],before:true}}}}function da(gf,gh){gh=dU(gh);var gj=bp(gh);var gg=gf.display.externalMeasured=new bc(gf.doc,gh,gj);gg.lineN=gj;var gi=gg.built=eL(gf,gg);gg.text=gi.pre;bk(gf.display.lineMeasure,gi.pre);return gg}function l(gf,gg,gi,gh){return dL(gf,cj(gf,gg),gi,gh)}function e4(gf,gh){if(gh>=gf.display.viewFrom&&gh<gf.display.viewTo){return gf.display.view[U(gf,gh)]}var gg=gf.display.externalMeasured;if(gg&&gh>=gg.lineN&&gh<gg.lineN+gg.size){return gg}}function cj(gf,gh){var gi=bp(gh);var gg=e4(gf,gi);if(gg&&!gg.text){gg=null}else{if(gg&&gg.changes){dc(gf,gg,gi,e6(gf))}}if(!gg){gg=da(gf,gh)}var gj=aV(gg,gh,gi);return{line:gh,view:gg,rect:null,map:gj.map,cache:gj.cache,before:gj.before,hasHeights:false}}function dL(gf,gl,gj,gh,gg){if(gl.before){gj=-1}var gi=gj+(gh||""),gk;if(gl.cache.hasOwnProperty(gi)){gk=gl.cache[gi]}else{if(!gl.rect){gl.rect=gl.view.text.getBoundingClientRect()}if(!gl.hasHeights){bX(gf,gl.view,gl.rect);gl.hasHeights=true}gk=o(gf,gl,gj,gh);if(!gk.bogus){gl.cache[gi]=gk}}return{left:gk.left,right:gk.right,top:gg?gk.rtop:gk.top,bottom:gg?gk.rbottom:gk.bottom}}var f0={left:0,right:0,top:0,bottom:0};function cC(gg,gf,gm){var gi,gh,gj,go;for(var gl=0;gl<gg.length;gl+=3){var gk=gg[gl],gn=gg[gl+1];if(gf<gk){gh=0;gj=1;go="left"}else{if(gf<gn){gh=gf-gk;gj=gh+1}else{if(gl==gg.length-3||gf==gn&&gg[gl+3]>gf){gj=gn-gk;gh=gj-1;if(gf>=gn){go="right"}}}}if(gh!=null){gi=gg[gl+2];if(gk==gn&&gm==(gi.insertLeft?"left":"right")){go=gm}if(gm=="left"&&gh==0){while(gl&&gg[gl-2]==gg[gl-3]&&gg[gl-1].insertLeft){gi=gg[(gl-=3)+2];go="left"}}if(gm=="right"&&gh==gn-gk){while(gl<gg.length-3&&gg[gl+3]==gg[gl+4]&&!gg[gl+5].insertLeft){gi=gg[(gl+=3)+2];go="right"}}break}}return{node:gi,start:gh,end:gj,collapse:go,coverStart:gk,coverEnd:gn}}function o(gm,gw,go,gk){var gn=cC(gw.map,go,gk);var gu=gn.node,gj=gn.start,gh=gn.end,gp=gn.collapse;var gg;if(gu.nodeType==3){for(var gv=0;gv<4;gv++){while(gj&&fk(gw.line.text.charAt(gn.coverStart+gj))){--gj}while(gn.coverStart+gh<gn.coverEnd&&fk(gw.line.text.charAt(gn.coverStart+gh))){++gh}if(dS&&r<9&&gj==0&&gh==gn.coverEnd-gn.coverStart){gg=gu.parentNode.getBoundingClientRect()}else{if(dS&&gm.options.lineWrapping){var gi=b8(gu,gj,gh).getClientRects();if(gi.length){gg=gi[gk=="right"?gi.length-1:0]}else{gg=f0}}else{gg=b8(gu,gj,gh).getBoundingClientRect()||f0}}if(gg.left||gg.right||gj==0){break}gh=gj;gj=gj-1;gp="right"}if(dS&&r<11){gg=fQ(gm.display.measure,gg)}}else{if(gj>0){gp=gk="right"}var gi;if(gm.options.lineWrapping&&(gi=gu.getClientRects()).length>1){gg=gi[gk=="right"?gi.length-1:0]}else{gg=gu.getBoundingClientRect()}}if(dS&&r<9&&!gj&&(!gg||!gg.left&&!gg.right)){var gl=gu.parentNode.getClientRects()[0];if(gl){gg={left:gl.left,right:gl.left+dK(gm.display),top:gl.top,bottom:gl.bottom}}else{gg=f0}}var gs=gg.top-gw.rect.top,gq=gg.bottom-gw.rect.top;var gy=(gs+gq)/2;var gx=gw.view.measure.heights;for(var gv=0;gv<gx.length-1;gv++){if(gy<gx[gv]){break}}var gt=gv?gx[gv-1]:0,gr=gx[gv];var gf={left:(gp=="right"?gg.right:gg.left)-gw.rect.left,right:(gp=="left"?gg.left:gg.right)-gw.rect.left,top:gt,bottom:gr};if(!gg.left&&!gg.right){gf.bogus=true}if(!gm.options.singleCursorHeightPerLine){gf.rtop=gs;gf.rbottom=gq}return gf}function fQ(gh,gi){if(!ge.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!cB(gh)){return gi}var gf=screen.logicalXDPI/screen.deviceXDPI;var gg=screen.logicalYDPI/screen.deviceYDPI;return{left:gi.left*gf,right:gi.right*gf,top:gi.top*gg,bottom:gi.bottom*gg}}function aA(gg){if(gg.measure){gg.measure.cache={};gg.measure.heights=null;if(gg.rest){for(var gf=0;gf<gg.rest.length;gf++){gg.measure.caches[gf]={}}}}}function cy(gf){gf.display.externalMeasure=null;d7(gf.display.lineMeasure);for(var gg=0;gg<gf.display.view.length;gg++){aA(gf.display.view[gg])}}function c2(gf){cy(gf);gf.display.cachedCharWidth=gf.display.cachedTextHeight=gf.display.cachedPaddingH=null;if(!gf.options.lineWrapping){gf.display.maxLineChanged=true}gf.display.lineNumChars=null}function cl(){return ge.pageXOffset||(document.documentElement||document.body).scrollLeft}function ck(){return ge.pageYOffset||(document.documentElement||document.body).scrollTop}function fN(gl,gi,gk,gg){if(gi.widgets){for(var gh=0;gh<gi.widgets.length;++gh){if(gi.widgets[gh].above){var gn=c3(gi.widgets[gh]);gk.top+=gn;gk.bottom+=gn}}}if(gg=="line"){return gk}if(!gg){gg="local"}var gj=bs(gi);if(gg=="local"){gj+=e1(gl.display)}else{gj-=gl.display.viewOffset}if(gg=="page"||gg=="window"){var gf=gl.display.lineSpace.getBoundingClientRect();gj+=gf.top+(gg=="window"?0:ck());var gm=gf.left+(gg=="window"?0:cl());gk.left+=gm;gk.right+=gm}gk.top+=gj;gk.bottom+=gj;return gk}function ep(gh,gg,gi){if(gi=="div"){return gg}var gl=gg.left,gk=gg.top;if(gi=="page"){gl-=cl();gk-=ck()}else{if(gi=="local"||!gi){var gj=gh.display.sizer.getBoundingClientRect();gl+=gj.left;gk+=gj.top}}var gf=gh.display.lineSpace.getBoundingClientRect();return{left:gl-gf.left,top:gk-gf.top}}function cN(gf,gj,gi,gh,gg){if(!gh){gh=fs(gf.doc,gj.line)}return fN(gf,gh,l(gf,gh,gj.ch,gg),gi)}function d0(go,gn,gg,gl,gq,gi){gl=gl||fs(go.doc,gn.line);if(!gq){gq=cj(go,gl)}function gj(gt,gs){var gr=dL(go,gq,gt,gs?"right":"left",gi);if(gs){gr.left=gr.right}else{gr.right=gr.left}return fN(go,gl,gr,gg)}function gp(gu,gt){var gr=gk[gt],gs=gr.level%2;if(gu==dF(gr)&&gt&&gr.level<gk[gt-1].level){gr=gk[--gt];gu=eo(gr)-(gr.level%2?0:1);gs=true}else{if(gu==eo(gr)&&gt<gk.length-1&&gr.level<gk[gt+1].level){gr=gk[++gt];gu=dF(gr)-gr.level%2;gs=false}}if(gs&&gu==gr.to&&gu>gr.from){return gj(gu-1)}return gj(gu,gs)}var gk=a(gl),gf=gn.ch;if(!gk){return gj(gf)}var gm=aH(gk,gf);var gh=gp(gf,gm);if(fB!=null){gh.other=gp(gf,fB)}return gh}function dM(gf,gj){var gi=0,gj=fF(gf.doc,gj);if(!gf.options.lineWrapping){gi=dK(gf.display)*gj.ch}var gg=fs(gf.doc,gj.line);var gh=bs(gg)+e1(gf.display);return{left:gi,right:gi,top:gh,bottom:gh+gg.height}}function eC(gf,gg,gj,gi){var gh=af(gf,gg);gh.xRel=gi;if(gj){gh.outside=true}return gh}function fL(gk,gj,gi){var gl=gk.doc;gi+=gk.display.viewOffset;if(gi<0){return eC(gl.first,0,true,-1)}var gh=bw(gl,gi),gm=gl.first+gl.size-1;if(gh>gm){return eC(gl.first+gl.size-1,fs(gl,gm).text.length,true,1)}if(gj<0){gj=0}var gg=fs(gl,gh);for(;;){var go=c6(gk,gg,gh,gj,gi);var gn=f6(gg);var gf=gn&&gn.find(0,true);if(gn&&(go.ch>gf.from.ch||go.ch==gf.from.ch&&go.xRel>0)){gh=bp(gg=gf.to.line)}else{return go}}}function c6(gp,gg,gf,gr,gq){var go=gq-bs(gg);var gn=false,gD=2*gp.display.wrapper.clientWidth;var gv=cj(gp,gg);function gC(gE){var gF=d0(gp,af(gf,gE),"line",gg,gv);gn=true;if(go>gF.bottom){return gF.left-gD}else{if(go<gF.top){return gF.left+gD}else{gn=false}}return gF.left}var gu=a(gg),gy=gg.text.length;var gz=cz(gg),gi=av(gg);var gw=gC(gz),gt=gn,gh=gC(gi),gk=gn;if(gr>gh){return eC(gf,gi,gk,1)}for(;;){if(gu?gi==gz||gi==D(gg,gz,1):gi-gz<=1){var gs=gr<gw||gr-gw<=gh-gr?gz:gi;var gB=gr-(gs==gz?gw:gh);while(fk(gg.text.charAt(gs))){++gs}var gm=eC(gf,gs,gs==gz?gt:gk,gB<-1?-1:gB>1?1:0);return gm}var gl=Math.ceil(gy/2),gx=gz+gl;if(gu){gx=gz;for(var gA=0;gA<gl;++gA){gx=D(gg,gx,1)}}var gj=gC(gx);if(gj>gr){gi=gx;gh=gj;if(gk=gn){gh+=1000}gy=gl}else{gz=gx;gw=gj;gt=gn;gy-=gl}}}var cF;function aS(gh){if(gh.cachedTextHeight!=null){return gh.cachedTextHeight}if(cF==null){cF=fT("pre");for(var gf=0;gf<49;++gf){cF.appendChild(document.createTextNode("x"));cF.appendChild(fT("br"))}cF.appendChild(document.createTextNode("x"))}bk(gh.measure,cF);var gg=cF.offsetHeight/50;if(gg>3){gh.cachedTextHeight=gg}d7(gh.measure);return gg||1}function dK(gj){if(gj.cachedCharWidth!=null){return gj.cachedCharWidth}var gf=fT("span","xxxxxxxxxx");var gi=fT("pre",[gf]);bk(gj.measure,gi);var gh=gf.getBoundingClientRect(),gg=(gh.right-gh.left)/10;if(gg>2){gj.cachedCharWidth=gg}return gg||10}var bR=null;var ef=0;function cM(gf){gf.curOp={cm:gf,viewChanged:false,startHeight:gf.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++ef};if(bR){bR.ops.push(gf.curOp)}else{gf.curOp.ownsGroup=bR={ops:[gf.curOp],delayedCallbacks:[]}}}function cY(gi){var gf=gi.delayedCallbacks,gh=0;do{for(;gh<gf.length;gh++){gf[gh]()}for(var gg=0;gg<gi.ops.length;gg++){var gj=gi.ops[gg];if(gj.cursorActivityHandlers){while(gj.cursorActivityCalled<gj.cursorActivityHandlers.length){gj.cursorActivityHandlers[gj.cursorActivityCalled++](gj.cm)}}}}while(gh<gf.length)}function ar(gf){var gi=gf.curOp,gh=gi.ownsGroup;if(!gh){return}try{cY(gh)}finally{bR=null;for(var gg=0;gg<gh.ops.length;gg++){gh.ops[gg].cm.curOp=null}cP(gh)}}function cP(gh){var gg=gh.ops;for(var gf=0;gf<gg.length;gf++){a9(gg[gf])}for(var gf=0;gf<gg.length;gf++){cV(gg[gf])}for(var gf=0;gf<gg.length;gf++){bd(gg[gf])}for(var gf=0;gf<gg.length;gf++){cW(gg[gf])}for(var gf=0;gf<gg.length;gf++){eT(gg[gf])}}function a9(gh){var gf=gh.cm,gg=gf.display;Q(gf);if(gh.updateMaxLine){j(gf)}gh.mustUpdate=gh.viewChanged||gh.forceUpdate||gh.scrollTop!=null||gh.scrollToPos&&(gh.scrollToPos.from.line<gg.viewFrom||gh.scrollToPos.to.line>=gg.viewTo)||gg.maxLineChanged&&gf.options.lineWrapping;gh.update=gh.mustUpdate&&new cE(gf,gh.mustUpdate&&{top:gh.scrollTop,ensure:gh.scrollToPos},gh.forceUpdate)}function cV(gf){gf.updatedDisplay=gf.mustUpdate&&L(gf.cm,gf.update)}function bd(gh){var gf=gh.cm,gg=gf.display;if(gh.updatedDisplay){cb(gf)}gh.barMeasure=dH(gf);if(gg.maxLineChanged&&!gf.options.lineWrapping){gh.adjustWidthTo=l(gf,gg.maxLine,gg.maxLine.text.length).left+3;gf.display.sizerWidth=gh.adjustWidthTo;gh.barMeasure.scrollWidth=Math.max(gg.scroller.clientWidth,gg.sizer.offsetLeft+gh.adjustWidthTo+cX(gf)+gf.display.barWidth);gh.maxScrollLeft=Math.max(0,gg.sizer.offsetLeft+gh.adjustWidthTo-dt(gf))}if(gh.updatedDisplay||gh.selectionChanged){gh.preparedSelection=gg.input.prepareSelection()}}function cW(gg){var gf=gg.cm;if(gg.adjustWidthTo!=null){gf.display.sizer.style.minWidth=gg.adjustWidthTo+"px";if(gg.maxScrollLeft<gf.doc.scrollLeft){bl(gf,Math.min(gf.display.scroller.scrollLeft,gg.maxScrollLeft),true)}gf.display.maxLineChanged=false}if(gg.preparedSelection){gf.display.input.showSelection(gg.preparedSelection)}if(gg.updatedDisplay){dG(gf,gg.barMeasure)}if(gg.updatedDisplay||gg.startHeight!=gf.doc.height){fE(gf,gg.barMeasure)}if(gg.selectionChanged){d9(gf)}if(gf.state.focused&&gg.updateInput){gf.display.input.reset(gg.typing)}}function eT(gm){var gh=gm.cm,gk=gh.display,gj=gh.doc;if(gm.updatedDisplay){b4(gh,gm.update)}if(gk.wheelStartX!=null&&(gm.scrollTop!=null||gm.scrollLeft!=null||gm.scrollToPos)){gk.wheelStartX=gk.wheelStartY=null}if(gm.scrollTop!=null&&(gk.scroller.scrollTop!=gm.scrollTop||gm.forceScroll)){gj.scrollTop=Math.max(0,Math.min(gk.scroller.scrollHeight-gk.scroller.clientHeight,gm.scrollTop));gk.scrollbars.setScrollTop(gj.scrollTop);gk.scroller.scrollTop=gj.scrollTop}if(gm.scrollLeft!=null&&(gk.scroller.scrollLeft!=gm.scrollLeft||gm.forceScroll)){gj.scrollLeft=Math.max(0,Math.min(gk.scroller.scrollWidth-dt(gh),gm.scrollLeft));gk.scrollbars.setScrollLeft(gj.scrollLeft);gk.scroller.scrollLeft=gj.scrollLeft;ev(gh)}if(gm.scrollToPos){var gg=M(gh,fF(gj,gm.scrollToPos.from),fF(gj,gm.scrollToPos.to),gm.scrollToPos.margin);if(gm.scrollToPos.isCursor&&gh.state.focused){w(gh,gg)}}var gf=gm.maybeHiddenMarkers,gl=gm.maybeUnhiddenMarkers;if(gf){for(var gi=0;gi<gf.length;++gi){if(!gf[gi].lines.length){cH(gf[gi],"hide")}}}if(gl){for(var gi=0;gi<gl.length;++gi){if(gl[gi].lines.length){cH(gl[gi],"unhide")}}}if(gk.wrapper.offsetHeight){gj.scrollTop=gh.display.scroller.scrollTop}if(gm.changeObjs){cH(gh,"changes",gh,gm.changeObjs)}if(gm.update){gm.update.finish()}}function cR(gf,gg){if(gf.curOp){return gg()}cM(gf);try{return gg()}finally{ar(gf)}}function c9(gf,gg){return function(){if(gf.curOp){return gg.apply(gf,arguments)}cM(gf);try{return gg.apply(gf,arguments)}finally{ar(gf)}}}function ai(gf){return function(){if(this.curOp){return gf.apply(this,arguments)}cM(this);try{return gf.apply(this,arguments)}finally{ar(this)}}}function cx(gf){return function(){var gg=this.cm;if(!gg||gg.curOp){return gf.apply(this,arguments)}cM(gg);try{return gf.apply(this,arguments)}finally{ar(gg)}}}function bc(gh,gf,gg){this.line=gf;this.rest=ei(gf);this.size=this.rest?bp(fA(this.rest))-gg+1:1;this.node=this.text=null;this.hidden=fe(gh,gf)}function fJ(gf,gl,gk){var gj=[],gh;for(var gi=gl;gi<gk;gi=gh){var gg=new bc(gf.doc,fs(gf.doc,gi),gi);gh=gi+gg.size;gj.push(gg)}return gj}function c7(gj,gl,gk,gm){if(gl==null){gl=gj.doc.first}if(gk==null){gk=gj.doc.first+gj.doc.size}if(!gm){gm=0}var gh=gj.display;if(gm&&gk<gh.viewTo&&(gh.updateLineNumbers==null||gh.updateLineNumbers>gl)){gh.updateLineNumbers=gl}gj.curOp.viewChanged=true;if(gl>=gh.viewTo){if(cf&&aO(gj.doc,gl)<gh.viewTo){eq(gj)}}else{if(gk<=gh.viewFrom){if(cf&&eb(gj.doc,gk+gm)>gh.viewFrom){eq(gj)}else{gh.viewFrom+=gm;gh.viewTo+=gm}}else{if(gl<=gh.viewFrom&&gk>=gh.viewTo){eq(gj)}else{if(gl<=gh.viewFrom){var gi=ad(gj,gk,gk+gm,1);if(gi){gh.view=gh.view.slice(gi.index);gh.viewFrom=gi.lineN;gh.viewTo+=gm}else{eq(gj)}}else{if(gk>=gh.viewTo){var gi=ad(gj,gl,gl,-1);if(gi){gh.view=gh.view.slice(0,gi.index);gh.viewTo=gi.lineN}else{eq(gj)}}else{var gn=ad(gj,gl,gl,-1);var gf=ad(gj,gk,gk+gm,1);if(gn&&gf){gh.view=gh.view.slice(0,gn.index).concat(fJ(gj,gn.lineN,gf.lineN)).concat(gh.view.slice(gf.index));gh.viewTo+=gm}else{eq(gj)}}}}}}var gg=gh.externalMeasured;if(gg){if(gk<gg.lineN){gg.lineN+=gm}else{if(gl<gg.lineN+gg.size){gh.externalMeasured=null}}}}function Z(gg,gh,gk){gg.curOp.viewChanged=true;var gl=gg.display,gj=gg.display.externalMeasured;if(gj&&gh>=gj.lineN&&gh<gj.lineN+gj.size){gl.externalMeasured=null}if(gh<gl.viewFrom||gh>=gl.viewTo){return}var gi=gl.view[U(gg,gh)];if(gi.node==null){return}var gf=gi.changes||(gi.changes=[]);if(dq(gf,gk)==-1){gf.push(gk)}}function eq(gf){gf.display.viewFrom=gf.display.viewTo=gf.doc.first;gf.display.view=[];gf.display.viewOffset=0}function U(gf,gi){if(gi>=gf.display.viewTo){return null}gi-=gf.display.viewFrom;if(gi<0){return null}var gg=gf.display.view;for(var gh=0;gh<gg.length;gh++){gi-=gg[gh].size;if(gi<0){return gh}}}function ad(gm,gh,gj,gg){var gk=U(gm,gh),gn,gl=gm.display.view;if(!cf||gj==gm.doc.first+gm.doc.size){return{index:gk,lineN:gj}}for(var gi=0,gf=gm.display.viewFrom;gi<gk;gi++){gf+=gl[gi].size}if(gf!=gh){if(gg>0){if(gk==gl.length-1){return null}gn=(gf+gl[gk].size)-gh;gk++}else{gn=gf-gh}gh+=gn;gj+=gn}while(aO(gm.doc,gj)!=gj){if(gk==(gg<0?0:gl.length-1)){return null}gj+=gg*gl[gk-(gg<0?1:0)].size;gk+=gg}return{index:gk,lineN:gj}}function cU(gf,gj,gi){var gh=gf.display,gg=gh.view;if(gg.length==0||gj>=gh.viewTo||gi<=gh.viewFrom){gh.view=fJ(gf,gj,gi);gh.viewFrom=gj}else{if(gh.viewFrom>gj){gh.view=fJ(gf,gj,gh.viewFrom).concat(gh.view)}else{if(gh.viewFrom<gj){gh.view=gh.view.slice(U(gf,gj))}}gh.viewFrom=gj;if(gh.viewTo<gi){gh.view=gh.view.concat(fJ(gf,gh.viewTo,gi))}else{if(gh.viewTo>gi){gh.view=gh.view.slice(0,U(gf,gi))}}}gh.viewTo=gi}function di(gf){var gg=gf.display.view,gj=0;for(var gi=0;gi<gg.length;gi++){var gh=gg[gi];if(!gh.hidden&&(!gh.node||gh.changes)){++gj}}return gj}function eN(gm){var gi=gm.display;bF(gi.scroller,"mousedown",c9(gm,en));if(dS&&r<11){bF(gi.scroller,"dblclick",c9(gm,function(gp){if(cu(gm,gp)){return}var gq=b9(gm,gp);if(!gq||ee(gm,gp)||aX(gm.display,gp)){return}aF(gp);var go=gm.findWordAt(gq);eH(gm.doc,go.anchor,go.head)}))}else{bF(gi.scroller,"dblclick",function(go){cu(gm,go)||aF(go)})}if(!es){bF(gi.scroller,"contextmenu",function(go){aD(gm,go)})}var gn,gg={end:0};function gj(){if(gi.activeTouch){gn=setTimeout(function(){gi.activeTouch=null},1000);gg=gi.activeTouch;gg.end=+new Date}}function gf(go){if(go.touches.length!=1){return false}var gp=go.touches[0];return gp.radiusX<=1&&gp.radiusY<=1}function gh(gr,go){if(go.left==null){return true}var gq=go.left-gr.left,gp=go.top-gr.top;return gq*gq+gp*gp>20*20}bF(gi.scroller,"touchstart",function(gp){if(!gf(gp)){clearTimeout(gn);var go=+new Date;gi.activeTouch={start:go,moved:false,prev:go-gg.end<=300?gg:null};if(gp.touches.length==1){gi.activeTouch.left=gp.touches[0].pageX;gi.activeTouch.top=gp.touches[0].pageY}}});bF(gi.scroller,"touchmove",function(){if(gi.activeTouch){gi.activeTouch.moved=true}});bF(gi.scroller,"touchend",function(gp){var gr=gi.activeTouch;if(gr&&!aX(gi,gp)&&gr.left!=null&&!gr.moved&&new Date-gr.start<300){var gq=gm.coordsChar(gi.activeTouch,"page"),go;if(!gr.prev||gh(gr,gr.prev)){go=new d3(gq,gq)}else{if(!gr.prev.prev||gh(gr,gr.prev.prev)){go=gm.findWordAt(gq)}else{go=new d3(af(gq.line,0),fF(gm.doc,af(gq.line+1,0)))}}gm.setSelection(go.anchor,go.head);gm.focus();aF(gp)}gj()});bF(gi.scroller,"touchcancel",gj);bF(gi.scroller,"scroll",function(){if(gi.scroller.clientHeight){Y(gm,gi.scroller.scrollTop);bl(gm,gi.scroller.scrollLeft,true);cH(gm,"scroll",gm)}});bF(gi.scroller,"mousewheel",function(go){el(gm,go)});bF(gi.scroller,"DOMMouseScroll",function(go){el(gm,go)});bF(gi.wrapper,"scroll",function(){gi.wrapper.scrollTop=gi.wrapper.scrollLeft=0});function gl(go){if(!cu(gm,go)){f9(go)}}if(gm.options.dragDrop){bF(gi.scroller,"dragstart",function(go){du(gm,go)});bF(gi.scroller,"dragenter",gl);bF(gi.scroller,"dragover",gl);bF(gi.scroller,"drop",c9(gm,b0))}var gk=gi.input.getField();bF(gk,"keyup",function(go){b3.call(gm,go)});bF(gk,"keydown",c9(gm,y));bF(gk,"keypress",c9(gm,aP));bF(gk,"focus",cn(aL,gm));bF(gk,"blur",cn(cs,gm))}function aN(gf){var gg=gf.display;if(gg.lastWrapHeight==gg.wrapper.clientHeight&&gg.lastWrapWidth==gg.wrapper.clientWidth){return}gg.cachedCharWidth=gg.cachedTextHeight=gg.cachedPaddingH=null;gg.scrollbarsClipped=false;gf.setSize()}function aX(gg,gf){for(var gh=T(gf);gh!=gg.wrapper;gh=gh.parentNode){if(!gh||(gh.nodeType==1&&gh.getAttribute("cm-ignore-events")=="true")||(gh.parentNode==gg.sizer&&gh!=gg.mover)){return true}}}function b9(gn,gj,gh,gg){var gk=gn.display;if(!gh&&T(gj).getAttribute("cm-not-content")=="true"){return null}var gm,gl,gf=gk.lineSpace.getBoundingClientRect();try{gm=gj.clientX-gf.left;gl=gj.clientY-gf.top}catch(gj){return null}var go=fL(gn,gm,gl),gp;if(gg&&go.xRel==1&&(gp=fs(gn.doc,go.line).text).length==go.ch){var gi=bA(gp,gp.length,gn.options.tabSize)-gp.length;go=af(go.line,Math.max(0,Math.round((gm-eY(gn.display).left)/dK(gn.display))-gi))}return go}function en(gh){var gf=this,gg=gf.display;if(gg.activeTouch&&gg.input.supportsTouch()||cu(gf,gh)){return}gg.shift=gh.shiftKey;if(aX(gg,gh)){if(!aq){gg.scroller.draggable=false;setTimeout(function(){gg.scroller.draggable=true},100)}return}if(ee(gf,gh)){return}var gi=b9(gf,gh);ge.focus();switch(fK(gh)){case 1:if(gi){aC(gf,gh,gi)}else{if(T(gh)==gg.scroller){aF(gh)}}break;case 2:if(aq){gf.state.lastMiddleDown=+new Date}if(gi){eH(gf.doc,gi)}setTimeout(function(){gg.input.focus()},20);aF(gh);break;case 3:if(es){aD(gf,gh)}break}}var dw,dk;function aC(gf,gl,gm){if(dS){setTimeout(cn(z,gf),0)}else{z(gf)}var gh=+new Date,gi;if(dk&&dk.time>gh-400&&bV(dk.pos,gm)==0){gi="triple"}else{if(dw&&dw.time>gh-400&&bV(dw.pos,gm)==0){gi="double";dk={time:gh,pos:gm}}else{gi="single";dw={time:gh,pos:gm}}}var gk=gf.doc.sel,gj=bL?gl.metaKey:gl.ctrlKey,gg;if(gf.options.dragDrop&&eF&&!c4(gf)&&gi=="single"&&(gg=gk.contains(gm))>-1&&!gk.ranges[gg].empty()){aW(gf,gl,gm,gj)}else{ed(gf,gl,gm,gi,gj)}}function aW(gg,gj,gk,gh){var gi=gg.display;var gf=c9(gg,function(gl){if(aq){gi.scroller.draggable=false}gg.state.draggingText=false;eg(document,"mouseup",gf);eg(gi.scroller,"drop",gf);if(Math.abs(gj.clientX-gl.clientX)+Math.abs(gj.clientY-gl.clientY)<10){aF(gl);if(!gh){eH(gg.doc,gk)}gi.input.focus();if(dS&&r==9){setTimeout(function(){document.body.focus();gi.input.focus()},20)}}});if(aq){gi.scroller.draggable=true}gg.state.draggingText=gf;if(gi.scroller.dragDrop){gi.scroller.dragDrop()}bF(document,"mouseup",gf);bF(gi.scroller,"drop",gf)}function ed(gj,gw,gh,gg,gf){var gt=gj.display,gz=gj.doc;aF(gw);var gi,gp,gk=gz.sel,gl=gk.ranges;if(gf&&!gw.shiftKey){gp=gz.sel.contains(gh);if(gp>-1){gi=gl[gp]}else{gi=new d3(gh,gh)}}else{gi=gz.sel.primary()}if(gw.altKey){gg="rect";if(!gf){gi=new d3(gh,gh)}gh=b9(gj,gw,true,true);gp=-1}else{if(gg=="double"){var gu=gj.findWordAt(gh);if(gj.display.shift||gz.extend){gi=ff(gz,gi,gu.anchor,gu.head)}else{gi=gu}}else{if(gg=="triple"){var go=new d3(af(gh.line,0),fF(gz,af(gh.line+1,0)));if(gj.display.shift||gz.extend){gi=ff(gz,gi,go.anchor,go.head)}else{gi=go}}else{gi=ff(gz,gi,gh)}}}if(!gf){gp=0;bj(gz,new fU([gi],0),dv);gk=gz.sel}else{if(gp==-1){gp=gl.length;bj(gz,aR(gl.concat([gi]),gp),{scroll:false,origin:"*mouse"})}else{if(gl.length>1&&gl[gp].empty()&&gg=="single"){bj(gz,aR(gl.slice(0,gp).concat(gl.slice(gp+1)),0));gk=gz.sel}else{ej(gz,gp,gi,dv)}}}var gv=gh;function gx(gK){if(bV(gv,gK)==0){return}gv=gK;if(gg=="rect"){var gH=[],gB=gj.options.tabSize;var gA=bA(fs(gz,gh.line).text,gh.ch,gB);var gL=bA(fs(gz,gK.line).text,gK.ch,gB);var gC=Math.min(gA,gL),gM=Math.max(gA,gL);for(var gO=Math.min(gh.line,gK.line),gF=Math.min(gj.lastLine(),Math.max(gh.line,gK.line));gO<=gF;gO++){var gN=fs(gz,gO).text,gE=gb(gN,gC,gB);if(gC==gM){gH.push(new d3(af(gO,gE),af(gO,gE)))}else{if(gN.length>gE){gH.push(new d3(af(gO,gE),af(gO,gb(gN,gM,gB))))}}}if(!gH.length){gH.push(new d3(gh,gh))}bj(gz,aR(gk.ranges.slice(0,gp).concat(gH),gp),{origin:"*mouse",scroll:false});gj.scrollIntoView(gK)}else{var gI=gi;var gD=gI.anchor,gJ=gK;if(gg!="single"){if(gg=="double"){var gG=gj.findWordAt(gK)}else{var gG=new d3(af(gK.line,0),fF(gz,af(gK.line+1,0)))}if(bV(gG.anchor,gD)>0){gJ=gG.head;gD=cQ(gI.from(),gG.anchor)}else{gJ=gG.anchor;gD=bG(gI.to(),gG.head)}}var gH=gk.ranges.slice(0);gH[gp]=new d3(fF(gz,gD),gJ);bj(gz,aR(gH,gp),dv)}}var gy=gt.wrapper.getBoundingClientRect();var gm=0;function gs(gB){var gA=++gm;var gD=b9(gj,gB,true,gg=="rect");if(!gD){return}if(bV(gD,gv)!=0){z(gj);gx(gD);var gC=ba(gt,gz);if(gD.line>=gC.to||gD.line<gC.from){setTimeout(c9(gj,function(){if(gm==gA){gs(gB)}}),150)}}else{var gE=gB.clientY<gy.top?-20:gB.clientY>gy.bottom?20:0;if(gE){setTimeout(c9(gj,function(){if(gm!=gA){return}gt.scroller.scrollTop+=gE;gs(gB)}),50)}}}function gq(gA){gm=Infinity;aF(gA);gt.input.focus();eg(document,"mousemove",gr);eg(document,"mouseup",gn);gz.history.lastSelOrigin=null}var gr=c9(gj,function(gA){if(!fK(gA)){gq(gA)}else{gs(gA)}});var gn=c9(gj,gq);bF(document,"mousemove",gr);bF(document,"mouseup",gn)}function ga(gp,gm,go,gr,gh){try{var gg=gm.clientX,gf=gm.clientY}catch(gm){return false}if(gg>=Math.floor(gp.display.gutters.getBoundingClientRect().right)){return false}if(gr){aF(gm)}var gn=gp.display;var gl=gn.lineDiv.getBoundingClientRect();if(gf>gl.bottom||!fq(gp,go)){return bq(gm)}gf-=gl.top-gn.viewOffset;for(var gj=0;gj<gp.options.gutters.length;++gj){var gk=gn.gutters.childNodes[gj];if(gk&&gk.getBoundingClientRect().right>=gg){var gq=bw(gp.doc,gf);var gi=gp.options.gutters[gj];gh(gp,go,gp,gq,gi,gm);return bq(gm)}}}function ee(gf,gg){return ga(gf,gg,"gutterClick",true,an)}var c8=0;function b0(gl){var gn=this;if(cu(gn,gl)||aX(gn.display,gl)){return}aF(gl);if(dS){c8=+new Date}var gm=b9(gn,gl,true),gf=gl.dataTransfer.files;if(!gm||c4(gn)){return}if(gf&&gf.length&&ge.FileReader&&ge.File){var gh=gf.length,go=Array(gh),gg=0;var gj=function(gq,gp){var gr=new FileReader;gr.onload=c9(gn,function(){go[gp]=gr.result;if(++gg==gh){gm=fF(gn.doc,gm);var gs={from:gm,to:gm,text:cm(go.join("\n")),origin:"paste"};b5(gn.doc,gs);e2(gn.doc,eM(gm,c1(gs)))}});gr.readAsText(gq)};for(var gk=0;gk<gh;++gk){gj(gf[gk],gk)}}else{if(gn.state.draggingText&&gn.doc.sel.contains(gm)>-1){gn.state.draggingText(gl);setTimeout(function(){gn.display.input.focus()},20);return}try{var go=gl.dataTransfer.getData("Text");if(go){if(gn.state.draggingText&&!(bL?gl.metaKey:gl.ctrlKey)){var gi=gn.listSelections()}gd(gn.doc,eM(gm,gm));if(gi){for(var gk=0;gk<gi.length;++gk){aT(gn.doc,"",gi[gk].anchor,gi[gk].head,"drag")}}gn.replaceSelection(go,"around","paste");gn.display.input.focus()}}catch(gl){}}}function du(gf,gh){if(dS&&(!gf.state.draggingText||+new Date-c8<100)){f9(gh);return}if(cu(gf,gh)||aX(gf.display,gh)){return}gh.dataTransfer.setData("Text",gf.getSelection());if(gh.dataTransfer.setDragImage&&!cI){var gg=fT("img",null,null,"position: fixed; left: 0; top: 0;");gg.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(x){gg.width=gg.height=1;gf.display.wrapper.appendChild(gg);gg._top=gg.offsetTop}gh.dataTransfer.setDragImage(gg,0,0);if(x){gg.parentNode.removeChild(gg)}}}function Y(gf,gg){if(Math.abs(gf.doc.scrollTop-gg)<2){return}gf.doc.scrollTop=gg;if(!ca){C(gf,{top:gg})}if(gf.display.scroller.scrollTop!=gg){gf.display.scroller.scrollTop=gg}gf.display.scrollbars.setScrollTop(gg);if(ca){C(gf)}n(gf,100)}function bl(gf,gh,gg){if(gg?gh==gf.doc.scrollLeft:Math.abs(gf.doc.scrollLeft-gh)<2){return}gh=Math.min(gh,gf.display.scroller.scrollWidth-gf.display.scroller.clientWidth);gf.doc.scrollLeft=gh;ev(gf);if(gf.display.scroller.scrollLeft!=gh){gf.display.scroller.scrollLeft=gh}gf.display.scrollbars.setScrollLeft(gh)}var fo=0,bW=null;if(dS){bW=-0.53}else{if(ca){bW=15}else{if(ah){bW=-0.7}else{if(cI){bW=-1/3}}}}var cS=function(gh){var gg=gh.wheelDeltaX,gf=gh.wheelDeltaY;if(gg==null&&gh.detail&&gh.axis==gh.HORIZONTAL_AXIS){gg=gh.detail}if(gf==null&&gh.detail&&gh.axis==gh.VERTICAL_AXIS){gf=gh.detail}else{if(gf==null){gf=gh.wheelDelta}}return{x:gg,y:gf}};P.wheelEventPixels=function(gf){var gg=cS(gf);gg.x*=bW;gg.y*=bW;return gg};function el(gm,gh){var go=cS(gh),gr=go.x,gp=go.y;var gj=gm.display,gq=gj.scroller;if(!(gr&&gq.scrollWidth>gq.clientWidth||gp&&gq.scrollHeight>gq.clientHeight)){return}if(gp&&bL&&aq){outer:for(var gn=gh.target,gl=gj.view;gn!=gq;gn=gn.parentNode){for(var gg=0;gg<gl.length;gg++){if(gl[gg].node==gn){gm.display.currentWheelTarget=gn;break outer}}}}if(gr&&!ca&&!x&&bW!=null){if(gp){Y(gm,Math.max(0,Math.min(gq.scrollTop+gp*bW,gq.scrollHeight-gq.clientHeight)))}bl(gm,Math.max(0,Math.min(gq.scrollLeft+gr*bW,gq.scrollWidth-gq.clientWidth)));aF(gh);gj.wheelStartX=null;return}if(gp&&bW!=null){var gf=gp*bW;var gk=gm.doc.scrollTop,gi=gk+gj.wrapper.clientHeight;if(gf<0){gk=Math.max(0,gk+gf-50)}else{gi=Math.min(gm.doc.height,gi+gf+50)}C(gm,{top:gk,bottom:gi})}if(fo<20){if(gj.wheelStartX==null){gj.wheelStartX=gq.scrollLeft;gj.wheelStartY=gq.scrollTop;gj.wheelDX=gr;gj.wheelDY=gp;setTimeout(function(){if(gj.wheelStartX==null){return}var gt=gq.scrollLeft-gj.wheelStartX;var gu=gq.scrollTop-gj.wheelStartY;var gs=(gu&&gj.wheelDY&&gu/gj.wheelDY)||(gt&&gj.wheelDX&&gt/gj.wheelDX);gj.wheelStartX=gj.wheelStartY=null;if(!gs){return}bW=(bW*fo+gs)/(fo+1);++fo},200)}else{gj.wheelDX+=gr;gj.wheelDY+=gp}}}function fM(gf,gi,gj){if(typeof gi=="string"){gi=fY[gi];if(!gi){return false}}gf.display.input.ensurePolled();var gh=gf.display.shift,gg=false;try{if(c4(gf)){gf.state.suppressEdits=true}if(gj){gf.display.shift=false}gg=gi(gf)!=bO}finally{gf.display.shift=gh;gf.state.suppressEdits=false}return gg}function t(gg,gh,gf){for(var gi=0;gi<gg.state.keyMaps.length;gi++){var gj=m(gh,gg.state.keyMaps[gi],gf,gg);if(gj){return gj}}return(gg.options.extraKeys&&m(gh,gg.options.extraKeys,gf,gg))||m(gh,gg.options.keyMap,gf,gg)}var H=new em;function a0(gg,gi,gk,gf){var gh=gg.state.keySeq;if(gh){if(eu(gi)){return"handled"}H.set(50,function(){if(gg.state.keySeq==gh){gg.state.keySeq=null;gg.display.input.reset()}});gi=gh+" "+gi}var gj=t(gg,gi,gf);if(gj=="multi"){gg.state.keySeq=gi}if(gj=="handled"){an(gg,"keyHandled",gg,gi,gk)}if(gj=="handled"||gj=="multi"){aF(gk);d9(gg)}if(gh&&!gj&&/\'$/.test(gi)){aF(gk);return true}return !!gj}function fa(gf,gh){var gg=fi(gh,true);if(!gg){return false}if(gh.shiftKey&&!gf.state.keySeq){return a0(gf,"Shift-"+gg,gh,function(gi){return fM(gf,gi,true)})||a0(gf,gg,gh,function(gi){if(typeof gi=="string"?/^go[A-Z]/.test(gi):gi.motion){return fM(gf,gi)}})}else{return a0(gf,gg,gh,function(gi){return fM(gf,gi)})}}function h(gf,gh,gg){return a0(gf,"'"+gg+"'",gh,function(gi){return fM(gf,gi,true)})}var W=null;function y(gi){var gf=this;z(gf);if(cu(gf,gi)){return}if(dS&&r<11&&gi.keyCode==27){gi.returnValue=false}var gg=gi.keyCode;gf.display.shift=gg==16||gi.shiftKey;var gh=fa(gf,gi);if(x){W=gh?gg:null;if(!gh&&gg==88&&!df&&(bL?gi.metaKey:gi.ctrlKey)){gf.replaceSelection("",null,"cut")}}if(gg==18&&!/\bCodeMirror-crosshair\b/.test(gf.display.lineDiv.className)){az(gf)}}function az(gg){var gh=gg.display.lineDiv;e3(gh,"CodeMirror-crosshair");function gf(gi){if(gi.keyCode==18||!gi.altKey){i(gh,"CodeMirror-crosshair");eg(document,"keyup",gf);eg(document,"mouseover",gf)}}bF(document,"keyup",gf);bF(document,"mouseover",gf)}function b3(gf){if(gf.keyCode==16){this.doc.sel.shift=false}cu(this,gf)}function aP(gi){var gf=this;if(aX(gf.display,gi)||cu(gf,gi)||gi.ctrlKey&&!gi.altKey||bL&&gi.metaKey){return}var gj=gi.keyCode,gg=gi.charCode;if(x&&gj==W){W=null;aF(gi);return}if((x&&(!gi.which||gi.which<10))&&fa(gf,gi)){return}var gh=String.fromCharCode(gg==null?gj:gg);if(h(gf,gi,gh)){return}gf.display.input.onKeyPress(gi)}function aL(gf){if(gf.options.readOnly=="nocursor"){return}if(!gf.state.focused){cH(gf,"focus",gf);gf.state.focused=true;e3(gf.display.wrapper,"CodeMirror-focused");if(!gf.curOp&&gf.display.selForContextMenu!=gf.doc.sel){gf.display.input.reset();if(aq){setTimeout(function(){gf.display.input.reset(true)},20)}}gf.display.input.receivedFocus()}d9(gf)}function cs(gf){if(gf.state.focused){cH(gf,"blur",gf);gf.state.focused=false;i(gf.display.wrapper,"CodeMirror-focused")}clearInterval(gf.display.blinker);setTimeout(function(){if(!gf.state.focused){gf.display.shift=false}},150)}function aD(gf,gg){if(aX(gf.display,gg)||ac(gf,gg)){return}gf.display.input.onContextMenu(gg)}function ac(gf,gg){if(!fq(gf,"gutterContextMenu")){return false}return ga(gf,gg,"gutterContextMenu",false,cH)}var c1=P.changeEnd=function(gf){if(!gf.text){return gf.to}return af(gf.from.line+gf.text.length-1,fA(gf.text).length+(gf.text.length==1?gf.from.ch:0))};function bf(gi,gh){if(bV(gi,gh.from)<0){return gi}if(bV(gi,gh.to)<=0){return c1(gh)}var gf=gi.line+gh.text.length-(gh.to.line-gh.from.line)-1,gg=gi.ch;if(gi.line==gh.to.line){gg+=c1(gh).ch-gh.to.ch}return af(gf,gg)}function e9(gj,gi){var gg=[];for(var gh=0;gh<gj.sel.ranges.length;gh++){var gf=gj.sel.ranges[gh];gg.push(new d3(bf(gf.anchor,gi),bf(gf.head,gi)))}return aR(gg,gj.sel.primIndex)}function bK(gh,gg,gf){if(gh.line==gg.line){return af(gf.line,gh.ch-gg.ch+gf.ch)}else{return af(gf.line+(gh.line-gg.line),gh.ch)}}function ap(go,gl,gg){var gf=[];var gh=af(go.first,0),gp=gh;for(var gj=0;gj<gl.length;gj++){var gq=gl[gj];var gn=bK(gq.from,gh,gp);var gm=bK(c1(gq),gh,gp);gh=gq.to;gp=gm;if(gg=="around"){var gk=go.sel.ranges[gj],gi=bV(gk.head,gk.anchor)<0;gf[gj]=new d3(gi?gm:gn,gi?gn:gm)}else{gf[gj]=new d3(gn,gn)}}return new fU(gf,go.sel.primIndex)}function dY(gi,gh,gg){var gf={canceled:false,from:gh.from,to:gh.to,text:gh.text,origin:gh.origin,cancel:function(){this.canceled=true}};if(gg){gf.update=function(gm,gl,gk,gj){if(gm){this.from=fF(gi,gm)}if(gl){this.to=fF(gi,gl)}if(gk){this.text=gk}if(gj!==undefined){this.origin=gj}}}cH(gi,"beforeChange",gi,gf);if(gi.cm){cH(gi.cm,"beforeChange",gi.cm,gf)}if(gf.canceled){return null}return{from:gf.from,to:gf.to,text:gf.text,origin:gf.origin}}function b5(gj,gi,gf){if(gj.cm){if(!gj.cm.curOp){return c9(gj.cm,b5)(gj,gi,gf)}if(gj.cm.state.suppressEdits){return}}if(fq(gj,"beforeChange")||gj.cm&&fq(gj.cm,"beforeChange")){gi=dY(gj,gi,true);if(!gi){return}}var gh=f4&&!gf&&cL(gj,gi.from,gi.to);if(gh){for(var gg=gh.length-1;gg>=0;--gg){dA(gj,{from:gh[gg].from,to:gh[gg].to,text:gg?[""]:gi.text})}}else{dA(gj,gi)}}function dA(gi,gh){if(gh.text.length==1&&gh.text[0]==""&&bV(gh.from,gh.to)==0){return}var gg=e9(gi,gh);eR(gi,gh,gg,gi.cm?gi.cm.curOp.id:NaN);eh(gi,gh,gg,f(gi,gh));var gf=[];ec(gi,function(gk,gj){if(!gj&&dq(gf,gk.history)==-1){K(gk.history,gh);gf.push(gk.history)}eh(gk,gh,null,f(gk,gh))})}function bN(gq,go,gr){if(gq.cm&&gq.cm.state.suppressEdits){return}var gm=gq.history,gg,gh=gq.sel;var gn=go=="undo"?gm.done:gm.undone,gp=go=="undo"?gm.undone:gm.done;for(var gj=0;gj<gn.length;gj++){gg=gn[gj];if(gr?gg.ranges&&!gg.equals(gq.sel):!gg.ranges){break}}if(gj==gn.length){return}gm.lastOrigin=gm.lastSelOrigin=null;for(;;){gg=gn.pop();if(gg.ranges){aw(gg,gp);if(gr&&!gg.equals(gq.sel)){bj(gq,gg,{clearRedo:false});return}gh=gg}else{break}}var gi=[];aw(gh,gp);gp.push({changes:gi,generation:gm.generation});gm.generation=gg.generation||++gm.maxGeneration;var gl=fq(gq,"beforeChange")||gq.cm&&fq(gq.cm,"beforeChange");for(var gj=gg.changes.length-1;gj>=0;--gj){var gs=gg.changes[gj];gs.origin=go;if(gl&&!dY(gq,gs,false)){gn.length=0;return}gi.push(dz(gq,gs));var gf=gj?e9(gq,gs):fA(gn);eh(gq,gs,gf,s(gq,gs));if(!gj&&gq.cm){gq.cm.scrollIntoView({from:gs.from,to:c1(gs)})}var gk=[];ec(gq,function(gu,gt){if(!gt&&dq(gk,gu.history)==-1){K(gu.history,gs);gk.push(gu.history)}eh(gu,gs,null,s(gu,gs))})}}function fn(gg,gi){if(gi==0){return}gg.first+=gi;gg.sel=new fU(bz(gg.sel.ranges,function(gj){return new d3(af(gj.anchor.line+gi,gj.anchor.ch),af(gj.head.line+gi,gj.head.ch))}),gg.sel.primIndex);if(gg.cm){c7(gg.cm,gg.first,gg.first-gi,gi);for(var gh=gg.cm.display,gf=gh.viewFrom;gf<gh.viewTo;gf++){Z(gg.cm,gf,"gutter")}}}function eh(gk,gj,gi,gg){if(gk.cm&&!gk.cm.curOp){return c9(gk.cm,eh)(gk,gj,gi,gg)}if(gj.to.line<gk.first){fn(gk,gj.text.length-1-(gj.to.line-gj.from.line));return}if(gj.from.line>gk.lastLine()){return}if(gj.from.line<gk.first){var gf=gj.text.length-1-(gk.first-gj.from.line);fn(gk,gf);gj={from:af(gk.first,0),to:af(gj.to.line+gf,gj.to.ch),text:[fA(gj.text)],origin:gj.origin}}var gh=gk.lastLine();if(gj.to.line>gh){gj={from:gj.from,to:af(gh,fs(gk,gh).text.length),text:[gj.text[0]],origin:gj.origin}}gj.removed=fW(gk,gj.from,gj.to);if(!gi){gi=e9(gk,gj)}if(gk.cm){cD(gk.cm,gj,gg)}else{fb(gk,gj,gg)}gd(gk,gi,dh)}function cD(gm,gr,gk){var gn=gm.doc,gl=gm.display,gp=gr.from,go=gr.to;var gj=false,gg=gp.line;if(!gm.options.lineWrapping){gg=bp(dU(fs(gn,gp.line)));gn.iter(gg,go.line+1,function(gs){if(gs==gl.maxLine){gj=true;return true}})}if(gn.sel.contains(gr.from,gr.to)>-1){dl(gm)}fb(gn,gr,gk,aZ(gm));if(!gm.options.lineWrapping){gn.iter(gg,gp.line+gr.text.length,function(gt){var gs=c(gt);if(gs>gl.maxLineLength){gl.maxLine=gt;gl.maxLineLength=gs;gl.maxLineChanged=true;gj=false}});if(gj){gm.curOp.updateMaxLine=true}}gn.frontier=Math.min(gn.frontier,gp.line);n(gm,400);var gq=gr.text.length-(go.line-gp.line)-1;if(gr.full){c7(gm)}else{if(gp.line==go.line&&gr.text.length==1&&!E(gm.doc,gr)){Z(gm,gp.line,"text")}else{c7(gm,gp.line,go.line+1,gq)}}var gi=fq(gm,"changes"),gf=fq(gm,"change");if(gf||gi){var gh={from:gp,to:go,text:gr.text,removed:gr.removed,origin:gr.origin};if(gf){an(gm,"change",gm,gh)}if(gi){(gm.curOp.changeObjs||(gm.curOp.changeObjs=[])).push(gh)}}gm.display.selForContextMenu=null}function aT(gi,gh,gk,gj,gg){if(!gj){gj=gk}if(bV(gj,gk)<0){var gf=gj;gj=gk;gk=gf}if(typeof gh=="string"){gh=cm(gh)}b5(gi,{from:gk,to:gj,text:gh,origin:gg})}function w(gh,gg){if(cu(gh,"scrollCursorIntoView")){return}var gk=gh.display,gi=gk.sizer.getBoundingClientRect(),gf=null;if(gg.top+gi.top<0){gf=true}else{if(gg.bottom+gi.top>(ge.innerHeight||document.documentElement.clientHeight)){gf=false}}if(gf!=null&&!fg){var gj=fT("div","\u200b",null,"position: absolute; top: "+(gg.top-gk.viewOffset-e1(gh.display))+"px; height: "+(gg.bottom-gg.top+cX(gh)+gk.barHeight)+"px; left: "+gg.left+"px; width: 2px;");gh.display.lineSpace.appendChild(gj);gj.scrollIntoView(gf);gh.display.lineSpace.removeChild(gj)}}function M(go,gn,gi,gj){if(gj==null){gj=0}for(var gh=0;gh<5;gh++){var gk=false,gp=d0(go,gn);var gf=!gi||gi==gn?gp:d0(go,gi);var gg=dE(go,Math.min(gp.left,gf.left),Math.min(gp.top,gf.top)-gj,Math.max(gp.left,gf.left),Math.max(gp.bottom,gf.bottom)+gj);var gm=go.doc.scrollTop,gl=go.doc.scrollLeft;if(gg.scrollTop!=null){Y(go,gg.scrollTop);if(Math.abs(go.doc.scrollTop-gm)>1){gk=true}}if(gg.scrollLeft!=null){bl(go,gg.scrollLeft);if(Math.abs(go.doc.scrollLeft-gl)>1){gk=true}}if(!gk){break}}return gp}function N(gf,gh,gj,gg,gi){var gk=dE(gf,gh,gj,gg,gi);if(gk.scrollTop!=null){Y(gf,gk.scrollTop)}if(gk.scrollLeft!=null){bl(gf,gk.scrollLeft)}}function dE(gu,gj,gt,gi,gr){var go=gu.display,gm=aS(gu.display);if(gt<0){gt=0}var gk=gu.curOp&&gu.curOp.scrollTop!=null?gu.curOp.scrollTop:go.scroller.scrollTop;var gs=at(gu),gq={};if(gr-gt>gs){gr=gt+gs}var gn=gu.doc.height+bv(go);var gh=gt<gm,gg=gr>gn-gm;if(gt<gk){gq.scrollTop=gh?0:gt}else{if(gr>gk+gs){var gf=Math.min(gt,(gg?gn:gr)-gs);if(gf!=gk){gq.scrollTop=gf}}}var gp=gu.curOp&&gu.curOp.scrollLeft!=null?gu.curOp.scrollLeft:go.scroller.scrollLeft;var gv=dt(gu)-(gu.options.fixedGutter?go.gutters.offsetWidth:0);var gl=gi-gj>gv;if(gl){gi=gj+gv}if(gj<10){gq.scrollLeft=0}else{if(gj<gp){gq.scrollLeft=Math.max(0,gj-(gl?0:10))}else{if(gi>gv+gp-3){gq.scrollLeft=gi+(gl?0:10)-gv}}}return gq}function cO(gf,gh,gg){if(gh!=null||gg!=null){e0(gf)}if(gh!=null){gf.curOp.scrollLeft=(gf.curOp.scrollLeft==null?gf.doc.scrollLeft:gf.curOp.scrollLeft)+gh}if(gg!=null){gf.curOp.scrollTop=(gf.curOp.scrollTop==null?gf.doc.scrollTop:gf.curOp.scrollTop)+gg}}function fz(gf){e0(gf);var gg=gf.getCursor(),gi=gg,gh=gg;if(!gf.options.lineWrapping){gi=gg.ch?af(gg.line,gg.ch-1):gg;gh=af(gg.line,gg.ch+1)}gf.curOp.scrollToPos={from:gi,to:gh,margin:gf.options.cursorScrollMargin,isCursor:true}}function e0(gf){var gh=gf.curOp.scrollToPos;if(gh){gf.curOp.scrollToPos=null;var gj=dM(gf,gh.from),gi=dM(gf,gh.to);var gg=dE(gf,Math.min(gj.left,gi.left),Math.min(gj.top,gi.top)-gh.margin,Math.max(gj.right,gi.right),Math.max(gj.bottom,gi.bottom)+gh.margin);gf.scrollTo(gg.scrollLeft,gg.scrollTop)}}function am(gq,gi,gr,gg){var gs=gq.doc,gf;if(gr==null){gr="add"}if(gr=="smart"){if(!gs.mode.indent){gr="prev"}else{gf=dJ(gq,gi)}}var gh=gq.options.tabSize;var gt=fs(gs,gi),gl=bA(gt.text,null,gh);if(gt.stateAfter){gt.stateAfter=null}var gm=gt.text.match(/^\s*/)[0],go;if(!gg&&!/\S/.test(gt.text)){go=0;gr="not"}else{if(gr=="smart"){go=gs.mode.indent(gf,gt.text.slice(gm.length),gt.text);if(go==bO||go>150){if(!gg){return}gr="prev"}}}if(gr=="prev"){if(gi>gs.first){go=bA(fs(gs,gi-1).text,null,gh)}else{go=0}}else{if(gr=="add"){go=gl+gq.options.indentUnit}else{if(gr=="subtract"){go=gl-gq.options.indentUnit}else{if(typeof gr=="number"){go=gl+gr}}}}go=Math.max(0,go);var gp="",gn=0;if(gq.options.indentWithTabs){for(var gj=Math.floor(go/gh);gj;--gj){gn+=gh;gp+="\t"}}if(gn<go){gp+=cc(go-gn)}if(gp!=gm){aT(gs,gp,af(gi,0),af(gi,gm.length),"+input")}else{for(var gj=0;gj<gs.sel.ranges.length;gj++){var gk=gs.sel.ranges[gj];if(gk.head.line==gi&&gk.head.ch<gm.length){var gn=af(gi,gm.length);ej(gs,gj,new d3(gn,gn));break}}}gt.stateAfter=null}function f1(gi,gf,gh,gk){var gj=gf,gg=gf;if(typeof gf=="number"){gg=fs(gi,dd(gi,gf))}else{gj=bp(gf)}if(gj==null){return null}if(gk(gg,gj)&&gi.cm){Z(gi.cm,gj,gh)}return gg}function fG(gg,gl){var gk=gg.doc.sel.ranges,gj=[];for(var gi=0;gi<gk.length;gi++){var gh=gl(gk[gi]);while(gj.length&&bV(gh.from,fA(gj).to)<=0){var gf=gj.pop();if(bV(gf.from,gh.from)<0){gh.from=gf.from;break}}gj.push(gh)}cR(gg,function(){for(var gm=gj.length-1;gm>=0;gm--){aT(gg.doc,"",gj[gm].from,gj[gm].to,"+delete")}fz(gg)})}function bI(gx,gj,gr,gq,gl){var gn=gj.line,go=gj.ch,gs=gr;var gg=fs(gx,gn);var gw=true;function gv(){var gy=gn+gr;if(gy<gx.first||gy>=gx.first+gx.size){return(gw=false)}gn=gy;return gg=fs(gx,gy)}function gt(gy){var gz=(gl?D:c5)(gg,go,gr,true);if(gz==null){if(!gy&&gv()){if(gl){go=(gr<0?av:cz)(gg)}else{go=gr<0?gg.text.length:0}}else{return(gw=false)}}else{go=gz}return true}if(gq=="char"){gt()}else{if(gq=="column"){gt(true)}else{if(gq=="word"||gq=="group"){var gu=null,gm=gq=="group";var gp=gx.cm&&gx.cm.getHelper(gj,"wordChars");for(var gk=true;;gk=false){if(gr<0&&!gt(!gk)){break}var gh=gg.text.charAt(go)||"\n";var gi=aM(gh,gp)?"w":gm&&gh=="\n"?"n":!gm||/\s/.test(gh)?null:"p";if(gm&&!gk&&!gi){gi="s"}if(gu&&gu!=gi){if(gr<0){gr=1;gt()}break}if(gi){gu=gi}if(gr>0&&!gt(!gk)){break}}}}}var gf=bi(gx,af(gn,go),gs,true);if(!gw){gf.hitSide=true}return gf}function bQ(gl,gj,gg,gm){var gn=gl.doc,gk=gj.left,gi;if(gm=="page"){var gh=Math.min(gl.display.wrapper.clientHeight,ge.innerHeight||document.documentElement.clientHeight);gi=gj.top+gg*(gh-(gg<0?1.5:0.5)*aS(gl.display))}else{if(gm=="line"){gi=gg>0?gj.bottom+3:gj.top-3}}for(;;){var gf=fL(gl,gk,gi);if(!gf.outside){break}if(gg<0?gi<=0:gi>=gn.height){gf.hitSide=true;break}gi+=gg*5}return gf}P.prototype={constructor:P,focus:function(){ge.focus();this.display.input.focus()},setOption:function(gg,gi){var gh=this.options,gf=gh[gg];if(gh[gg]==gi&&gg!="mode"){return}gh[gg]=gi;if(a1.hasOwnProperty(gg)){c9(this,a1[gg])(this,gi,gf)}},getOption:function(gf){return this.options[gf]},getDoc:function(){return this.doc},addKeyMap:function(gg,gf){this.state.keyMaps[gf?"push":"unshift"](fR(gg))},removeKeyMap:function(gg){var gh=this.state.keyMaps;for(var gf=0;gf<gh.length;++gf){if(gh[gf]==gg||gh[gf].name==gg){gh.splice(gf,1);return true}}},addOverlay:ai(function(gf,gg){var gh=gf.token?gf:P.getMode(this.options,gf);if(gh.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:gh,modeSpec:gf,opaque:gg&&gg.opaque});this.state.modeGen++;c7(this)}),removeOverlay:ai(function(gf){var gh=this.state.overlays;for(var gg=0;gg<gh.length;++gg){var gi=gh[gg].modeSpec;if(gi==gf||typeof gf=="string"&&gi.name==gf){gh.splice(gg,1);this.state.modeGen++;c7(this);return}}}),indentLine:ai(function(gh,gf,gg){if(typeof gf!="string"&&typeof gf!="number"){if(gf==null){gf=this.options.smartIndent?"smart":"prev"}else{gf=gf?"add":"subtract"}}if(a7(this.doc,gh)){am(this,gh,gf,gg)}}),indentSelection:ai(function(gm){var gl=this.doc.sel.ranges,gg=-1;for(var gi=0;gi<gl.length;gi++){var gj=gl[gi];if(!gj.empty()){var go=gj.from(),gn=gj.to();var gf=Math.max(gg,go.line);gg=Math.min(this.lastLine(),gn.line-(gn.ch?0:1))+1;for(var gh=gf;gh<gg;++gh){am(this,gh,gm)}var gk=this.doc.sel.ranges;if(go.ch==0&&gl.length==gk.length&&gk[gi].from().ch>0){ej(this.doc,gi,new d3(go,gk[gi].to()),dh)}}else{if(gj.head.line>gg){am(this,gj.head.line,gm,true);gg=gj.head.line;if(gi==this.doc.sel.primIndex){fz(this)}}}}}),getTokenAt:function(gg,gf){return ce(this,gg,gf)},getLineTokens:function(gf,gg){return ce(this,af(gf),gg,true)},getTokenTypeAt:function(gm){gm=fF(this.doc,gm);var gg=aj(this,fs(this.doc,gm.line));var gf=0,gl=(gg.length-1)/2,gj=gm.ch;var gi;if(gj==0){gi=gg[2]}else{for(;;){var gh=(gf+gl)>>1;if((gh?gg[gh*2-1]:0)>=gj){gl=gh}else{if(gg[gh*2+1]<gj){gf=gh+1}else{gi=gg[gh*2+2];break}}}}var gk=gi?gi.indexOf("cm-overlay "):-1;return gk<0?gi:gk==0?null:gi.slice(0,gk-1)},getModeAt:function(gg){var gf=this.doc.mode;if(!gf.innerMode){return gf}return P.innerMode(gf,this.getTokenAt(gg).state).mode},getHelper:function(gg,gf){return this.getHelpers(gg,gf)[0]},getHelpers:function(gm,gh){var gi=[];if(!fd.hasOwnProperty(gh)){return fd}var gf=fd[gh],gl=this.getModeAt(gm);if(typeof gl[gh]=="string"){if(gf[gl[gh]]){gi.push(gf[gl[gh]])}}else{if(gl[gh]){for(var gg=0;gg<gl[gh].length;gg++){var gk=gf[gl[gh][gg]];if(gk){gi.push(gk)}}}else{if(gl.helperType&&gf[gl.helperType]){gi.push(gf[gl.helperType])}else{if(gf[gl.name]){gi.push(gf[gl.name])}}}}for(var gg=0;gg<gf._global.length;gg++){var gj=gf._global[gg];if(gj.pred(gl,this)&&dq(gi,gj.val)==-1){gi.push(gj.val)}}return gi},getStateAfter:function(gf,gg){var gh=this.doc;gf=dd(gh,gf==null?gh.first+gh.size-1:gf);return dJ(this,gf+1,gg)},cursorCoords:function(gi,gg){var gh,gf=this.doc.sel.primary();if(gi==null){gh=gf.head}else{if(typeof gi=="object"){gh=fF(this.doc,gi)}else{gh=gi?gf.from():gf.to()}}return d0(this,gh,gg||"page")},charCoords:function(gg,gf){return cN(this,fF(this.doc,gg),gf||"page")},coordsChar:function(gf,gg){gf=ep(this,gf,gg||"page");return fL(this,gf.left,gf.top)},lineAtHeight:function(gf,gg){gf=ep(this,{top:gf,left:0},gg||"page").top;return bw(this.doc,gf+this.display.viewOffset)},heightAtLine:function(gg,gj){var gf=false,gi=this.doc.first+this.doc.size-1;if(gg<this.doc.first){gg=this.doc.first}else{if(gg>gi){gg=gi;gf=true}}var gh=fs(this.doc,gg);return fN(this,gh,{top:0,left:0},gj||"page").top+(gf?this.doc.height-bs(gh):0)},defaultTextHeight:function(){return aS(this.display)},defaultCharWidth:function(){return dK(this.display)},setGutterMarker:ai(function(gf,gg,gh){return f1(this.doc,gf,"gutter",function(gi){var gj=gi.gutterMarkers||(gi.gutterMarkers={});gj[gg]=gh;if(!gh&&eQ(gj)){gi.gutterMarkers=null}return true})}),clearGutter:ai(function(gg){var gf=this,gi=gf.doc,gh=gi.first;gi.iter(function(gj){if(gj.gutterMarkers&&gj.gutterMarkers[gg]){gj.gutterMarkers[gg]=null;Z(gf,gh,"gutter");if(eQ(gj.gutterMarkers)){gj.gutterMarkers=null}}++gh})}),addLineWidget:ai(function(gf,gh,gg){return bx(this,gf,gh,gg)}),removeLineWidget:function(gf){gf.clear()},lineInfo:function(gf){if(typeof gf=="number"){if(!a7(this.doc,gf)){return null}var gg=gf;gf=fs(this.doc,gf);if(!gf){return null}}else{var gg=bp(gf);if(gg==null){return null}}return{line:gg,handle:gf,text:gf.text,gutterMarkers:gf.gutterMarkers,textClass:gf.textClass,bgClass:gf.bgClass,wrapClass:gf.wrapClass,widgets:gf.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gl,gf,gn,gh,go){var gj=this.display;gl=d0(this,fF(this.doc,gl));var gk=gl.bottom,gg=gl.left;gf.style.position="absolute";gf.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gf);gj.sizer.appendChild(gf);if(gh=="over"){gk=gl.top}else{if(gh=="above"||gh=="near"){var gi=Math.max(gj.wrapper.clientHeight,this.doc.height),gm=Math.max(gj.sizer.clientWidth,gj.lineSpace.clientWidth);if((gh=="above"||gl.bottom+gf.offsetHeight>gi)&&gl.top>gf.offsetHeight){gk=gl.top-gf.offsetHeight}else{if(gl.bottom+gf.offsetHeight<=gi){gk=gl.bottom}}if(gg+gf.offsetWidth>gm){gg=gm-gf.offsetWidth}}}gf.style.top=gk+"px";gf.style.left=gf.style.right="";if(go=="right"){gg=gj.sizer.clientWidth-gf.offsetWidth;gf.style.right="0px"}else{if(go=="left"){gg=0}else{if(go=="middle"){gg=(gj.sizer.clientWidth-gf.offsetWidth)/2}}gf.style.left=gg+"px"}if(gn){N(this,gg,gk,gg+gf.offsetWidth,gk+gf.offsetHeight)}},triggerOnKeyDown:ai(y),triggerOnKeyPress:ai(aP),triggerOnKeyUp:b3,execCommand:function(gf){if(fY.hasOwnProperty(gf)){return fY[gf](this)}},findPosH:function(gl,gh,gj,gg){var gf=1;if(gh<0){gf=-1;gh=-gh}for(var gi=0,gk=fF(this.doc,gl);gi<gh;++gi){gk=bI(this.doc,gk,gf,gj,gg);if(gk.hitSide){break}}return gk},moveH:ai(function(gg,gh){var gf=this;gf.extendSelectionsBy(function(gi){if(gf.display.shift||gf.doc.extend||gi.empty()){return bI(gf.doc,gi.head,gg,gh,gf.options.rtlMoveVisually)}else{return gg<0?gi.from():gi.to()}},c0)}),deleteH:ai(function(gf,gg){var gh=this.doc.sel,gi=this.doc;if(gh.somethingSelected()){gi.replaceSelection("",null,"+delete")}else{fG(this,function(gk){var gj=bI(gi,gk.head,gf,gg,false);return gf<0?{from:gj,to:gk.head}:{from:gk.head,to:gj}})}}),findPosV:function(gl,gg,gk,gj){var gf=1,gi=gj;if(gg<0){gf=-1;gg=-gg}for(var gh=0,gm=fF(this.doc,gl);gh<gg;++gh){var gn=d0(this,gm,"div");if(gi==null){gi=gn.left}else{gn.left=gi}gm=bQ(this,gn,gf,gk);if(gm.hitSide){break}}return gm},moveV:ai(function(gg,gi){var gf=this,gk=this.doc,gj=[];var gl=!gf.display.shift&&!gk.extend&&gk.sel.somethingSelected();gk.extendSelectionsBy(function(gm){if(gl){return gg<0?gm.from():gm.to()}var go=d0(gf,gm.head,"div");if(gm.goalColumn!=null){go.left=gm.goalColumn}gj.push(go.left);var gn=bQ(gf,go,gg,gi);if(gi=="page"&&gm==gk.sel.primary()){cO(gf,null,cN(gf,gn,"div").top-go.top)}return gn},c0);if(gj.length){for(var gh=0;gh<gk.sel.ranges.length;gh++){gk.sel.ranges[gh].goalColumn=gj[gh]}}}),findWordAt:function(gm){var gk=this.doc,gi=fs(gk,gm.line).text;var gl=gm.ch,gh=gm.ch;if(gi){var gg=this.getHelper(gm,"wordChars");if((gm.xRel<0||gh==gi.length)&&gl){--gl}else{++gh}var gj=gi.charAt(gl);var gf=aM(gj,gg)?function(gn){return aM(gn,gg)}:/\s/.test(gj)?function(gn){return/\s/.test(gn)}:function(gn){return !/\s/.test(gn)&&!aM(gn)};while(gl>0&&gf(gi.charAt(gl-1))){--gl}while(gh<gi.length&&gf(gi.charAt(gh))){++gh}}return new d3(af(gm.line,gl),af(gm.line,gh))},toggleOverwrite:function(gf){if(gf!=null&&gf==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){e3(this.display.cursorDiv,"CodeMirror-overwrite")}else{i(this.display.cursorDiv,"CodeMirror-overwrite")}cH(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dV()},scrollTo:ai(function(gf,gg){if(gf!=null||gg!=null){e0(this)}if(gf!=null){this.curOp.scrollLeft=gf}if(gg!=null){this.curOp.scrollTop=gg}}),getScrollInfo:function(){var gf=this.display.scroller;return{left:gf.scrollLeft,top:gf.scrollTop,height:gf.scrollHeight-cX(this)-this.display.barHeight,width:gf.scrollWidth-cX(this)-this.display.barWidth,clientHeight:at(this),clientWidth:dt(this)}},scrollIntoView:ai(function(gh,gf){if(gh==null){gh={from:this.doc.sel.primary().head,to:null};if(gf==null){gf=this.options.cursorScrollMargin}}else{if(typeof gh=="number"){gh={from:af(gh,0),to:null}}else{if(gh.from==null){gh={from:gh,to:null}}}}if(!gh.to){gh.to=gh.from}gh.margin=gf||0;if(gh.from.line!=null){e0(this);this.curOp.scrollToPos=gh}else{var gg=dE(this,Math.min(gh.from.left,gh.to.left),Math.min(gh.from.top,gh.to.top)-gh.margin,Math.max(gh.from.right,gh.to.right),Math.max(gh.from.bottom,gh.to.bottom)+gh.margin);this.scrollTo(gg.scrollLeft,gg.scrollTop)}}),setSize:ai(function(gh,gi){var gf=this;function gg(gk){return typeof gk=="number"||/^\d+$/.test(String(gk))?gk+"px":gk}if(gh!=null){gf.display.wrapper.style.width=gg(gh)}if(gi!=null){gf.display.wrapper.style.height=gg(gi)}if(gf.options.lineWrapping){cy(this)}var gj=gf.display.viewFrom;gf.doc.iter(gj,gf.display.viewTo,function(gk){if(gk.widgets){for(var gl=0;gl<gk.widgets.length;gl++){if(gk.widgets[gl].noHScroll){Z(gf,gj,"widget");break}}}++gj});gf.curOp.forceUpdate=true;cH(gf,"refresh",this)}),operation:function(gf){return cR(this,gf)},refresh:ai(function(){var gf=this.display.cachedTextHeight;c7(this);this.curOp.forceUpdate=true;c2(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);db(this);if(gf==null||Math.abs(gf-aS(this.display))>0.5){ag(this)}cH(this,"refresh",this)}),swapDoc:ai(function(gg){var gf=this.doc;gf.cm=null;q(this,gg);c2(this);this.display.input.reset();this.scrollTo(gg.scrollLeft,gg.scrollTop);this.curOp.forceScroll=true;an(this,"swapDoc",this,gf);return gf}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bg(P);var eW=P.defaults={};var a1=P.optionHandlers={};function d4(gg,gi,gf,gh){P.defaults[gg]=gi;if(gf){a1[gg]=gh?function(gj,gl,gk){if(gk!=bP){gf(gj,gl,gk)}}:gf}}var bP=P.Init={toString:function(){return"CodeMirror.Init"}};d4("value","",function(gf,gg){gf.setValue(gg)},true);d4("mode",null,function(gf,gg){gf.doc.modeOption=gg;a5(gf)},true);d4("indentUnit",2,a5,true);d4("indentWithTabs",false);d4("smartIndent",true);d4("tabSize",4,function(gf){d(gf);c2(gf);c7(gf)},true);d4("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gf,gg){gf.options.specialChars=new RegExp(gg.source+(gg.test("\t")?"":"|\t"),"g");gf.refresh()},true);d4("specialCharPlaceholder",e5,function(gf){gf.refresh()},true);d4("electricChars",true);d4("inputStyle",k?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);d4("rtlMoveVisually",!aK);d4("wholeLineUpdateBefore",true);d4("theme","default",function(gf){cT(gf);dB(gf)},true);d4("keyMap","default",function(gf,gj,gg){var gh=fR(gj);var gi=gg!=P.Init&&fR(gg);if(gi&&gi.detach){gi.detach(gf,gh)}if(gh.attach){gh.attach(gf,gi||null)}});d4("extraKeys",null);d4("lineWrapping",false,ez,true);d4("gutters",[],function(gf){bU(gf.options);dB(gf)},true);d4("fixedGutter",true,function(gf,gg){gf.display.gutters.style.left=gg?d5(gf.display)+"px":"0";gf.refresh()},true);d4("coverGutterNextToScrollbar",false,function(gf){fE(gf)},true);d4("scrollbarStyle","native",function(gf){aG(gf);fE(gf);gf.display.scrollbars.setScrollTop(gf.doc.scrollTop);gf.display.scrollbars.setScrollLeft(gf.doc.scrollLeft)},true);d4("lineNumbers",false,function(gf){bU(gf.options);dB(gf)},true);d4("firstLineNumber",1,dB,true);d4("lineNumberFormatter",function(gf){return gf},dB,true);d4("showCursorWhenSelecting",false,bB,true);d4("resetSelectionOnContextMenu",true);d4("readOnly",false,function(gf,gg){if(gg=="nocursor"){cs(gf);gf.display.input.blur();gf.display.disabled=true}else{gf.display.disabled=false;if(!gg){gf.display.input.reset()}}});d4("disableInput",false,function(gf,gg){if(!gg){gf.display.input.reset()}},true);d4("dragDrop",true);d4("cursorBlinkRate",530);d4("cursorScrollMargin",0);d4("cursorHeight",1,bB,true);d4("singleCursorHeightPerLine",true,bB,true);d4("workTime",100);d4("workDelay",100);d4("flattenSpans",true,d,true);d4("addModeClass",false,d,true);d4("pollInterval",100);d4("undoDepth",200,function(gf,gg){gf.doc.history.undoDepth=gg});d4("historyEventDelay",1250);d4("viewportMargin",10,function(gf){gf.refresh()},true);d4("maxHighlightLength",10000,d,true);d4("moveInputWithCursor",true,function(gf,gg){if(!gg){gf.display.input.resetPosition()}});d4("tabindex",null,function(gf,gg){gf.display.input.getField().tabIndex=gg||""});d4("autofocus",null);var dy=P.modes={},cv=P.mimeModes={};P.defineMode=function(gf,gg){if(!P.defaults.mode&&gf!="null"){P.defaults.mode=gf}if(arguments.length>2){gg.dependencies=Array.prototype.slice.call(arguments,2)}dy[gf]=gg};P.defineMIME=function(gg,gf){cv[gg]=gf};P.resolveMode=function(gf){if(typeof gf=="string"&&cv.hasOwnProperty(gf)){gf=cv[gf]}else{if(gf&&typeof gf.name=="string"&&cv.hasOwnProperty(gf.name)){var gg=cv[gf.name];if(typeof gg=="string"){gg={name:gg}}gf=b7(gg,gf);gf.name=gg.name}else{if(typeof gf=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gf)){return P.resolveMode("application/xml")}}}if(typeof gf=="string"){return{name:gf}}else{return gf||{name:"null"}}};P.getMode=function(gi,gf){var gf=P.resolveMode(gf);var gg=dy[gf.name];if(!gg){return P.getMode(gi,"text/plain")}var gj=gg(gi,gf);if(dx.hasOwnProperty(gf.name)){var gh=dx[gf.name];for(var gk in gh){if(!gh.hasOwnProperty(gk)){continue}if(gj.hasOwnProperty(gk)){gj["_"+gk]=gj[gk]}gj[gk]=gh[gk]}}gj.name=gf.name;if(gf.helperType){gj.helperType=gf.helperType}if(gf.modeProps){for(var gk in gf.modeProps){gj[gk]=gf.modeProps[gk]}}return gj};P.defineMode("null",function(){return{token:function(gf){gf.skipToEnd()}}});P.defineMIME("text/plain","null");var dx=P.modeExtensions={};P.extendMode=function(gh,gf){var gg=dx.hasOwnProperty(gh)?dx[gh]:(dx[gh]={});aI(gf,gg)};P.defineExtension=function(gf,gg){P.prototype[gf]=gg};P.defineDocExtension=function(gf,gg){ay.prototype[gf]=gg};P.defineOption=d4;var cd=[];P.defineInitHook=function(gf){cd.push(gf)};var fd=P.helpers={};P.registerHelper=function(gg,gf,gh){if(!fd.hasOwnProperty(gg)){fd[gg]=P[gg]={_global:[]}}fd[gg][gf]=gh};P.registerGlobalHelper=function(gg,gf,gi,gh){P.registerHelper(gg,gf,gh);fd[gg]._global.push({pred:gi,val:gh})};var bJ=P.copyState=function(gi,gf){if(gf===true){return gf}if(gi.copyState){return gi.copyState(gf)}var gh={};for(var gj in gf){var gg=gf[gj];if(gg instanceof Array){gg=gg.concat([])}gh[gj]=gg}return gh};var be=P.startState=function(gh,gg,gf){return gh.startState?gh.startState(gg,gf):true};P.innerMode=function(gh,gf){while(gh.innerMode){var gg=gh.innerMode(gf);if(!gg||gg.mode==gh){break}gf=gg.state;gh=gg.mode}return gg||{mode:gh,state:gf}};var fY=P.commands={selectAll:function(gf){gf.setSelection(af(gf.firstLine(),0),af(gf.lastLine()),dh)},singleSelection:function(gf){gf.setSelection(gf.getCursor("anchor"),gf.getCursor("head"),dh)},killLine:function(gf){fG(gf,function(gh){if(gh.empty()){var gg=fs(gf.doc,gh.head.line).text.length;if(gh.head.ch==gg&&gh.head.line<gf.lastLine()){return{from:gh.head,to:af(gh.head.line+1,0)}}else{return{from:gh.head,to:af(gh.head.line,gg)}}}else{return{from:gh.from(),to:gh.to()}}})},deleteLine:function(gf){fG(gf,function(gg){return{from:af(gg.from().line,0),to:fF(gf.doc,af(gg.to().line+1,0))}})},delLineLeft:function(gf){fG(gf,function(gg){return{from:af(gg.from().line,0),to:gg.from()}})},delWrappedLineLeft:function(gf){fG(gf,function(gg){var gi=gf.charCoords(gg.head,"div").top+5;var gh=gf.coordsChar({left:0,top:gi},"div");return{from:gh,to:gg.from()}})},delWrappedLineRight:function(gf){fG(gf,function(gh){var gi=gf.charCoords(gh.head,"div").top+5;var gg=gf.coordsChar({left:gf.display.lineDiv.offsetWidth+100,top:gi},"div");return{from:gh.from(),to:gg}})},undo:function(gf){gf.undo()},redo:function(gf){gf.redo()},undoSelection:function(gf){gf.undoSelection()},redoSelection:function(gf){gf.redoSelection()},goDocStart:function(gf){gf.extendSelection(af(gf.firstLine(),0))},goDocEnd:function(gf){gf.extendSelection(af(gf.lastLine()))},goLineStart:function(gf){gf.extendSelectionsBy(function(gg){return bM(gf,gg.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(gf){gf.extendSelectionsBy(function(gg){return dQ(gf,gg.head)},{origin:"+move",bias:1})},goLineEnd:function(gf){gf.extendSelectionsBy(function(gg){return dW(gf,gg.head.line)},{origin:"+move",bias:-1})},goLineRight:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;return gf.coordsChar({left:gf.display.lineDiv.offsetWidth+100,top:gh},"div")},c0)},goLineLeft:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;return gf.coordsChar({left:0,top:gh},"div")},c0)},goLineLeftSmart:function(gf){gf.extendSelectionsBy(function(gg){var gh=gf.charCoords(gg.head,"div").top+5;var gi=gf.coordsChar({left:0,top:gh},"div");if(gi.ch<gf.getLine(gi.line).search(/\S/)){return dQ(gf,gg.head)}return gi},c0)},goLineUp:function(gf){gf.moveV(-1,"line")},goLineDown:function(gf){gf.moveV(1,"line")},goPageUp:function(gf){gf.moveV(-1,"page")},goPageDown:function(gf){gf.moveV(1,"page")},goCharLeft:function(gf){gf.moveH(-1,"char")},goCharRight:function(gf){gf.moveH(1,"char")},goColumnLeft:function(gf){gf.moveH(-1,"column")},goColumnRight:function(gf){gf.moveH(1,"column")},goWordLeft:function(gf){gf.moveH(-1,"word")},goGroupRight:function(gf){gf.moveH(1,"group")},goGroupLeft:function(gf){gf.moveH(-1,"group")},goWordRight:function(gf){gf.moveH(1,"word")},delCharBefore:function(gf){gf.deleteH(-1,"char")},delCharAfter:function(gf){gf.deleteH(1,"char")},delWordBefore:function(gf){gf.deleteH(-1,"word")},delWordAfter:function(gf){gf.deleteH(1,"word")},delGroupBefore:function(gf){gf.deleteH(-1,"group")},delGroupAfter:function(gf){gf.deleteH(1,"group")},indentAuto:function(gf){gf.indentSelection("smart")},indentMore:function(gf){gf.indentSelection("add")},indentLess:function(gf){gf.indentSelection("subtract")},insertTab:function(gf){gf.replaceSelection("\t")},insertSoftTab:function(gf){var gi=[],gj=gf.listSelections(),gl=gf.options.tabSize;for(var gh=0;gh<gj.length;gh++){var gk=gj[gh].from();var gg=bA(gf.getLine(gk.line),gk.ch,gl);gi.push(new Array(gl-gg%gl+1).join(" "))}gf.replaceSelections(gi)},defaultTab:function(gf){if(gf.somethingSelected()){gf.indentSelection("add")}else{gf.execCommand("insertTab")}},transposeChars:function(gf){cR(gf,function(){var gk=gf.listSelections(),gj=[];for(var gh=0;gh<gk.length;gh++){var gl=gk[gh].head,gg=fs(gf.doc,gl.line).text;if(gg){if(gl.ch==gg.length){gl=new af(gl.line,gl.ch-1)}if(gl.ch>0){gl=new af(gl.line,gl.ch+1);gf.replaceRange(gg.charAt(gl.ch-1)+gg.charAt(gl.ch-2),af(gl.line,gl.ch-2),gl,"+transpose")}else{if(gl.line>gf.doc.first){var gi=fs(gf.doc,gl.line-1).text;if(gi){gf.replaceRange(gg.charAt(0)+"\n"+gi.charAt(gi.length-1),af(gl.line-1,gi.length-1),af(gl.line,1),"+transpose")}}}}gj.push(new d3(gl,gl))}gf.setSelections(gj)})},newlineAndIndent:function(gf){cR(gf,function(){var gg=gf.listSelections().length;for(var gi=0;gi<gg;gi++){var gh=gf.listSelections()[gi];gf.replaceRange("\n",gh.anchor,gh.head,"+input");gf.indentLine(gh.from().line+1,null,true);fz(gf)}})},toggleOverwrite:function(gf){gf.toggleOverwrite()}};var ft=P.keyMap={};ft.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ft.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ft.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};ft.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ft["default"]=bL?ft.macDefault:ft.pcDefault;function S(gg){var gm=gg.split(/-(?!$)/),gg=gm[gm.length-1];var gl,gk,gf,gj;for(var gi=0;gi<gm.length-1;gi++){var gh=gm[gi];if(/^(cmd|meta|m)$/i.test(gh)){gj=true}else{if(/^a(lt)?$/i.test(gh)){gl=true}else{if(/^(c|ctrl|control)$/i.test(gh)){gk=true}else{if(/^s(hift)$/i.test(gh)){gf=true}else{throw new Error("Unrecognized modifier name: "+gh)}}}}}if(gl){gg="Alt-"+gg}if(gk){gg="Ctrl-"+gg}if(gj){gg="Cmd-"+gg}if(gf){gg="Shift-"+gg}return gg}P.normalizeKeyMap=function(gi){var gh={};for(var gj in gi){if(gi.hasOwnProperty(gj)){var gn=gi[gj];if(/^(name|fallthrough|(de|at)tach)$/.test(gj)){continue}if(gn=="..."){delete gi[gj];continue}var go=bz(gj.split(" "),S);for(var gm=0;gm<go.length;gm++){var gk,gg;if(gm==go.length-1){gg=gj;gk=gn}else{gg=go.slice(0,gm+1).join(" ");gk="..."}var gl=gh[gg];if(!gl){gh[gg]=gk}else{if(gl!=gk){throw new Error("Inconsistent bindings for "+gg)}}}delete gi[gj]}}for(var gf in gh){gi[gf]=gh[gf]}return gi};var m=P.lookupKey=function(gi,gl,gf,gh){gl=fR(gl);var gk=gl.call?gl.call(gi,gh):gl[gi];if(gk===false){return"nothing"}if(gk==="..."){return"multi"}if(gk!=null&&gf(gk)){return"handled"}if(gl.fallthrough){if(Object.prototype.toString.call(gl.fallthrough)!="[object Array]"){return m(gi,gl.fallthrough,gf,gh)}for(var gg=0;gg<gl.fallthrough.length;gg++){var gj=m(gi,gl.fallthrough[gg],gf,gh);if(gj){return gj}}}};var eu=P.isModifierKey=function(gg){var gf=typeof gg=="string"?gg:e7[gg.keyCode];return gf=="Ctrl"||gf=="Alt"||gf=="Shift"||gf=="Mod"};var fi=P.keyName=function(gg,gi){if(x&&gg.keyCode==34&&gg["char"]){return false}var gh=e7[gg.keyCode],gf=gh;if(gf==null||gg.altGraphKey){return false}if(gg.altKey&&gh!="Alt"){gf="Alt-"+gf}if((by?gg.metaKey:gg.ctrlKey)&&gh!="Ctrl"){gf="Ctrl-"+gf}if((by?gg.ctrlKey:gg.metaKey)&&gh!="Cmd"){gf="Cmd-"+gf}if(!gi&&gg.shiftKey&&gh!="Shift"){gf="Shift-"+gf}return gf};function fR(gf){return typeof gf=="string"?ft[gf]:gf}P.fromTextArea=function(gn,gl){gl=gl?aI(gl):{};gl.value=gn.value;if(!gl.tabindex&&gn.tabIndex){gl.tabindex=gn.tabIndex}if(!gl.placeholder&&gn.placeholder){gl.placeholder=gn.placeholder}if(gl.autofocus==null){var gi=dV();gl.autofocus=gi==gn||gn.getAttribute("autofocus")!=null&&gi==document.body}function gk(){gn.value=gm.getValue()}if(gn.form){bF(gn.form,"submit",gk);if(!gl.leaveSubmitMethodAlone){var gh=gn.form,gf=gh.submit;try{var gg=gh.submit=function(){gk();gh.submit=gf;gh.submit();gh.submit=gg}}catch(gj){}}}gl.finishInit=function(go){go.save=gk;go.getTextArea=function(){return gn};go.toTextArea=function(){go.toTextArea=isNaN;gk();gn.parentNode.removeChild(go.getWrapperElement());gn.style.display="";if(gn.form){eg(gn.form,"submit",gk);if(typeof gn.form.submit=="function"){gn.form.submit=gf}}}};gn.style.display="none";var gm=P(function(go){gn.parentNode.insertBefore(go,gn.nextSibling)},gl);return gm};var eO=P.StringStream=function(gf,gg){this.pos=this.start=0;this.string=gf;this.tabSize=gg||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eO.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gf){var gh=this.string.charAt(this.pos);if(typeof gf=="string"){var gg=gh==gf}else{var gg=gh&&(gf.test?gf.test(gh):gf(gh))}if(gg){++this.pos;return gh}},eatWhile:function(gf){var gg=this.pos;while(this.eat(gf)){}return this.pos>gg},eatSpace:function(){var gf=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>gf},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gf){var gg=this.string.indexOf(gf,this.pos);if(gg>-1){this.pos=gg;return true}},backUp:function(gf){this.pos-=gf},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bA(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bA(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bA(this.string,null,this.tabSize)-(this.lineStart?bA(this.string,this.lineStart,this.tabSize):0)},match:function(gh,gi,gg){if(typeof gh=="string"){var gk=function(gl){return gg?gl.toLowerCase():gl};var gf=this.string.substr(this.pos,gh.length);if(gk(gf)==gk(gh)){if(gi!==false){this.pos+=gh.length}return true}}else{var gj=this.string.slice(this.pos).match(gh);if(gj&&gj.index>0){return null}if(gj&&gi!==false){this.pos+=gj[0].length}return gj}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gg,gf){this.lineStart+=gg;try{return gf()}finally{this.lineStart-=gg}}};var ci=0;var ds=P.TextMarker=function(gg,gf){this.lines=[];this.type=gf;this.doc=gg;this.id=++ci};bg(ds);ds.prototype.clear=function(){if(this.explicitlyCleared){return}var gl=this.doc.cm,gg=gl&&!gl.curOp;if(gg){cM(gl)}if(fq(this,"clear")){var go=this.find();if(go){an(this,"clear",go.from,go.to)}}var gf=null,gk=null;for(var gh=0;gh<this.lines.length;++gh){var gn=this.lines[gh];var gm=fv(gn.markedSpans,this);if(gl&&!this.collapsed){Z(gl,bp(gn),"text")}else{if(gl){if(gm.to!=null){gk=bp(gn)}if(gm.from!=null){gf=bp(gn)}}}gn.markedSpans=eA(gn.markedSpans,gm);if(gm.from==null&&this.collapsed&&!fe(this.doc,gn)&&gl){ew(gn,aS(gl.display))}}if(gl&&this.collapsed&&!gl.options.lineWrapping){for(var gh=0;gh<this.lines.length;++gh){var gj=dU(this.lines[gh]),gi=c(gj);if(gi>gl.display.maxLineLength){gl.display.maxLine=gj;gl.display.maxLineLength=gi;gl.display.maxLineChanged=true}}}if(gf!=null&&gl&&this.collapsed){c7(gl,gf,gk+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gl){f2(gl.doc)}}if(gl){an(gl,"markerCleared",gl,this)}if(gg){ar(gl)}if(this.parent){this.parent.clear()}};ds.prototype.find=function(gi,gg){if(gi==null&&this.type=="bookmark"){gi=1}var gl,gk;for(var gh=0;gh<this.lines.length;++gh){var gf=this.lines[gh];var gj=fv(gf.markedSpans,this);if(gj.from!=null){gl=af(gg?gf:bp(gf),gj.from);if(gi==-1){return gl}}if(gj.to!=null){gk=af(gg?gf:bp(gf),gj.to);if(gi==1){return gk}}}return gl&&{from:gl,to:gk}};ds.prototype.changed=function(){var gh=this.find(-1,true),gg=this,gf=this.doc.cm;if(!gh||!gf){return}cR(gf,function(){var gj=gh.line,gk=bp(gh.line);var gi=e4(gf,gk);if(gi){aA(gi);gf.curOp.selectionChanged=gf.curOp.forceUpdate=true}gf.curOp.updateMaxLine=true;if(!fe(gg.doc,gj)&&gg.height!=null){var gm=gg.height;gg.height=null;var gl=c3(gg)-gm;if(gl){ew(gj,gj.height+gl)}}})};ds.prototype.attachLine=function(gf){if(!this.lines.length&&this.doc.cm){var gg=this.doc.cm.curOp;if(!gg.maybeHiddenMarkers||dq(gg.maybeHiddenMarkers,this)==-1){(gg.maybeUnhiddenMarkers||(gg.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gf)};ds.prototype.detachLine=function(gf){this.lines.splice(dq(this.lines,gf),1);if(!this.lines.length&&this.doc.cm){var gg=this.doc.cm.curOp;(gg.maybeHiddenMarkers||(gg.maybeHiddenMarkers=[])).push(this)}};var ci=0;function ey(gn,gp,go,gk,gj){if(gk&&gk.shared){return X(gn,gp,go,gk,gj)}if(gn.cm&&!gn.cm.curOp){return c9(gn.cm,ey)(gn,gp,go,gk,gj)}var gg=new ds(gn,gj),gm=bV(gp,go);if(gk){aI(gk,gg,false)}if(gm>0||gm==0&&gg.clearWhenEmpty!==false){return gg}if(gg.replacedWith){gg.collapsed=true;gg.widgetNode=fT("span",[gg.replacedWith],"CodeMirror-widget");if(!gk.handleMouseEvents){gg.widgetNode.setAttribute("cm-ignore-events","true")}if(gk.insertLeft){gg.widgetNode.insertLeft=true}}if(gg.collapsed){if(J(gn,gp.line,gp,go,gg)||gp.line!=go.line&&J(gn,go.line,gp,go,gg)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}cf=true}if(gg.addToHistory){eR(gn,{from:gp,to:go,origin:"markText"},gn.sel,NaN)}var gf=gp.line,gl=gn.cm,gi;gn.iter(gf,go.line+1,function(gq){if(gl&&gg.collapsed&&!gl.options.lineWrapping&&dU(gq)==gl.display.maxLine){gi=true}if(gg.collapsed&&gf!=gp.line){ew(gq,0)}bT(gq,new g(gg,gf==gp.line?gp.ch:null,gf==go.line?go.ch:null));++gf});if(gg.collapsed){gn.iter(gp.line,go.line+1,function(gq){if(fe(gn,gq)){ew(gq,0)}})}if(gg.clearOnEnter){bF(gg,"beforeCursorEnter",function(){gg.clear()})}if(gg.readOnly){f4=true;if(gn.history.done.length||gn.history.undone.length){gn.clearHistory()}}if(gg.collapsed){gg.id=++ci;gg.atomic=true}if(gl){if(gi){gl.curOp.updateMaxLine=true}if(gg.collapsed){c7(gl,gp.line,go.line+1)}else{if(gg.className||gg.title||gg.startStyle||gg.endStyle||gg.css){for(var gh=gp.line;gh<=go.line;gh++){Z(gl,gh,"text")}}}if(gg.atomic){f2(gl.doc)}an(gl,"markerAdded",gl,gg)}return gg}var I=P.SharedTextMarker=function(gh,gf){this.markers=gh;this.primary=gf;for(var gg=0;gg<gh.length;++gg){gh[gg].parent=this}};bg(I);I.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gf=0;gf<this.markers.length;++gf){this.markers[gf].clear()}an(this,"clear")};I.prototype.find=function(gg,gf){return this.primary.find(gg,gf)};function X(gj,gm,gl,gh,gi){gh=aI(gh);gh.shared=false;var gk=[ey(gj,gm,gl,gh,gi)],gg=gk[0];var gf=gh.widgetNode;ec(gj,function(go){if(gf){gh.widgetNode=gf.cloneNode(true)}gk.push(ey(go,fF(go,gm),fF(go,gl),gh,gi));for(var gn=0;gn<go.linked.length;++gn){if(go.linked[gn].isParent){return}}gg=fA(gk)});return new I(gk,gg)}function fO(gf){return gf.findMarks(af(gf.first,0),gf.clipPos(af(gf.lastLine())),function(gg){return gg.parent})}function dO(gk,gl){for(var gh=0;gh<gl.length;gh++){var gj=gl[gh],gm=gj.find();var gf=gk.clipPos(gm.from),gi=gk.clipPos(gm.to);if(bV(gf,gi)){var gg=ey(gk,gf,gi,gj.primary,gj.primary.type);gj.markers.push(gg);gg.parent=gj}}}function gc(gk){for(var gg=0;gg<gk.length;gg++){var gh=gk[gg],gj=[gh.primary.doc];ec(gh.primary.doc,function(gl){gj.push(gl)});for(var gf=0;gf<gh.markers.length;gf++){var gi=gh.markers[gf];if(dq(gj,gi.doc)==-1){gi.parent=null;gh.markers.splice(gf--,1)}}}}function g(gf,gh,gg){this.marker=gf;this.from=gh;this.to=gg}function fv(gg,gi){if(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if(gh.marker==gi){return gh}}}}function eA(gg,gh){for(var gi,gf=0;gf<gg.length;++gf){if(gg[gf]!=gh){(gi||(gi=[])).push(gg[gf])}}return gi}function bT(gf,gg){gf.markedSpans=gf.markedSpans?gf.markedSpans.concat([gg]):[gg];gg.marker.attachLine(gf)}function cw(gf,gj,gg){if(gf){for(var gk=0,gl;gk<gf.length;++gk){var gn=gf[gk],gi=gn.marker;var gm=gn.from==null||(gi.inclusiveLeft?gn.from<=gj:gn.from<gj);if(gm||gn.from==gj&&gi.type=="bookmark"&&(!gg||!gn.marker.insertLeft)){var gh=gn.to==null||(gi.inclusiveRight?gn.to>=gj:gn.to>gj);(gl||(gl=[])).push(new g(gi,gn.from,gh?null:gn.to))}}}return gl}function cJ(gf,gk,gg){if(gf){for(var gj=0,gl;gj<gf.length;++gj){var gn=gf[gj],gh=gn.marker;var gi=gn.to==null||(gh.inclusiveRight?gn.to>=gk:gn.to>gk);if(gi||gn.from==gk&&gh.type=="bookmark"&&(!gg||gn.marker.insertLeft)){var gm=gn.from==null||(gh.inclusiveLeft?gn.from<=gk:gn.from<gk);(gl||(gl=[])).push(new g(gh,gm?null:gn.from-gk,gn.to==null?null:gn.to-gk))}}}return gl}function f(gq,gv){if(gv.full){return null}var gn=a7(gq,gv.from.line)&&fs(gq,gv.from.line).markedSpans;var gr=a7(gq,gv.to.line)&&fs(gq,gv.to.line).markedSpans;if(!gn&&!gr){return null}var gj=gv.from.ch,gk=gv.to.ch,gg=bV(gv.from,gv.to)==0;var gm=cw(gn,gj,gg);var gt=cJ(gr,gk,gg);var gs=gv.text.length==1,gh=fA(gv.text).length+(gs?gj:0);if(gm){for(var gi=0;gi<gm.length;++gi){var gp=gm[gi];if(gp.to==null){var gu=fv(gt,gp.marker);if(!gu){gp.to=gj}else{if(gs){gp.to=gu.to==null?null:gu.to+gh}}}}}if(gt){for(var gi=0;gi<gt.length;++gi){var gp=gt[gi];if(gp.to!=null){gp.to+=gh}if(gp.from==null){var gu=fv(gm,gp.marker);if(!gu){gp.from=gh;if(gs){(gm||(gm=[])).push(gp)}}}else{gp.from+=gh;if(gs){(gm||(gm=[])).push(gp)}}}}if(gm){gm=d8(gm)}if(gt&&gt!=gm){gt=d8(gt)}var gl=[gm];if(!gs){var go=gv.text.length-2,gf;if(go>0&&gm){for(var gi=0;gi<gm.length;++gi){if(gm[gi].to==null){(gf||(gf=[])).push(new g(gm[gi].marker,null,null))}}}for(var gi=0;gi<go;++gi){gl.push(gf)}gl.push(gt)}return gl}function d8(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if(gh.from!=null&&gh.from==gh.to&&gh.marker.clearWhenEmpty!==false){gg.splice(gf--,1)}}if(!gg.length){return null}return gg}function s(gm,go){var gf=a8(gm,go);var gn=f(gm,go);if(!gf){return gn}if(!gn){return gf}for(var gk=0;gk<gf.length;++gk){var gg=gf[gk],gh=gn[gk];if(gg&&gh){spans:for(var gj=0;gj<gh.length;++gj){var gl=gh[gj];for(var gi=0;gi<gg.length;++gi){if(gg[gi].marker==gl.marker){continue spans}}gg.push(gl)}}else{if(gh){gf[gk]=gh}}}return gf}function cL(gp,gr,gq){var gk=null;gp.iter(gr.line,gq.line+1,function(gs){if(gs.markedSpans){for(var gt=0;gt<gs.markedSpans.length;++gt){var gu=gs.markedSpans[gt].marker;if(gu.readOnly&&(!gk||dq(gk,gu)==-1)){(gk||(gk=[])).push(gu)}}}});if(!gk){return null}var gj=[{from:gr,to:gq}];for(var gm=0;gm<gk.length;++gm){var gl=gk[gm],gh=gl.find(0);for(var gi=0;gi<gj.length;++gi){var gg=gj[gi];if(bV(gg.to,gh.from)<0||bV(gg.from,gh.to)>0){continue}var go=[gi,1],gf=bV(gg.from,gh.from),gn=bV(gg.to,gh.to);if(gf<0||!gl.inclusiveLeft&&!gf){go.push({from:gg.from,to:gh.from})}if(gn>0||!gl.inclusiveRight&&!gn){go.push({from:gh.to,to:gg.to})}gj.splice.apply(gj,go);gi+=go.length-1}}return gj}function et(gf){var gh=gf.markedSpans;if(!gh){return}for(var gg=0;gg<gh.length;++gg){gh[gg].marker.detachLine(gf)}gf.markedSpans=null}function ao(gf,gh){if(!gh){return}for(var gg=0;gg<gh.length;++gg){gh[gg].marker.attachLine(gf)}gf.markedSpans=gh}function dX(gf){return gf.inclusiveLeft?-1:0}function bE(gf){return gf.inclusiveRight?1:0}function dZ(gh,gf){var gj=gh.lines.length-gf.lines.length;if(gj!=0){return gj}var gg=gh.find(),gl=gf.find();var gk=bV(gg.from,gl.from)||dX(gh)-dX(gf);if(gk){return -gk}var gi=bV(gg.to,gl.to)||bE(gh)-bE(gf);if(gi){return gi}return gf.id-gh.id}function ch(gg,gk){var gf=cf&&gg.markedSpans,gj;if(gf){for(var gi,gh=0;gh<gf.length;++gh){gi=gf[gh];if(gi.marker.collapsed&&(gk?gi.from:gi.to)==null&&(!gj||dZ(gj,gi.marker)<0)){gj=gi.marker}}}return gj}function eK(gf){return ch(gf,true)}function f6(gf){return ch(gf,false)}function J(gm,gj,go,gn,gh){var gq=fs(gm,gj);var gf=cf&&gq.markedSpans;if(gf){for(var gi=0;gi<gf.length;++gi){var gg=gf[gi];if(!gg.marker.collapsed){continue}var gp=gg.marker.find(0);var gl=bV(gp.from,go)||dX(gg.marker)-dX(gh);var gk=bV(gp.to,gn)||bE(gg.marker)-bE(gh);if(gl>=0&&gk<=0||gl<=0&&gk>=0){continue}if(gl<=0&&(bV(gp.to,go)>0||(gg.marker.inclusiveRight&&gh.inclusiveLeft))||gl>=0&&(bV(gp.from,gn)<0||(gg.marker.inclusiveLeft&&gh.inclusiveRight))){return true}}}}function dU(gf){var gg;while(gg=eK(gf)){gf=gg.find(-1,true).line}return gf}function ei(gg){var gh,gf;while(gh=f6(gg)){gg=gh.find(1,true).line;(gf||(gf=[])).push(gg)}return gf}function aO(gi,gg){var gf=fs(gi,gg),gh=dU(gf);if(gf==gh){return gg}return bp(gh)}function eb(gi,gg){if(gg>gi.lastLine()){return gg}var gf=fs(gi,gg),gh;if(!fe(gi,gf)){return gg}while(gh=f6(gf)){gf=gh.find(1,true).line}return bp(gf)+1}function fe(gj,gg){var gf=cf&&gg.markedSpans;if(gf){for(var gi,gh=0;gh<gf.length;++gh){gi=gf[gh];if(!gi.marker.collapsed){continue}if(gi.from==null){return true}if(gi.marker.widgetNode){continue}if(gi.from==0&&gi.marker.inclusiveLeft&&dp(gj,gg,gi)){return true}}}}function dp(gk,gg,gi){if(gi.to==null){var gf=gi.marker.find(1,true);return dp(gk,gf.line,fv(gf.line.markedSpans,gi.marker))}if(gi.marker.inclusiveRight&&gi.to==gg.text.length){return true}for(var gj,gh=0;gh<gg.markedSpans.length;++gh){gj=gg.markedSpans[gh];if(gj.marker.collapsed&&!gj.marker.widgetNode&&gj.from==gi.to&&(gj.to==null||gj.to!=gi.from)&&(gj.marker.inclusiveLeft||gi.marker.inclusiveRight)&&dp(gk,gg,gj)){return true}}}var dI=P.LineWidget=function(gf,gi,gh){if(gh){for(var gg in gh){if(gh.hasOwnProperty(gg)){this[gg]=gh[gg]}}}this.cm=gf;this.node=gi};bg(dI);function A(gf,gg,gh){if(bs(gg)<((gf.curOp&&gf.curOp.scrollTop)||gf.doc.scrollTop)){cO(gf,null,gh)}}dI.prototype.clear=function(){var gf=this.cm,gh=this.line.widgets,gg=this.line,gk=bp(gg);if(gk==null||!gh){return}for(var gi=0;gi<gh.length;++gi){if(gh[gi]==this){gh.splice(gi--,1)}}if(!gh.length){gg.widgets=null}var gj=c3(this);cR(gf,function(){A(gf,gg,-gj);Z(gf,gk,"widget");ew(gg,Math.max(0,gg.height-gj))})};dI.prototype.changed=function(){var gg=this.height,gf=this.cm,gh=this.line;this.height=null;var gi=c3(this)-gg;if(!gi){return}cR(gf,function(){gf.curOp.forceUpdate=true;A(gf,gh,gi);ew(gh,gh.height+gi)})};function c3(gf){if(gf.height!=null){return gf.height}if(!er(document.body,gf.node)){var gg="position: relative;";if(gf.coverGutter){gg+="margin-left: -"+gf.cm.display.gutters.offsetWidth+"px;"}if(gf.noHScroll){gg+="width: "+gf.cm.display.wrapper.clientWidth+"px;"}bk(gf.cm.display.measure,fT("div",[gf.node],null,gg))}return gf.height=gf.node.offsetHeight}function bx(gh,gg,gj,gi){var gf=new dI(gh,gj,gi);if(gf.noHScroll){gh.display.alignWidgets=true}f1(gh.doc,gg,"widget",function(gk){var gl=gk.widgets||(gk.widgets=[]);if(gf.insertAt==null){gl.push(gf)}else{gl.splice(Math.min(gl.length-1,Math.max(0,gf.insertAt)),0,gf)}gf.line=gk;if(!fe(gh.doc,gk)){var gm=bs(gk)<gh.doc.scrollTop;ew(gk,gk.height+c3(gf));if(gm){cO(gh,null,gf.height)}gh.curOp.forceUpdate=true}return true});return gf}var fX=P.Line=function(gh,gg,gf){this.text=gh;ao(this,gg);this.height=gf?gf(this):1};bg(fX);fX.prototype.lineNo=function(){return bp(this)};function b(gg,gj,gi,gf){gg.text=gj;if(gg.stateAfter){gg.stateAfter=null}if(gg.styles){gg.styles=null}if(gg.order!=null){gg.order=null}et(gg);ao(gg,gi);var gh=gf?gf(gg):1;if(gh!=gg.height){ew(gg,gh)}}function bC(gf){gf.parent=null;et(gf)}function ab(gh,gg){if(gh){for(;;){var gf=gh.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!gf){break}gh=gh.slice(0,gf.index)+gh.slice(gf.index+gf[0].length);var gi=gf[1]?"bgClass":"textClass";if(gg[gi]==null){gg[gi]=gf[2]}else{if(!(new RegExp("(?:^|s)"+gf[2]+"(?:$|s)")).test(gg[gi])){gg[gi]+=" "+gf[2]}}}}return gh}function fl(gh,gg){if(gh.blankLine){return gh.blankLine(gg)}if(!gh.innerMode){return}var gf=P.innerMode(gh,gg);if(gf.mode.blankLine){return gf.mode.blankLine(gf.state)}}function fZ(gk,gj,gi,gf){for(var gg=0;gg<10;gg++){if(gf){gf[0]=P.innerMode(gk,gi).mode}var gh=gk.token(gj,gi);if(gj.pos>gj.start){return gh}}throw new Error("Mode "+gk.name+" failed to advance stream.")}function ce(go,gm,gi,gj){function gl(gr){return{start:gn.start,end:gn.pos,string:gn.current(),type:gh||null,state:gr?bJ(gp.mode,gg):gg}}var gp=go.doc,gk=gp.mode,gh;gm=fF(gp,gm);var gq=fs(gp,gm.line),gg=dJ(go,gm.line,gi);var gn=new eO(gq.text,go.options.tabSize),gf;if(gj){gf=[]}while((gj||gn.pos<gm.ch)&&!gn.eol()){gn.start=gn.pos;gh=fZ(gk,gn,gg);if(gj){gf.push(gl(true))}}return gj?gf:gl()}function F(gq,gr,gk,gg,gl,gi,gj){var gh=gk.flattenSpans;if(gh==null){gh=gq.options.flattenSpans}var gn=0,gm=null;var gp=new eO(gr,gq.options.tabSize),gf;var gt=gq.options.addModeClass&&[null];if(gr==""){ab(fl(gk,gg),gi)}while(!gp.eol()){if(gp.pos>gq.options.maxHighlightLength){gh=false;if(gj){dD(gq,gr,gg,gp.pos)}gp.pos=gr.length;gf=null}else{gf=ab(fZ(gk,gp,gg,gt),gi)}if(gt){var gs=gt[0].name;if(gs){gf="m-"+(gf?gs+" "+gf:gs)}}if(!gh||gm!=gf){while(gn<gp.start){gn=Math.min(gp.start,gn+50000);gl(gn,gm)}gm=gf}gp.start=gp.pos}while(gn<gp.pos){var go=Math.min(gp.pos,gn+50000);gl(go,gm);gn=go}}function fp(gm,go,gf,gk){var gn=[gm.state.modeGen],gi={};F(gm,go.text,gm.doc.mode,gf,function(gp,gq){gn.push(gp,gq)},gi,gk);for(var gg=0;gg<gm.state.overlays.length;++gg){var gj=gm.state.overlays[gg],gl=1,gh=0;F(gm,go.text,gj.mode,true,function(gp,gr){var gt=gl;while(gh<gp){var gq=gn[gl];if(gq>gp){gn.splice(gl,1,gp,gn[gl+1],gq)}gl+=2;gh=Math.min(gp,gq)}if(!gr){return}if(gj.opaque){gn.splice(gt,gl-gt,gp,"cm-overlay "+gr);gl=gt+2}else{for(;gt<gl;gt+=2){var gs=gn[gt+1];gn[gt+1]=(gs?gs+" ":"")+"cm-overlay "+gr}}},gi)}return{styles:gn,classes:gi.bgClass||gi.textClass?gi:null}}function aj(gg,gh,gf){if(!gh.styles||gh.styles[0]!=gg.state.modeGen){var gi=fp(gg,gh,gh.stateAfter=dJ(gg,bp(gh)));gh.styles=gi.styles;if(gi.classes){gh.styleClasses=gi.classes}else{if(gh.styleClasses){gh.styleClasses=null}}if(gf===gg.doc.frontier){gg.doc.frontier++}}return gh.styles}function dD(gf,gk,gh,gg){var gj=gf.doc.mode;var gi=new eO(gk,gf.options.tabSize);gi.start=gi.pos=gg||0;if(gk==""){fl(gj,gh)}while(!gi.eol()&&gi.pos<=gf.options.maxHighlightLength){fZ(gj,gi,gh);gi.start=gi.pos}}var B={},bb={};function eS(gh,gg){if(!gh||/^\s*$/.test(gh)){return null}var gf=gg.addModeClass?bb:B;return gf[gh]||(gf[gh]=gh.replace(/\S+/g,"cm-$&"))}function eL(gg,gk){var gl=fT("span",null,null,aq?"padding-right: .1px":null);var gi={pre:fT("pre",[gl]),content:gl,col:0,pos:0,cm:gg};gk.measure={};for(var gj=0;gj<=(gk.rest?gk.rest.length:0);gj++){var gh=gj?gk.rest[gj-1]:gk.line,gf;gi.pos=0;gi.addToken=d2;if((dS||aq)&&gg.getOption("lineWrapping")){gi.addToken=fy(gi.addToken)}if(bt(gg.display.measure)&&(gf=a(gh))){gi.addToken=dm(gi.addToken,gf)}gi.map=[];var gm=gk!=gg.display.externalMeasured&&bp(gh);bS(gh,gi,aj(gg,gh,gm));if(gh.styleClasses){if(gh.styleClasses.bgClass){gi.bgClass=eI(gh.styleClasses.bgClass,gi.bgClass||"")}if(gh.styleClasses.textClass){gi.textClass=eI(gh.styleClasses.textClass,gi.textClass||"")}}if(gi.map.length==0){gi.map.push(0,0,gi.content.appendChild(a3(gg.display.measure)))}if(gj==0){gk.measure.map=gi.map;gk.measure.cache={}}else{(gk.measure.maps||(gk.measure.maps=[])).push(gi.map);(gk.measure.caches||(gk.measure.caches=[])).push({})}}if(aq&&/\bcm-tab\b/.test(gi.content.lastChild.className)){gi.content.className="cm-tab-wrap-hack"}cH(gg,"renderLine",gg,gk.line,gi.pre);if(gi.pre.className){gi.textClass=eI(gi.pre.className,gi.textClass||"")}return gi}function e5(gg){var gf=fT("span","\u2022","cm-invalidchar");gf.title="\\u"+gg.charCodeAt(0).toString(16);gf.setAttribute("aria-label",gf.title);return gf}function d2(gp,gl,gr,gs,gn,gv,gk){if(!gl){return}var gj=gp.cm.options.specialChars,gf=false;if(!gj.test(gl)){gp.col+=gl.length;var gq=document.createTextNode(gl);gp.map.push(gp.pos,gp.pos+gl.length,gq);if(dS&&r<9){gf=true}gp.pos+=gl.length}else{var gq=document.createDocumentFragment(),gh=0;while(true){gj.lastIndex=gh;var go=gj.exec(gl);var gt=go?go.index-gh:gl.length-gh;if(gt){var gm=document.createTextNode(gl.slice(gh,gh+gt));if(dS&&r<9){gq.appendChild(fT("span",[gm]))}else{gq.appendChild(gm)}gp.map.push(gp.pos,gp.pos+gt,gm);gp.col+=gt;gp.pos+=gt}if(!go){break}gh+=gt+1;if(go[0]=="\t"){var gu=gp.cm.options.tabSize,gw=gu-gp.col%gu;var gm=gq.appendChild(fT("span",cc(gw),"cm-tab"));gm.setAttribute("role","presentation");gm.setAttribute("cm-text","\t");gp.col+=gw}else{var gm=gp.cm.options.specialCharPlaceholder(go[0]);gm.setAttribute("cm-text",go[0]);if(dS&&r<9){gq.appendChild(fT("span",[gm]))}else{gq.appendChild(gm)}gp.col+=1}gp.map.push(gp.pos,gp.pos+1,gm);gp.pos++}}if(gr||gs||gn||gf||gk){var gg=gr||"";if(gs){gg+=gs}if(gn){gg+=gn}var gi=fT("span",[gq],gg,gk);if(gv){gi.title=gv}return gp.content.appendChild(gi)}gp.content.appendChild(gq)}function fy(gf){function gg(gh){var gi=" ";for(var gj=0;gj<gh.length-2;++gj){gi+=gj%2?" ":"\u00a0"}gi+=" ";return gi}return function(gh,gm,gi,gj,gl,gk){gf(gh,gm.replace(/ {3,}/g,gg),gi,gj,gl,gk)}}function dm(gg,gf){return function(gn,gp,gh,gl,gq,go){gh=gh?gh+" cm-force-border":"cm-force-border";var gi=gn.pos,gk=gi+gp.length;for(;;){for(var gm=0;gm<gf.length;gm++){var gj=gf[gm];if(gj.to>gi&&gj.from<=gi){break}}if(gj.to>=gk){return gg(gn,gp,gh,gl,gq,go)}gg(gn,gp.slice(0,gj.to-gi),gh,gl,null,go);gl=null;gp=gp.slice(gj.to-gi);gi=gj.to}}}function al(gg,gi,gj,gh){var gf=!gh&&gj.widgetNode;if(gf){gg.map.push(gg.pos,gg.pos+gi,gf)}if(!gh&&gg.cm.display.input.needsContentAttribute){if(!gf){gf=gg.content.appendChild(document.createElement("span"))}gf.setAttribute("cm-marker",gj.id)}if(gf){gg.cm.display.input.setUneditable(gf);gg.content.appendChild(gf)}gg.pos+=gi}function bS(gp,gw,gg){var gl=gp.markedSpans,gh=gp.text,gt=0;if(!gl){for(var gz=1;gz<gg.length;gz+=2){gw.addToken(gw,gh.slice(gt,gt=gg[gz]),eS(gg[gz+1],gw.cm.options))}return}var gB=gh.length,gm=0,gz=1,gs="",gA,go;var gu=0,gr,gC,gf,gD,gj;for(;;){if(gu==gm){gr=gC=gf=gD=go="";gj=null;gu=Infinity;var gn=[];for(var gx=0;gx<gl.length;++gx){var gy=gl[gx],gv=gy.marker;if(gy.from<=gm&&(gy.to==null||gy.to>gm)){if(gy.to!=null&&gu>gy.to){gu=gy.to;gC=""}if(gv.className){gr+=" "+gv.className}if(gv.css){go=gv.css}if(gv.startStyle&&gy.from==gm){gf+=" "+gv.startStyle}if(gv.endStyle&&gy.to==gu){gC+=" "+gv.endStyle}if(gv.title&&!gD){gD=gv.title}if(gv.collapsed&&(!gj||dZ(gj.marker,gv)<0)){gj=gy}}else{if(gy.from>gm&&gu>gy.from){gu=gy.from}}if(gv.type=="bookmark"&&gy.from==gm&&gv.widgetNode){gn.push(gv)}}if(gj&&(gj.from||0)==gm){al(gw,(gj.to==null?gB+1:gj.to)-gm,gj.marker,gj.from==null);if(gj.to==null){return}}if(!gj&&gn.length){for(var gx=0;gx<gn.length;++gx){al(gw,0,gn[gx])}}}if(gm>=gB){break}var gq=Math.min(gB,gu);while(true){if(gs){var gi=gm+gs.length;if(!gj){var gk=gi>gq?gs.slice(0,gq-gm):gs;gw.addToken(gw,gk,gA?gA+gr:gr,gf,gm+gk.length==gu?gC:"",gD,go)}if(gi>=gq){gs=gs.slice(gq-gm);gm=gq;break}gm=gi;gf=""}gs=gh.slice(gt,gt=gg[gz++]);gA=eS(gg[gz++],gw.cm.options)}}}function E(gg,gf){return gf.from.ch==0&&gf.to.ch==0&&fA(gf.text)==""&&(!gg.cm||gg.cm.options.wholeLineUpdateBefore)}function fb(go,gu,gi,gj){function gn(gv){return gi?gi[gv]:null}function gg(gv,gx,gw){b(gv,gx,gw,gj);an(gv,"change",gv,gu)}function gf(gy,gv){for(var gw=gy,gx=[];gw<gv;++gw){gx.push(new fX(gr[gw],gn(gw),gj))}return gx}var gp=gu.from,gm=gu.to,gr=gu.text;var gl=fs(go,gp.line),gq=fs(go,gm.line);var gt=fA(gr),gh=gn(gr.length-1),gs=gm.line-gp.line;if(gu.full){go.insert(0,gf(0,gr.length));go.remove(gr.length,go.size-gr.length)}else{if(E(go,gu)){var gk=gf(0,gr.length-1);gg(gq,gq.text,gh);if(gs){go.remove(gp.line,gs)}if(gk.length){go.insert(gp.line,gk)}}else{if(gl==gq){if(gr.length==1){gg(gl,gl.text.slice(0,gp.ch)+gt+gl.text.slice(gm.ch),gh)}else{var gk=gf(1,gr.length-1);gk.push(new fX(gt+gl.text.slice(gm.ch),gh,gj));gg(gl,gl.text.slice(0,gp.ch)+gr[0],gn(0));go.insert(gp.line+1,gk)}}else{if(gr.length==1){gg(gl,gl.text.slice(0,gp.ch)+gr[0]+gq.text.slice(gm.ch),gn(0));go.remove(gp.line+1,gs)}else{gg(gl,gl.text.slice(0,gp.ch)+gr[0],gn(0));gg(gq,gt+gq.text.slice(gm.ch),gh);var gk=gf(1,gr.length-1);if(gs>1){go.remove(gp.line+1,gs-1)}go.insert(gp.line+1,gk)}}}}an(go,"change",go,gu)}function fD(gf){this.lines=gf;this.parent=null;for(var gg=0,gh=0;gg<gf.length;++gg){gf[gg].parent=this;gh+=gf[gg].height}this.height=gh}fD.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gf,gj){for(var gh=gf,gi=gf+gj;gh<gi;++gh){var gg=this.lines[gh];this.height-=gg.height;bC(gg);an(gg,"delete")}this.lines.splice(gf,gj)},collapse:function(gf){gf.push.apply(gf,this.lines)},insertInner:function(gf,gg,gi){this.height+=gi;this.lines=this.lines.slice(0,gf).concat(gg).concat(this.lines.slice(gf));for(var gh=0;gh<gg.length;++gh){gg[gh].parent=this}},iterN:function(gf,gi,gh){for(var gg=gf+gi;gf<gg;++gf){if(gh(this.lines[gf])){return true}}}};function fm(gh){this.children=gh;var gg=0,gj=0;for(var gf=0;gf<gh.length;++gf){var gi=gh[gf];gg+=gi.chunkSize();gj+=gi.height;gi.parent=this}this.size=gg;this.height=gj;this.parent=null}fm.prototype={chunkSize:function(){return this.size},removeInner:function(gf,gm){this.size-=gm;for(var gh=0;gh<this.children.length;++gh){var gl=this.children[gh],gj=gl.chunkSize();if(gf<gj){var gi=Math.min(gm,gj-gf),gk=gl.height;gl.removeInner(gf,gi);this.height-=gk-gl.height;if(gj==gi){this.children.splice(gh--,1);gl.parent=null}if((gm-=gi)==0){break}gf=0}else{gf-=gj}}if(this.size-gm<25&&(this.children.length>1||!(this.children[0] instanceof fD))){var gg=[];this.collapse(gg);this.children=[new fD(gg)];this.children[0].parent=this}},collapse:function(gf){for(var gg=0;gg<this.children.length;++gg){this.children[gg].collapse(gf)}},insertInner:function(gf,gg,gk){this.size+=gg.length;this.height+=gk;for(var gj=0;gj<this.children.length;++gj){var gm=this.children[gj],gl=gm.chunkSize();if(gf<=gl){gm.insertInner(gf,gg,gk);if(gm.lines&&gm.lines.length>50){while(gm.lines.length>50){var gi=gm.lines.splice(gm.lines.length-25,25);var gh=new fD(gi);gm.height-=gh.height;this.children.splice(gj+1,0,gh);gh.parent=this}this.maybeSpill()}break}gf-=gl}},maybeSpill:function(){if(this.children.length<=10){return}var gi=this;do{var gg=gi.children.splice(gi.children.length-5,5);var gh=new fm(gg);if(!gi.parent){var gj=new fm(gi.children);gj.parent=gi;gi.children=[gj,gh];gi=gj}else{gi.size-=gh.size;gi.height-=gh.height;var gf=dq(gi.parent.children,gi);gi.parent.children.splice(gf+1,0,gh)}gh.parent=gi.parent}while(gi.children.length>10);gi.parent.maybeSpill()},iterN:function(gf,gl,gk){for(var gg=0;gg<this.children.length;++gg){var gj=this.children[gg],gi=gj.chunkSize();if(gf<gi){var gh=Math.min(gl,gi-gf);if(gj.iterN(gf,gh,gk)){return true}if((gl-=gh)==0){break}gf=0}else{gf-=gi}}}};var cg=0;var ay=P.Doc=function(gh,gg,gf){if(!(this instanceof ay)){return new ay(gh,gg,gf)}if(gf==null){gf=0}fm.call(this,[new fD([new fX("",null)])]);this.first=gf;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=gf;var gi=af(gf,0);this.sel=eM(gi);this.history=new eJ(null);this.id=++cg;this.modeOption=gg;if(typeof gh=="string"){gh=cm(gh)}fb(this,{from:gi,to:gi,text:gh});bj(this,eM(gi),dh)};ay.prototype=b7(fm.prototype,{constructor:ay,iter:function(gh,gg,gf){if(gf){this.iterN(gh-this.first,gg-gh,gf)}else{this.iterN(this.first,this.first+this.size,gh)}},insert:function(gf,gg){var gi=0;for(var gh=0;gh<gg.length;++gh){gi+=gg[gh].height}this.insertInner(gf-this.first,gg,gi)},remove:function(gf,gg){this.removeInner(gf-this.first,gg)},getValue:function(gg){var gf=aU(this,this.first,this.first+this.size);if(gg===false){return gf}return gf.join(gg||"\n")},setValue:cx(function(gg){var gh=af(this.first,0),gf=this.first+this.size-1;b5(this,{from:gh,to:af(gf,fs(this,gf).text.length),text:cm(gg),origin:"setValue",full:true},true);bj(this,eM(gh))}),replaceRange:function(gg,gi,gh,gf){gi=fF(this,gi);gh=gh?fF(this,gh):gi;aT(this,gg,gi,gh,gf)},getRange:function(gi,gh,gg){var gf=fW(this,fF(this,gi),fF(this,gh));if(gg===false){return gf}return gf.join(gg||"\n")},getLine:function(gg){var gf=this.getLineHandle(gg);return gf&&gf.text},getLineHandle:function(gf){if(a7(this,gf)){return fs(this,gf)}},getLineNumber:function(gf){return bp(gf)},getLineHandleVisualStart:function(gf){if(typeof gf=="number"){gf=fs(this,gf)}return dU(gf)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(gf){return fF(this,gf)},getCursor:function(gh){var gf=this.sel.primary(),gg;if(gh==null||gh=="head"){gg=gf.head}else{if(gh=="anchor"){gg=gf.anchor}else{if(gh=="end"||gh=="to"||gh===false){gg=gf.to()}else{gg=gf.from()}}}return gg},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cx(function(gf,gh,gg){O(this,fF(this,typeof gf=="number"?af(gf,gh||0):gf),null,gg)}),setSelection:cx(function(gh,gg,gf){O(this,fF(this,gh),fF(this,gg||gh),gf)}),extendSelection:cx(function(gh,gf,gg){eH(this,fF(this,gh),gf&&fF(this,gf),gg)}),extendSelections:cx(function(gg,gf){aB(this,d6(this,gg,gf))}),extendSelectionsBy:cx(function(gg,gf){aB(this,bz(this.sel.ranges,gg),gf)}),setSelections:cx(function(gj,gf,gi){if(!gj.length){return}for(var gh=0,gg=[];gh<gj.length;gh++){gg[gh]=new d3(fF(this,gj[gh].anchor),fF(this,gj[gh].head))}if(gf==null){gf=Math.min(gj.length-1,this.sel.primIndex)}bj(this,aR(gg,gf),gi)}),addSelection:cx(function(gh,gg,gf){var gi=this.sel.ranges.slice(0);gi.push(new d3(fF(this,gh),fF(this,gg||gh)));bj(this,aR(gi,gi.length-1),gf)}),getSelection:function(gj){var gh=this.sel.ranges,gf;for(var gg=0;gg<gh.length;gg++){var gi=fW(this,gh[gg].from(),gh[gg].to());gf=gf?gf.concat(gi):gi}if(gj===false){return gf}else{return gf.join(gj||"\n")}},getSelections:function(gj){var gi=[],gg=this.sel.ranges;for(var gf=0;gf<gg.length;gf++){var gh=fW(this,gg[gf].from(),gg[gf].to());if(gj!==false){gh=gh.join(gj||"\n")}gi[gf]=gh}return gi},replaceSelection:function(gh,gj,gg){var gi=[];for(var gf=0;gf<this.sel.ranges.length;gf++){gi[gf]=gh}this.replaceSelections(gi,gj,gg||"+input")},replaceSelections:cx(function(gk,gm,gi){var gh=[],gl=this.sel;for(var gg=0;gg<gl.ranges.length;gg++){var gf=gl.ranges[gg];gh[gg]={from:gf.from(),to:gf.to(),text:cm(gk[gg]),origin:gi}}var gj=gm&&gm!="end"&&ap(this,gh,gm);for(var gg=gh.length-1;gg>=0;gg--){b5(this,gh[gg])}if(gj){e2(this,gj)}else{if(this.cm){fz(this.cm)}}}),undo:cx(function(){bN(this,"undo")}),redo:cx(function(){bN(this,"redo")}),undoSelection:cx(function(){bN(this,"undo",true)}),redoSelection:cx(function(){bN(this,"redo",true)}),setExtending:function(gf){this.extend=gf},getExtending:function(){return this.extend},historySize:function(){var gi=this.history,gg=0,gf=0;for(var gh=0;gh<gi.done.length;gh++){if(!gi.done[gh].ranges){++gg}}for(var gh=0;gh<gi.undone.length;gh++){if(!gi.undone[gh].ranges){++gf}}return{undo:gg,redo:gf}},clearHistory:function(){this.history=new eJ(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(gf){if(gf){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gf){return this.history.generation==(gf||this.cleanGeneration)},getHistory:function(){return{done:bu(this.history.done),undone:bu(this.history.undone)}},setHistory:function(gg){var gf=this.history=new eJ(this.history.maxGeneration);gf.done=bu(gg.done.slice(0),null,true);gf.undone=bu(gg.undone.slice(0),null,true)},addLineClass:cx(function(gf,gh,gg){return f1(this,gf,gh=="gutter"?"gutter":"class",function(gi){var gj=gh=="text"?"textClass":gh=="background"?"bgClass":gh=="gutter"?"gutterClass":"wrapClass";if(!gi[gj]){gi[gj]=gg}else{if(dn(gg).test(gi[gj])){return false}else{gi[gj]+=" "+gg}}return true})}),removeLineClass:cx(function(gf,gh,gg){return f1(this,gf,gh=="gutter"?"gutter":"class",function(gj){var gm=gh=="text"?"textClass":gh=="background"?"bgClass":gh=="gutter"?"gutterClass":"wrapClass";var gl=gj[gm];if(!gl){return false}else{if(gg==null){gj[gm]=null}else{var gk=gl.match(dn(gg));if(!gk){return false}var gi=gk.index+gk[0].length;gj[gm]=gl.slice(0,gk.index)+(!gk.index||gi==gl.length?"":" ")+gl.slice(gi)||null}}return true})}),markText:function(gh,gg,gf){return ey(this,fF(this,gh),fF(this,gg),gf,"range")},setBookmark:function(gh,gg){var gf={replacedWith:gg&&(gg.nodeType==null?gg.widget:gg),insertLeft:gg&&gg.insertLeft,clearWhenEmpty:false,shared:gg&&gg.shared};gh=fF(this,gh);return ey(this,gh,gh,gf,"bookmark")},findMarksAt:function(gj){gj=fF(this,gj);var gi=[],gg=fs(this,gj.line).markedSpans;if(gg){for(var gf=0;gf<gg.length;++gf){var gh=gg[gf];if((gh.from==null||gh.from<=gj.ch)&&(gh.to==null||gh.to>=gj.ch)){gi.push(gh.marker.parent||gh.marker)}}}return gi},findMarks:function(gj,gi,gf){gj=fF(this,gj);gi=fF(this,gi);var gg=[],gh=gj.line;this.iter(gj.line,gi.line+1,function(gk){var gm=gk.markedSpans;if(gm){for(var gl=0;gl<gm.length;gl++){var gn=gm[gl];if(!(gh==gj.line&&gj.ch>gn.to||gn.from==null&&gh!=gj.line||gh==gi.line&&gn.from>gi.ch)&&(!gf||gf(gn.marker))){gg.push(gn.marker.parent||gn.marker)}}}++gh});return gg},getAllMarks:function(){var gf=[];this.iter(function(gh){var gg=gh.markedSpans;if(gg){for(var gi=0;gi<gg.length;++gi){if(gg[gi].from!=null){gf.push(gg[gi].marker)}}}});return gf},posFromIndex:function(gh){var gf,gg=this.first;this.iter(function(gi){var gj=gi.text.length+1;if(gj>gh){gf=gh;return true}gh-=gj;++gg});return fF(this,af(gg,gf))},indexFromPos:function(gf){gf=fF(this,gf);var gg=gf.ch;if(gf.line<this.first||gf.ch<0){return 0}this.iter(this.first,gf.line,function(gh){gg+=gh.text.length+1});return gg},copy:function(gf){var gg=new ay(aU(this,this.first,this.first+this.size),this.modeOption,this.first);gg.scrollTop=this.scrollTop;gg.scrollLeft=this.scrollLeft;gg.sel=this.sel;gg.extend=false;if(gf){gg.history.undoDepth=this.history.undoDepth;gg.setHistory(this.getHistory())}return gg},linkedDoc:function(gf){if(!gf){gf={}}var gi=this.first,gh=this.first+this.size;if(gf.from!=null&&gf.from>gi){gi=gf.from}if(gf.to!=null&&gf.to<gh){gh=gf.to}var gg=new ay(aU(this,gi,gh),gf.mode||this.modeOption,gi);if(gf.sharedHist){gg.history=this.history}(this.linked||(this.linked=[])).push({doc:gg,sharedHist:gf.sharedHist});gg.linked=[{doc:this,isParent:true,sharedHist:gf.sharedHist}];dO(gg,fO(this));return gg},unlinkDoc:function(gf){if(gf instanceof P){gf=gf.doc}if(this.linked){for(var gg=0;gg<this.linked.length;++gg){var gh=this.linked[gg];if(gh.doc!=gf){continue}this.linked.splice(gg,1);gf.unlinkDoc(this);gc(fO(this));break}}if(gf.history==this.history){var gi=[gf.id];ec(gf,function(gj){gi.push(gj.id)},true);gf.history=new eJ(null);gf.history.done=bu(this.history.done,gi);gf.history.undone=bu(this.history.undone,gi)}},iterLinkedDocs:function(gf){ec(this,gf)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});ay.prototype.eachLine=ay.prototype.iter;var ek="iter insert remove copy getEditor".split(" ");for(var br in ay.prototype){if(ay.prototype.hasOwnProperty(br)&&dq(ek,br)<0){P.prototype[br]=(function(gf){return function(){return gf.apply(this.doc,arguments)}})(ay.prototype[br])}}bg(ay);function ec(gi,gh,gf){function gg(gn,gm,gl){if(gn.linked){for(var gk=0;gk<gn.linked.length;++gk){var gj=gn.linked[gk];if(gj.doc==gm){continue}var go=gl&&gj.sharedHist;if(gf&&!go){continue}gh(gj.doc,go);gg(gj.doc,gn,go)}}}gg(gi,null,true)}function q(gf,gg){if(gg.cm){throw new Error("This document is already in use.")}gf.doc=gg;gg.cm=gf;ag(gf);a5(gf);if(!gf.options.lineWrapping){j(gf)}gf.options.mode=gg.modeOption;c7(gf)}function fs(gi,gk){gk-=gi.first;if(gk<0||gk>=gi.size){throw new Error("There is no line "+(gk+gi.first)+" in the document.")}for(var gf=gi;!gf.lines;){for(var gg=0;;++gg){var gj=gf.children[gg],gh=gj.chunkSize();if(gk<gh){gf=gj;break}gk-=gh}}return gf.lines[gk]}function fW(gh,gj,gf){var gg=[],gi=gj.line;gh.iter(gj.line,gf.line+1,function(gk){var gl=gk.text;if(gi==gf.line){gl=gl.slice(0,gf.ch)}if(gi==gj.line){gl=gl.slice(gj.ch)}gg.push(gl);++gi});return gg}function aU(gg,gi,gh){var gf=[];gg.iter(gi,gh,function(gj){gf.push(gj.text)});return gf}function ew(gf,gg){var gh=gg-gf.height;if(gh){for(var gi=gf;gi;gi=gi.parent){gi.height+=gh}}}function bp(gf){if(gf.parent==null){return null}var gj=gf.parent,gi=dq(gj.lines,gf);for(var gg=gj.parent;gg;gj=gg,gg=gg.parent){for(var gh=0;;++gh){if(gg.children[gh]==gj){break}gi+=gg.children[gh].chunkSize()}}return gi+gj.first}function bw(gh,gk){var gm=gh.first;outer:do{for(var gi=0;gi<gh.children.length;++gi){var gl=gh.children[gi],gj=gl.height;if(gk<gj){gh=gl;continue outer}gk-=gj;gm+=gl.chunkSize()}return gm}while(!gh.lines);for(var gi=0;gi<gh.lines.length;++gi){var gg=gh.lines[gi],gf=gg.height;if(gk<gf){break}gk-=gf}return gm+gi}function bs(gh){gh=dU(gh);var gj=0,gg=gh.parent;for(var gi=0;gi<gg.lines.length;++gi){var gf=gg.lines[gi];if(gf==gh){break}else{gj+=gf.height}}for(var gk=gg.parent;gk;gg=gk,gk=gg.parent){for(var gi=0;gi<gk.children.length;++gi){var gl=gk.children[gi];if(gl==gg){break}else{gj+=gl.height}}}return gj}function a(gg){var gf=gg.order;if(gf==null){gf=gg.order=b2(gg.text)}return gf}function eJ(gf){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=gf||1}function dz(gg,gf){var gh={from:b1(gf.from),to:c1(gf),text:fW(gg,gf.from,gf.to)};bH(gg,gh,gf.from.line,gf.to.line+1);ec(gg,function(gi){bH(gi,gh,gf.from.line,gf.to.line+1)},true);return gh}function fu(gg){while(gg.length){var gf=fA(gg);if(gf.ranges){gg.pop()}else{break}}}function eG(gg,gf){if(gf){fu(gg.done);return fA(gg.done)}else{if(gg.done.length&&!fA(gg.done).ranges){return fA(gg.done)}else{if(gg.done.length>1&&!gg.done[gg.done.length-2].ranges){gg.done.pop();return fA(gg.done)}}}}function eR(gj,gn,gf,gh){var gi=gj.history;gi.undone.length=0;var gg=+new Date,gl;if((gi.lastOp==gh||gi.lastOrigin==gn.origin&&gn.origin&&((gn.origin.charAt(0)=="+"&&gj.cm&&gi.lastModTime>gg-gj.cm.options.historyEventDelay)||gn.origin.charAt(0)=="*"))&&(gl=eG(gi,gi.lastOp==gh))){var gk=fA(gl.changes);if(bV(gn.from,gn.to)==0&&bV(gn.from,gk.to)==0){gk.to=c1(gn)}else{gl.changes.push(dz(gj,gn))}}else{var gm=fA(gi.done);if(!gm||!gm.ranges){aw(gj.sel,gi.done)}gl={changes:[dz(gj,gn)],generation:gi.generation};gi.done.push(gl);while(gi.done.length>gi.undoDepth){gi.done.shift();if(!gi.done[0].ranges){gi.done.shift()}}}gi.done.push(gf);gi.generation=++gi.maxGeneration;gi.lastModTime=gi.lastSelTime=gg;gi.lastOp=gi.lastSelOp=gh;gi.lastOrigin=gi.lastSelOrigin=gn.origin;if(!gk){cH(gj,"historyAdded")}}function bD(gj,gg,gh,gi){var gf=gg.charAt(0);return gf=="*"||gf=="+"&&gh.ranges.length==gi.ranges.length&&gh.somethingSelected()==gi.somethingSelected()&&new Date-gj.history.lastSelTime<=(gj.cm?gj.cm.options.historyEventDelay:500)}function f3(gk,gi,gf,gg){var gj=gk.history,gh=gg&&gg.origin;if(gf==gj.lastSelOp||(gh&&gj.lastSelOrigin==gh&&(gj.lastModTime==gj.lastSelTime&&gj.lastOrigin==gh||bD(gk,gh,fA(gj.done),gi)))){gj.done[gj.done.length-1]=gi}else{aw(gi,gj.done)}gj.lastSelTime=+new Date;gj.lastSelOrigin=gh;gj.lastSelOp=gf;if(gg&&gg.clearRedo!==false){fu(gj.undone)}}function aw(gg,gf){var gh=fA(gf);if(!(gh&&gh.ranges&&gh.equals(gg))){gf.push(gg)}}function bH(gh,gg,gk,gj){var gf=gg["spans_"+gh.id],gi=0;gh.iter(Math.max(gh.first,gk),Math.min(gh.first+gh.size,gj),function(gl){if(gl.markedSpans){(gf||(gf=gg["spans_"+gh.id]={}))[gi]=gl.markedSpans}++gi})}function bY(gh){if(!gh){return null}for(var gg=0,gf;gg<gh.length;++gg){if(gh[gg].marker.explicitlyCleared){if(!gf){gf=gh.slice(0,gg)}}else{if(gf){gf.push(gh[gg])}}}return !gf?gh:gf.length?gf:null}function a8(gj,gi){var gh=gi["spans_"+gj.id];if(!gh){return null}for(var gg=0,gf=[];gg<gi.text.length;++gg){gf.push(bY(gh[gg]))}return gf}function bu(gn,gi,gm){for(var gl=0,gh=[];gl<gn.length;++gl){var gg=gn[gl];if(gg.ranges){gh.push(gm?fU.prototype.deepCopy.call(gg):gg);continue}var go=gg.changes,gp=[];gh.push({changes:gp});for(var gk=0;gk<go.length;++gk){var gq=go[gk],gj;gp.push({from:gq.from,to:gq.to,text:gq.text});if(gi){for(var gf in gq){if(gj=gf.match(/^spans_(\d+)$/)){if(dq(gi,Number(gj[1]))>-1){fA(gp)[gf]=gq[gf];delete gq[gf]}}}}}}return gh}function dC(gi,gh,gg,gf){if(gg<gi.line){gi.line+=gf}else{if(gh<gi.line){gi.line=gh;gi.ch=0}}}function e8(gi,gm,gl,gk){for(var gh=0;gh<gi.length;++gh){var gf=gi[gh],gj=true;if(gf.ranges){if(!gf.copied){gf=gi[gh]=gf.deepCopy();gf.copied=true}for(var gg=0;gg<gf.ranges.length;gg++){dC(gf.ranges[gg].anchor,gm,gl,gk);dC(gf.ranges[gg].head,gm,gl,gk)}continue}for(var gg=0;gg<gf.changes.length;++gg){var gn=gf.changes[gg];if(gl<gn.from.line){gn.from=af(gn.from.line+gk,gn.from.ch);gn.to=af(gn.to.line+gk,gn.to.ch)}else{if(gm<=gn.to.line){gj=false;break}}}if(!gj){gi.splice(0,gh+1);gh=0}}}function K(gh,gg){var gj=gg.from.line,gi=gg.to.line,gf=gg.text.length-(gi-gj)-1;e8(gh.done,gj,gi,gf);e8(gh.undone,gj,gi,gf)}var aF=P.e_preventDefault=function(gf){if(gf.preventDefault){gf.preventDefault()}else{gf.returnValue=false}};var V=P.e_stopPropagation=function(gf){if(gf.stopPropagation){gf.stopPropagation()}else{gf.cancelBubble=true}};function bq(gf){return gf.defaultPrevented!=null?gf.defaultPrevented:gf.returnValue==false}var f9=P.e_stop=function(gf){aF(gf);V(gf)};function T(gf){return gf.target||gf.srcElement}function fK(gg){var gf=gg.which;if(gf==null){if(gg.button&1){gf=1}else{if(gg.button&2){gf=3}else{if(gg.button&4){gf=2}}}}if(bL&&gg.ctrlKey&&gf==1){gf=3}return gf}var bF=P.on=function(gg,gh,gi){if(gg.addEventListener){gg.addEventListener(gh,gi,false)}else{if(gg.attachEvent){gg.attachEvent("on"+gh,gi)}else{var gj=gg._handlers||(gg._handlers={});var gf=gj[gh]||(gj[gh]=[]);gf.push(gi)}}};var eg=P.off=function(gg,gi,gj){if(gg.removeEventListener){gg.removeEventListener(gi,gj,false)}else{if(gg.detachEvent){gg.detachEvent("on"+gi,gj)}else{var gf=gg._handlers&&gg._handlers[gi];if(!gf){return}for(var gh=0;gh<gf.length;++gh){if(gf[gh]==gj){gf.splice(gh,1);break}}}}};var cH=P.signal=function(gg,gj){var gf=gg._handlers&&gg._handlers[gj];if(!gf){return}var gh=Array.prototype.slice.call(arguments,2);for(var gi=0;gi<gf.length;++gi){gf[gi].apply(null,gh)}};var bh=null;function an(gg,gk){var gf=gg._handlers&&gg._handlers[gk];if(!gf){return}var gi=Array.prototype.slice.call(arguments,2),gl;if(bR){gl=bR.delayedCallbacks}else{if(bh){gl=bh}else{gl=bh=[];setTimeout(cA,0)}}function gh(gm){return function(){gm.apply(null,gi)}}for(var gj=0;gj<gf.length;++gj){gl.push(gh(gf[gj]))}}function cA(){var gf=bh;bh=null;for(var gg=0;gg<gf.length;++gg){gf[gg]()}}function cu(gf,gh,gg){if(typeof gh=="string"){gh={type:gh,preventDefault:function(){this.defaultPrevented=true}}}cH(gf,gg||gh.type,gf,gh);return bq(gh)||gh.codemirrorIgnore}function dl(gg){var gf=gg._handlers&&gg._handlers.cursorActivity;if(!gf){return}var gi=gg.curOp.cursorActivityHandlers||(gg.curOp.cursorActivityHandlers=[]);for(var gh=0;gh<gf.length;++gh){if(dq(gi,gf[gh])==-1){gi.push(gf[gh])}}}function fq(gg,gh){var gf=gg._handlers&&gg._handlers[gh];return gf&&gf.length>0}function bg(gf){gf.prototype.on=function(gg,gh){bF(this,gg,gh)};gf.prototype.off=function(gg,gh){eg(this,gg,gh)}}var dR=30;var bO=P.Pass={toString:function(){return"CodeMirror.Pass"}};var dh={scroll:false},dv={origin:"*mouse"},c0={origin:"+move"};function em(){this.id=null}em.prototype.set=function(gf,gg){clearTimeout(this.id);this.id=setTimeout(gg,gf)};var bA=P.countColumn=function(gi,gg,gm,gk,gj){if(gg==null){gg=gi.search(/[^\s\u00a0]/);if(gg==-1){gg=gi.length}}for(var gh=gk||0,gl=gj||0;;){var gf=gi.indexOf("\t",gh);if(gf<0||gf>=gg){return gl+(gg-gh)}gl+=gf-gh;gl+=gm-(gl%gm);gh=gf+1}};function gb(gj,gi,gl){for(var gk=0,gh=0;;){var gg=gj.indexOf("\t",gk);if(gg==-1){gg=gj.length}var gf=gg-gk;if(gg==gj.length||gh+gf>=gi){return gk+Math.min(gf,gi-gh)}gh+=gg-gk;gh+=gl-(gh%gl);gk=gg+1;if(gh>=gi){return gk}}}var co=[""];function cc(gf){while(co.length<=gf){co.push(fA(co)+" ")}return co[gf]}function fA(gf){return gf[gf.length-1]}var dT=function(gf){gf.select()};if(eV){dT=function(gf){gf.selectionStart=0;gf.selectionEnd=gf.value.length}}else{if(dS){dT=function(gg){try{gg.select()}catch(gf){}}}}function dq(gh,gf){for(var gg=0;gg<gh.length;++gg){if(gh[gg]==gf){return gg}}return -1}function bz(gi,gh){var gf=[];for(var gg=0;gg<gi.length;gg++){gf[gg]=gh(gi[gg],gg)}return gf}function fP(){}function b7(gh,gf){var gg;if(Object.create){gg=Object.create(gh)}else{fP.prototype=gh;gg=new fP()}if(gf){aI(gf,gg)}return gg}function aI(gg,gi,gf){if(!gi){gi={}}for(var gh in gg){if(gg.hasOwnProperty(gh)&&(gf!==false||!gi.hasOwnProperty(gh))){gi[gh]=gg[gh]}}return gi}function cn(gg){var gf=Array.prototype.slice.call(arguments,1);return function(){return gg.apply(null,gf)}}var b6=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fw=P.isWordChar=function(gf){return/\w/.test(gf)||gf>"\x80"&&(gf.toUpperCase()!=gf.toLowerCase()||b6.test(gf))};function aM(gg,gf){if(!gf){return fw(gg)}if(gf.source.indexOf("\\w")>-1&&fw(gg)){return true}return gf.test(gg)}function eQ(gf){for(var gg in gf){if(gf.hasOwnProperty(gg)&&gf[gg]){return false}}return true}var eB=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fk(gf){return gf.charCodeAt(0)>=768&&eB.test(gf)}function fT(gf,gj,gg,gi){var gk=document.createElement(gf);if(gg){gk.className=gg}if(gi){gk.style.cssText=gi}if(typeof gj=="string"){gk.appendChild(document.createTextNode(gj))}else{if(gj){for(var gh=0;gh<gj.length;++gh){gk.appendChild(gj[gh])}}}return gk}var b8;if(document.createRange){b8=function(gh,gj,gf,gi){var gg=document.createRange();gg.setEnd(gi||gh,gf);gg.setStart(gh,gj);return gg}}else{b8=function(gh,gj,gf){var gg=document.body.createTextRange();try{gg.moveToElementText(gh.parentNode)}catch(gi){return gg}gg.collapse(true);gg.moveEnd("character",gf);gg.moveStart("character",gj);return gg}}function d7(gg){for(var gf=gg.childNodes.length;gf>0;--gf){gg.removeChild(gg.firstChild)}return gg}function bk(gf,gg){return d7(gf).appendChild(gg)}var er=P.contains=function(gf,gg){if(gg.nodeType==3){gg=gg.parentNode}if(gf.contains){return gf.contains(gg)}do{if(gg.nodeType==11){gg=gg.host}if(gg==gf){return true}}while(gg=gg.parentNode)};function dV(){return document.activeElement}if(dS&&r<11){dV=function(){try{return document.activeElement}catch(gf){return document.body}}}function dn(gf){return new RegExp("(^|\\s)"+gf+"(?:$|\\s)\\s*")}var i=P.rmClass=function(gh,gf){var gi=gh.className;var gg=dn(gf).exec(gi);if(gg){var gj=gi.slice(gg.index+gg[0].length);gh.className=gi.slice(0,gg.index)+(gj?gg[1]+gj:"")}};var e3=P.addClass=function(gg,gf){var gh=gg.className;if(!dn(gf).test(gh)){gg.className+=(gh?" ":"")+gf}};function eI(gh,gf){var gg=gh.split(" ");for(var gi=0;gi<gg.length;gi++){if(gg[gi]&&!dn(gg[gi]).test(gf)){gf+=" "+gg[gi]}}return gf}function cK(gi){if(!document.body.getElementsByClassName){return}var gh=document.body.getElementsByClassName("CodeMirror");for(var gg=0;gg<gh.length;gg++){var gf=gh[gg].CodeMirror;if(gf){gi(gf)}}}var aJ=false;function bZ(){if(aJ){return}fx();aJ=true}function fx(){var gf;bF(ge,"resize",function(){if(gf==null){gf=setTimeout(function(){gf=null;cK(aN)},100)}});bF(ge,"blur",function(){cK(cs)})}var eF=function(){if(dS&&r<9){return false}var gf=fT("div");return"draggable" in gf||"dragDrop" in gf}();var fI;function a3(gf){if(fI==null){var gh=fT("span","\u200b");bk(gf,fT("span",[gh,document.createTextNode("x")]));if(gf.firstChild.offsetHeight!=0){fI=gh.offsetWidth<=1&&gh.offsetHeight>2&&!(dS&&r<8)}}var gg=fI?fT("span","\u200b"):fT("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gg.setAttribute("cm-text","");return gg}var fH;function bt(gi){if(fH!=null){return fH}var gf=bk(gi,document.createTextNode("A\u062eA"));var gh=b8(gf,0,1).getBoundingClientRect();if(!gh||gh.left==gh.right){return false}var gg=b8(gf,1,2).getBoundingClientRect();return fH=(gg.right-gh.right<3)}var cm=P.splitLines="\n\nb".split(/\n/).length!=3?function(gj){var gl=0,gk=[],gi=gj.length;while(gl<=gi){var gh=gj.indexOf("\n",gl);if(gh==-1){gh=gj.length}var gg=gj.slice(gl,gj.charAt(gh-1)=="\r"?gh-1:gh);var gf=gg.indexOf("\r");if(gf!=-1){gk.push(gg.slice(0,gf));gl+=gf+1}else{gk.push(gg);gl=gh+1}}return gk}:function(gf){return gf.split(/\r\n?|\n/)};var a6=ge.getSelection?function(gg){try{return gg.selectionStart!=gg.selectionEnd}catch(gf){return false}}:function(gh){try{var gf=gh.ownerDocument.selection.createRange()}catch(gg){}if(!gf||gf.parentElement()!=gh){return false}return gf.compareEndPoints("StartToEnd",gf)!=0};var df=(function(){var gf=fT("div");if("oncopy" in gf){return true}gf.setAttribute("oncopy","return;");return typeof gf.oncopy=="function"})();var eZ=null;function cB(gg){if(eZ!=null){return eZ}var gh=bk(gg,fT("span","x"));var gi=gh.getBoundingClientRect();var gf=b8(gh,0,1).getBoundingClientRect();return eZ=Math.abs(gi.left-gf.left)>1}var e7={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};P.keyNames=e7;(function(){for(var gf=0;gf<10;gf++){e7[gf+48]=e7[gf+96]=String(gf)}for(var gf=65;gf<=90;gf++){e7[gf]=String.fromCharCode(gf)}for(var gf=1;gf<=12;gf++){e7[gf+111]=e7[gf+63235]="F"+gf}})();function u(gf,gl,gk,gj){if(!gf){return gj(gl,gk,"ltr")}var gi=false;for(var gh=0;gh<gf.length;++gh){var gg=gf[gh];if(gg.from<gk&&gg.to>gl||gl==gk&&gg.to==gl){gj(Math.max(gg.from,gl),Math.min(gg.to,gk),gg.level==1?"rtl":"ltr");gi=true}}if(!gi){gj(gl,gk,"ltr")}}function dF(gf){return gf.level%2?gf.to:gf.from}function eo(gf){return gf.level%2?gf.from:gf.to}function cz(gg){var gf=a(gg);return gf?dF(gf[0]):0}function av(gg){var gf=a(gg);if(!gf){return gg.text.length}return eo(fA(gf))}function bM(gg,gk){var gi=fs(gg.doc,gk);var gh=dU(gi);if(gh!=gi){gk=bp(gh)}var gf=a(gh);var gj=!gf?0:gf[0].level%2?av(gh):cz(gh);return af(gk,gj)}function dW(gg,gj){var gk,gh=fs(gg.doc,gj);while(gk=f6(gh)){gh=gk.find(1,true).line;gj=null}var gf=a(gh);var gi=!gf?gh.text.length:gf[0].level%2?cz(gh):av(gh);return af(gj==null?bp(gh):gj,gi)}function dQ(gg,gl){var gk=bM(gg,gl.line);var gh=fs(gg.doc,gk.line);var gf=a(gh);if(!gf||gf[0].level==0){var gj=Math.max(0,gh.text.search(/\S/));var gi=gl.line==gk.line&&gl.ch<=gj&&gl.ch;return af(gk.line,gi?0:gj)}return gk}function cZ(gg,gh,gf){var gi=gg[0].level;if(gh==gi){return true}if(gf==gi){return false}return gh<gf}var fB;function aH(gf,gj){fB=null;for(var gg=0,gh;gg<gf.length;++gg){var gi=gf[gg];if(gi.from<gj&&gi.to>gj){return gg}if((gi.from==gj||gi.to==gj)){if(gh==null){gh=gg}else{if(cZ(gf,gi.level,gf[gh].level)){if(gi.from!=gi.to){fB=gh}return gg}else{if(gi.from!=gi.to){fB=gg}return gh}}}}return gh}function fr(gg,gi,gh,gf){if(!gf){return gi+gh}do{gi+=gh}while(gi>0&&fk(gg.text.charAt(gi)));return gi}function D(gg,gm,gi,gf){var gj=a(gg);if(!gj){return c5(gg,gm,gi,gf)}var gl=aH(gj,gm),gh=gj[gl];var gk=fr(gg,gm,gh.level%2?-gi:gi,gf);for(;;){if(gk>gh.from&&gk<gh.to){return gk}if(gk==gh.from||gk==gh.to){if(aH(gj,gk)==gl){return gk}gh=gj[gl+=gi];return(gi>0)==gh.level%2?gh.to:gh.from}else{gh=gj[gl+=gi];if(!gh){return null}if((gi>0)==gh.level%2){gk=fr(gg,gh.to,-1,gf)}else{gk=fr(gg,gh.from,1,gf)}}}}function c5(gg,gj,gh,gf){var gi=gj+gh;if(gf){while(gi>0&&fk(gg.text.charAt(gi))){gi+=gh}}return gi<0||gi>gg.text.length?null:gi}var b2=(function(){var go="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gg="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gj(gp){if(gp<=247){return go.charAt(gp)}else{if(1424<=gp&&gp<=1524){return"R"}else{if(1536<=gp&&gp<=1773){return gg.charAt(gp-1536)}else{if(1774<=gp&&gp<=2220){return"r"}else{if(8192<=gp&&gp<=8203){return"w"}else{if(gp==8204){return"b"}else{return"L"}}}}}}}var gk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gn=/[stwN]/,gh=/[LRr]/,gi=/[Lb1n]/,gf=/[1n]/;var gm="L";function gl(gr,gq,gp){this.level=gr;this.from=gq;this.to=gp}return function(gA){if(!gk.test(gA)){return false}var gE=gA.length,gw=[];for(var gD=0,gt;gD<gE;++gD){gw.push(gt=gj(gA.charCodeAt(gD)))}for(var gD=0,gy=gm;gD<gE;++gD){var gt=gw[gD];if(gt=="m"){gw[gD]=gy}else{gy=gt}}for(var gD=0,gr=gm;gD<gE;++gD){var gt=gw[gD];if(gt=="1"&&gr=="r"){gw[gD]="n"}else{if(gh.test(gt)){gr=gt;if(gt=="r"){gw[gD]="R"}}}}for(var gD=1,gy=gw[0];gD<gE-1;++gD){var gt=gw[gD];if(gt=="+"&&gy=="1"&&gw[gD+1]=="1"){gw[gD]="1"}else{if(gt==","&&gy==gw[gD+1]&&(gy=="1"||gy=="n")){gw[gD]=gy}}gy=gt}for(var gD=0;gD<gE;++gD){var gt=gw[gD];if(gt==","){gw[gD]="N"}else{if(gt=="%"){for(var gs=gD+1;gs<gE&&gw[gs]=="%";++gs){}var gG=(gD&&gw[gD-1]=="!")||(gs<gE&&gw[gs]=="1")?"1":"N";for(var gC=gD;gC<gs;++gC){gw[gC]=gG}gD=gs-1}}}for(var gD=0,gr=gm;gD<gE;++gD){var gt=gw[gD];if(gr=="L"&&gt=="1"){gw[gD]="L"}else{if(gh.test(gt)){gr=gt}}}for(var gD=0;gD<gE;++gD){if(gn.test(gw[gD])){for(var gs=gD+1;gs<gE&&gn.test(gw[gs]);++gs){}var gp=(gD?gw[gD-1]:gm)=="L";var gq=(gs<gE?gw[gs]:gm)=="L";var gG=gp||gq?"L":"R";for(var gC=gD;gC<gs;++gC){gw[gC]=gG}gD=gs-1}}var gB=[],gz;for(var gD=0;gD<gE;){if(gi.test(gw[gD])){var gu=gD;for(++gD;gD<gE&&gi.test(gw[gD]);++gD){}gB.push(new gl(0,gu,gD))}else{var gv=gD,gx=gB.length;for(++gD;gD<gE&&gw[gD]!="L";++gD){}for(var gC=gv;gC<gD;){if(gf.test(gw[gC])){if(gv<gC){gB.splice(gx,0,new gl(1,gv,gC))}var gF=gC;for(++gC;gC<gD&&gf.test(gw[gC]);++gC){}gB.splice(gx,0,new gl(2,gF,gC));gv=gC}else{++gC}}if(gv<gD){gB.splice(gx,0,new gl(1,gv,gD))}}}if(gB[0].level==1&&(gz=gA.match(/^\s+/))){gB[0].from=gz[0].length;gB.unshift(new gl(0,0,gz[0].length))}if(fA(gB).level==1&&(gz=gA.match(/\s+$/))){fA(gB).to-=gz[0].length;gB.push(new gl(0,gE-gz[0].length,gE))}if(gB[0].level!=fA(gB).level){gB.push(new gl(gB[0].level,gE,gE))}return gB}})();P.version="5.0.0";ge.CodeMirror=P})(window);
