"use strict";window.APIS="http://api.chqiangs.com",angular.module("app",["ngAnimate","ngCookies","ngSanitize","ngResource","ui.router","ui.bootstrap"]).controller("baseCtrl",["$scope","$http","$rootScope","$state","$location","$timeout",function(t,e,n,i,r,o){function a(){s=document.getElementById("music")}n.seo={pagetitle:"主页",des:"Wesson Charles的博客，前端技术，UIUE，和生活琐碎"},window.location.pathname.indexOf("login")>-1?t.login=!0:t.login=!1,window.getCookie("chqiangsuser")?n.islogin=!0:n.islogin=!1,n.language_switch=function(t){n.language=t},t.base_tmp="controllers/html/body.html",r.url().split("/")[1]?n.app=r.url().split("/")[1]:n.app="/",t.toggleheader=function(){$("#header").toggleClass("sticky"),$("#header").hasClass("sticky")?$("#header").css("margin-bottom","-68px").css("position","relative"):$("#header").css("margin-bottom","45px").css("position","fixed")},t.frameurl="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=1&uid=2709394993&verifier=8341d7fb&colors=ffffff,ffffff,666666,0082cb,ffffff&dpc=1&_stamp="+(new Date).getTime(),$.browser={},$.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),n.$on("$locationChangeStart",function(){var t=window.location.pathname;o(function(){var e,n=$("#readable-navbar-collapse");if(n.find("ul .active").removeClass("active"),"/"==t)e=n.find("ul li:first"),n.find("ul li:first").addClass("active");else{var i="/"+t.split("/")[1];e=n.find("ul li a[href='"+i+"']").parent(),e.addClass("active")}e.find(".sub-menu").length>0&&n.find("ul li .sub-menu li a[href='"+t+"']").parent().addClass("active")}),n.cover=!1}),n.$on("$routeChangeSuccess",function(){window.location.pathname.indexOf("login")>-1?t.login=!0:t.login=!1;var e=window.location.pathname;o(function(){var t,n=$("#readable-navbar-collapse");if(n.find("ul .active").removeClass("active"),"/"==e)t=n.find("ul li:first"),n.find("ul li:first").addClass("active");else{var i="/"+e.split("/")[1];t=n.find("ul li a[href='"+i+"']").parent(),t.addClass("active")}t.find(".sub-menu").length>0&&n.find("ul li .sub-menu li a[href='"+e+"']").parent().addClass("active"),n.find("ul li").hover(function(){var e=$(this);n.hasClass("in")||"readable-navbar-collapse"!=e.parent().parent().attr("id")||t==e||e.find("ul").css("padding-left",e[0].getBoundingClientRect().left)},function(){var e=$(this);n.hasClass("in")||"readable-navbar-collapse"!=e.parent().parent().attr("id")||t==e||e.find("ul").css("padding-left",0)}),$("#head-menu").click(function(){n.toggleClass("in")})})}),n.$on("locationChangeSuccess",function(){window.location.pathname.indexOf("article")>-1?n.cover=!0:n.cover=!1,console.log("看看是为什么")}),t.$on("$viewContentLoaded",function(){bShare.init(),a(),$(document).scroll(function(t){0==$(this).scrollTop()?$("#header,.slider.main").removeClass("scroll"):$("#header,.slider.main").addClass("scroll")}),o(function(){window.prerenderReady=!0},0)});var s;t.play=function(t){return s.paused?(s.play(),void $(event.target).removeClass("fa-pause").addClass("fa-play")):(s.pause(),void $(event.target).removeClass("fa-play").addClass("fa-pause"))},t.stop=function(){s.pause(),$(event.target).find("i").attr("class","fa fa-play")}}]).controller("loginctrl",["$scope","$http","$rootScope","$state","$location","$timeout","$window",function(t,e,n,i,r,o,a){t.login=function(){var t=$(".loginform input[name='username']").val(),n=$(".loginform input[name='code']").val();if(t&&n){var r={email:t,code:n};e.post(APIS+"/api/login",r).then(function(t){console.log(t),5==t.data.code&&(console.log("@22"),window.setCookie("chqiangsuser",encodeURIComponent(t.data.userinfo.name)+(new Date).getTime()),i.go("add"))})}},t.sendcode=function(){return $(".loginform input[name='username']").val()&&"chqiangs@gmail.com"==$(".loginform input[name='username']").val()?void e.post(APIS+"/api/sendcode",{email:"chqiangs@gmail.com"}).then(function(t){alert(t.data.message.content)}):(alert("请输入管理员邮箱"),!1)},t.ifupperkey=!1}]),angular.module("app").run(["$rootScope","$http","$state","$cookieStore",function(t,e,n,i){}]),angular.module("app").config(["$httpProvider","$qProvider",function(t,e){console.log(t),t.defaults.headers.post["Content-Type"]="application/json",e.errorOnUnhandledRejections(!1)}]).config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://libs.baidu.com/**","http://libs.useso.com/**","http://widget.weibo.com/weiboshow/**","http://api.chqiangs.com/**"])}]),angular.module("app").controller("dladdctrl",["$rootScope","$scope","$http","$location","$window","$filter","$compile",function(t,e,n,i,r,o,a){e.islogin||(r.location.href="/login"),e.module="add",e.techtab=!0,e.lifetab=!0,$("#addsth .item").tab(),$("#ismine").checkbox(),$("#blogtags").dropdown(),$("#blogtype").dropdown(),$("#lifetype").dropdown(),$("#lifesubtype").dropdown(),$("#ismine").on("change",function(){e.$apply(function(){e.blog.ismine=!e.blog.ismine})}),$("#lifesubtype").on("change",function(){var t=$(this).val();e.$apply(function(){e.life.subtype=t})}),e.tags=function(t){$("#tags");if(13==t.keyCode){var n=e.tagstr;e.tagstr="",e.life.tags||(e.life.tags=[]),e.life.tags.push(n.split(" ")[0])}},e.getblogeditor=function(){var t='<textarea data-uk-htmleditor="{maxsplitsize:350,markdown:true}" name="content"></textarea>';$("#add_wpreface").html(a(t)(e))},e.getblogeditor(),e.getlifeeditor=function(){var t='<textarea data-uk-htmleditor="{maxsplitsize:350,markdown:true}" name="content"></textarea>';$("#add_wlife").html(a(t)(e))},e.removetag=function(t){for(var n=0;n<e.life.tags.length;n++){var i=e.life.tags[n];if(t.label){if(t.label=i.label){e.life.tags.splice(n,1);break}}else if(t==i){e.life.tags.splice(n,1);break}}},e.restore=function(){e.blog={title:"",ismine:!0,type:"tech",originalauthor:{url:"",name:""},temptag:[]},e.life={subtype:"pic-word",type:"life",title:"",originalauthor:{url:"",name:""}},e.tagstr=""},e.restore(),e.addblog=function(t){e.blog.tags=$("#blogtags").val(),console.log($("#add_blog").serialize()),e.blog.content=$("#add_blog").serializeObject().content,console.log(e.blog),n.post(APIS+"/api/tech",e.blog).then(function(t){alert("添加成功"),e.restore()})},e.add_life=function(t){var i=$(t.target).parents("form").serializeObject();for(var r in i)e.life[r]=i[r];console.log(e.life),n.post(APIS+"/api/tech",e.life).then(function(t){console.log(t)})}}]).controller("dleditctrl",["$rootScope","$scope","$http","$location","$window","$filter","$compile","$state","$timeout",function(t,e,n,i,r,o,a,s,l){e.islogin||(r.location.href="/login"),e.getblogeditor=function(t){var n='<textarea data-uk-htmleditor="{maxsplitsize:350,markdown:true}" name="content">'+t+"</textarea>";$("#add_wpreface").html(a(n)(e))},e.getlifeeditor=function(t){var n='<textarea data-uk-htmleditor="{maxsplitsize:350,markdown:true}" name="content">'+t+"</textarea>";$("#add_wlife").html(a(n)(e))},n.get(APIS+"/api/one/"+s.params.id).then(function(t){"tech"==t.blog.type?(e.techtab=!0,e.lifetab=!1,e.blog=t.blog,e.getblogeditor(e.blog.content)):"life"==t.blog.type&&(e.techtab=!1,e.lifetab=!0,e.life=t.blog,e.getlifeeditor(e.life.content)),console.log(t.blog),l(function(){$("#addsth .item").tab(),$("#ismine").checkbox(),$("#blogtags").dropdown(),$("#blogtype").dropdown(),$("#lifetype").dropdown(),$("#lifesubtype").dropdown();var n=[],i=t.blog.tags;console.log(i);for(var r=0;r<i.length;r++)n.push(i[r].label);e.blog&&$("#blogtags").dropdown("set selected",n),$("#ismine").on("change",function(){e.$apply(function(){e.blog?e.blog.ismine=!e.blog.ismine:e.life.ismine=!e.life.ismine})}),$("#lifesubtype").on("change",function(){var t=$(this).val();e.$apply(function(){e.life.subtype=t})})},0)}),e.tags=function(t){$("#tags");if(13==t.keyCode){var n=e.tagstr;e.tagstr="",e.life.tags||(e.life.tags=[]),e.life.tags.push(n.split(" ")[0])}},e.removetag=function(t){for(var n=0;n<e.life.tags.length;n++){var i=e.life.tags[n];if(t.label){if(t.label=i.label){e.life.tags.splice(n,1);break}}else if(t==i){e.life.tags.splice(n,1);break}}},e.restore=function(){e.blog={title:"",ismine:!0,type:"tech",originalauthor:{url:"",name:""},temptag:[]},e.life={subtype:"pic-word",type:"life",title:"",originalauthor:{url:"",name:""}},e.tagstr=""},e.restore(),e.addblog=function(t){e.blog.tags=$("#blogtags").val(),e.blog.content=$("#add_wpreface").find("textarea").val(),console.log(e.blog),n.post(APIS+"/api/tech/update?_id="+e.blog._id,e.blog).then(function(t){5==t.data.code&&(r.location.href="/article/"+e.blog._id)})},e.add_life=function(t){var i=$("#add_blog").serializeObject();for(var o in i)e.life[o]=i[o];e.life.content=$("#add_wlife").find("textarea").val(),console.log("更新了"),n.post(APIS+"/api/tech/update?_id="+e.life._id,e.life).then(function(t){5==t.data.code&&(r.location.href="/article/"+e.life._id)})}}]).controller("dlaboutctrl",["$rootScope",function(t){t.seo={pagetitle:"关于我",des:"姓名：常惠强坐标：北京，石景山兴趣：电影/锻炼/看书/旅游技术及发展方向：web全栈工程师期望：实现自我价值之外有自己的小店"}}]),angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,n){n.html5Mode(!0),t.state("home",{url:"/home",templateUrl:"controllers/dl_base/base.html",controller:"dlbasectrl"}).state("type",{url:"/type",templateUrl:"controllers/dl_base/base.html",controller:"dlbasectrl"}).state("articledetail",{url:"/article/:id",templateUrl:"controllers/html/article.html",controller:"dlarticlectrl"}).state("login",{url:"/login",templateUrl:"controllers/html/login.html",controller:"loginctrl"}).state("frontend",{url:"/front-end",templateUrl:"controllers/dl_tech/tech.html",controller:"dltechctrl"}).state("frontendquery",{url:"/front-end/:type",templateUrl:"controllers/dl_tech/tech.html",controller:"dltechctrl"}).state("life",{url:"/life",templateUrl:"controllers/dl_life/life.html",controller:"dllifectrl"}).state("lifequery",{url:"/life/:type",templateUrl:"controllers/dl_life/life.html",controller:"dllifectrl"}).state("add",{url:"/add",templateUrl:"controllers/dl_add/add.html",controller:"dladdctrl"}).state("edit",{url:"/edit",templateUrl:"controllers/dl_add/add.html",controller:"dleditctrl"}).state("aboutme",{url:"/about-me",templateUrl:"controllers/dl_add/about-me.html",controller:"dlaboutctrl"}),e.otherwise("/home")}]),angular.module("app").controller("dlbasectrl",["$rootScope","$scope","$http","$location","$window","$filter","$compile","$state",function(t,e,n,i,r,o,a,s){t.seo={pagetitle:"主页",des:"Wesson Charles的博客，前端技术，UIUE，和生活琐碎"};var l=this;if(l.url=r.url,l.rparam=s.params,console.log(l.rparam),e.loadall=function(e){e=e||1,console.log(n.get(APIS+"/api/all?page="+e)),n.get(APIS+"/api/all?page="+e).then(function(n){console.log(n),t.bloglists=n.data.list,t.page={pageIndex:e,pageTotal:Math.ceil(n.data.count/30)},console.log(t)}),n.get(APIS+"/api/alltags").then(function(e){var n=e.data.tags,i=[];if(n)for(var r=0;r<n.length;r++)i=i.concat(n[r].tags);for(var o={},a=[],r=0;r<i.length;r++){var s=i[r].label?o[i[r].label]:o[i[r]];!s&&a.length<16&&(i[r].label?(o[i[r].label]=!0,a.push(i[r].label)):(o[i[r]]=!0,a.push(i[r])))}t.alltags=a})},e.loadall(),e.remove=function(){n.get(APIS+"/api/tech/delete").then(function(t){console.log(t),n.get(APIS+"/api/tech?type=tech").then(function(t){console.log("...")})})},e.jumppage=function(n){var i=0;"last"==n&&(t.page.pageIndex||(t.page.pageIndex=1),i=t.page.pageIndex-1,i>0&&e.loadall(i)),"next"==n&&(t.page.pageIndex||(t.page.pageIndex=1),t.page.pageTotal||(t.page.pageTotal=1),i=t.page.pageIndex+1,i>0&&i<=t.page.pageTotal&&e.loadall(i))},l.gettypedata=function(e){n.get(APIS+"/api/query?"+e).then(function(e){t.bloglists=e.data.query})},l.rparam.query)switch(l.rparam.query){case"tech":l.gettypedata("type=tech&exclude=ui_ue");break;case"ui-ue":l.gettypedata("type=tech&subtype=ui_ue");break;case"pic-word":l.gettypedata("type=life&subtype=pic-word");break;default:l.gettypedata("type=life&subtype=read-and-know")}l.rparam.tag&&l.gettypedata("tag="+l.rparam.tag)}]).controller("dlarticlectrl",["$rootScope","$scope","$state","$http","$compile","$timeout","$location",function(t,e,n,i,r,o,a){console.log(n);var s=/<[^>]*>|<\/[^>]*>/gm;t.cover=!0;var l="";if(t.bloglists){for(var c=0;c<t.bloglists.length;c++)if(t.bloglists[c]._id==n.params.id){e.one=t.bloglists[c];break}var u=e.one.summary.replace(s,"");l=u,t.seo={pagetitle:e.one.title,des:u}}else console.log("222"),i.get(APIS+"/api/one/"+n.params.id).then(function(n){e.one=n.data.blog,console.log(n.blog);var i=r('<div onview data-type="maincon" data-content="{{one.content}}"></div>'),o=i(e);$("#articlecon").html(o);var a=e.one.summary.replace(s,"");l=a,t.seo={pagetitle:e.one.title,des:a}});t.blogid=n.params.id,e.share=function(t,n){var i={title:e.one.title,url:a.absUrl(),summary:l,pic:e.one.thumb};bShare.addEntry(i),bShare.share(t,n,bShare.entries.length-1)},o(function(){var t=window.location.href;if(t.indexOf("#")>-1){var e=t.split("#")[1];$("html,body").animate({scrollTop:$("#"+e)[0].offsetTop})}else $("html,body").animate({scrollTop:0});$("pre").each(function(t,e){$(this).addClass("prettyprint")})},500),e.postcom=function(t){t.time=new Date,console.log(t),i.post(APIS+"/api/article/comment",{id:e.one._id,comment:t}).then(function(n){5==n.data.message.code&&(e.one.comments||(e.one.comments=[]),e.one.comments.push(t))})},e.edit=function(t){a.path("/edit/"+t._id+"?type="+t.type)},e.remove=function(t){confirm("您确定要删除这篇文章吗？三思啊")&&i["delete"](APIS+"/api/article/delete?_id="+t._id).then(function(t){5==t.data.code&&($window.location.href="/")})},e.sharetowechat=function(t,e,n,i){WeixinJSBridge.invoke("shareTimeline",{img_url:t,link:"/article/"+e,desc:n,title:i})}}]),angular.module("app").controller("dllifectrl",["$rootScope","$scope","$http","$state","$location","$window","$filter","$compile",function(t,e,n,i,r,o,a,s){t.seo={pagetitle:"生活杂谈分类",des:"读书，学习分享，闲言碎语"},console.log("life_ctrl"),e.loadall=function(r){r=r||1,console.log(i.params);var o=APIS+"/api/tech",a="?type=life&page="+r;i.params.type&&(a+="&subtype="+i.params.type),n.get(o+a).then(function(n){e.bloglists=n.data.list,t.page={pageIndex:r,pageTotal:Math.ceil(list.count/30)}})},e.loadall(),e.jumppage=function(n){var i=0;"last"==n&&(t.page.pageIndex||(t.page.pageIndex=1),i=t.page.pageIndex-1,i>0&&e.loadall(i)),"next"==n&&(t.page.pageIndex||(t.page.pageIndex=1),t.page.pageTotal||(t.page.pageTotal=1),i=t.page.pageIndex+1,i>0&&i<=t.page.pageTotal&&e.loadall(i))}}]),angular.module("app").controller("dltechctrl",["$rootScope","$scope","$http","$state","$location","$window","$filter","$compile",function(t,e,n,i,r,o,a,s){t.seo={pagetitle:"前端技术分类",des:"关于前端的各种技术，html5,css3,angular,nodejs,UI,UE,Ionic"},console.log("tech_ctrl"),e.loadall=function(r){r=r||1,console.log(i.params);var o=APIS+"/api/tech",a="?type=tech&page="+r;"html-css"==i.params.type&&(i.params.type="html_css"),"javascript"==i.params.type&&(i.params.type="js"),i.params.type&&(a+="&tag="+i.params.type),n.get(o+a).then(function(n){e.bloglists=n.data.list,t.page={pageIndex:r,pageTotal:Math.ceil(list.count/30)}})},e.loadall(),e.jumppage=function(n){var i=0;"last"==n&&(t.page.pageIndex||(t.page.pageIndex=1),i=t.page.pageIndex-1,i>0&&e.loadall(i)),"next"==n&&(t.page.pageIndex||(t.page.pageIndex=1),t.page.pageTotal||(t.page.pageTotal=1),i=t.page.pageIndex+1,i>0&&i<=t.page.pageTotal&&e.loadall(i))}}]),angular.module("app").factory("AuthService",["$rootScope","$http","$window","$location",function(t,e,n,i){var r={};t.keystone_url="http://keystone.halfss.com:5000/v2.0",t.keystone_roleid="16131b070578418b9c9b4c3b8f0518e9",t.keystone_adminid="e47c841a35c144169c45f3f38564445c";var o=t.keystone_url;return r.login=function(t,i){return e.post(o+"/tokens",t).then(function(r){return r?(e.defaults.headers.common["X-Auth-Token"]=r.data.access.token.id,void e.get(o+"/tenants").then(function(r){t.auth.tenantName=r.data.tenants[0].name;var a=r.data;e.post(o+"/tokens",t).then(function(e){if(i){var r=t.auth.passwordCredentials.username,o=t.auth.passwordCredentials.password;Opstack.setCookie("opstacklight",encodeURIComponent(r)+"&"+encodeURIComponent(o))}for(var s,l=e.data.access.serviceCatalog,c=[],u=["audit","image","base","object-store","identity"].join(),h=0,d=l;h<d.length;h++)-1==u.indexOf(d[h].type)&&c.push(d[h].type);s=c[0],e.data.access.tenants=a.tenants,n.sessionStorage.setItem("userInfo",JSON.stringify(e.data)),window.sessionStorage.setItem("islogin",JSON.stringify(e.data)),n.sessionStorage.setItem("currentApp",s),n.location.href="/"+s})})):void Opstack.showStatus("登陆名或者密码错误",3)})},r.isAuthenticated=function(){return!!n.sessionStorage.getItem("userInfo")},r.getInfo=function(){return n.sessionStorage.getItem("userInfo")},r.setCurrentApp=function(t){return n.sessionStorage.setItem("currentApp",t)},r.getCurrentApp=function(t){return n.sessionStorage.getItem("currentApp")},r.logout=function(){return n.sessionStorage.removeItem("userInfo"),window.sessionStorage.removeItem("islogin"),$("#big_shade").remove(),n.location.href="/login"},r}]).factory("superCache",["$cacheFactory",function(t){return t("super-cache")}]).factory("customExtend",["$rootScope","$http","$window","$location",function(t,e,n,i){window.Extend=window.Extend||{},Extend.handle={};var r,o=0;Extend.cropperDialog=function(t){var e="up_frame_"+o,n=$(['<div class="ui standard small test modal" id="cropper">','<i class="close icon"></i>','<div class="header">裁剪</div>','<div class="content ui form segment">','<div class="field">',' <label for="">图片</label>','<div style="margin-bottom:10px;float:left;width:'+(t.width||t.size||128)+"px;height:"+(t.height||t.size||128)+'px;"><img style="height:100%;width:100%;" id="crop_avator" src="+opts.avatorpath+"></div>','<div><iframe style="display:none" id="'+e+'" name="'+e+'"></iframe></div>',"</div>",'<div class="field">','<form target="'+e+'" method="post"> enctyep="multipart/form-data" id="prologo_crop">','<div style="display: inline-block;margin: 3px 5px;padding: 4px 16px;"><i id="crop_first_button"></i></div>','<div class="ui small teal button" id="recrop_button">重新裁剪</div>','<div class="ui small teal button" style="margin:10px 20px;" id="crop_sure_button">确  定</div>',"</form>"," </div>"," </div>"," </form>","	</div>"].join(""));n.appendTo(document.body),n.modal("show"),$(document.body).delegate("#cropper #crop_sure_button","click",function(){t.onSure&&t.onSure(t.croprs)}).delegate("#cropper #recrop_button","click",function(){r?Extend.showCropDialog(r,t,function(e){e.code>0?(t.croprs=e.data,$("img#crop_avator").attr("src",e.data.src+"?t_"+(new Date).getTime())):alert(e.message)}):alert("请先上传图片")}),r=""},Extend.imageUpload=function(t){var e="up_cbk_"+o,n="up_frame_"+o,i=$(['<div class="ui standard small test modal" id="tab">','<i class="close icon"></i>','<div class="header">上传</div>','<div class="content ui form segment">','<div class="ui pointing secondary menu teal top" id="tabs">',' <a data-tab="netup" class="item active" >网络上传</a>',' <a data-tab="localup" class="item" >本地上传</a>',"</div>",'<div data-tab="netup" class="ui tab active">','<div class="ui labeled input">',' <div class="ui label">http:// </div>',' <input type="text" required="" name="img_url" placeholder="mysite.com" class="ng-pristine ng-invalid ng-invalid-required">'," </div>","</div>",' <div data-tab="localup" class="ui tab">',' <div><iframe style="display:none" id="'+n+'" name="'+n+'"></iframe></div>','<form action="/api/common/imageupload"  target="'+n+'" method="post" enctype="multipart/form-data">   ','<input type="hidden" name="upload_dir" value="'+t.upload_dir+'"/>','<input type="hidden" name="callback" value="'+e+'"/>','<div class="ui button teal" id="crop_sure_button">确  定</div>','<div class="ui button teal" id="upfilebtn">本地上传</div>','<input type="file" name="imgFile" style="position: absolute; opacity: 0; font-size: 20px; cursor: pointer; top: 59px; left: 85px; width: 84px;" accept="image/*"/>',"</form>","</div></div></div>"].join(""));$(document.body).find("#tab").remove(),i.appendTo(document.body),i.find("#tabs .item").tab();var r;Extend.handle[e]=function(e){t.onupload&&t.onupload(e),r=e,t.title="裁剪图片",t.aspectRatio=0,t.size=!1,Extend.showCropDialog(e,t,function(e,n){alert(e.code),e.code>0?(t.croprs=e.data,t.onSure&&(n.modal("hide"),t.onSure({url:e.data.src}))):alert(e.message)},!1)},i.modal("show"),$(document.body).delegate("#tab input[type='file']","change",function(){$("#tab").find("input[name=path]").val($(this).val()),$("#tab").find("form")[0].submit()}).delegate("#tab #crop_sure_button","click",function(){t.onSure&&t.onSure({url:$("#tab").find("input[name='img_url']").val()})}).delegate("#tab #upfilebtn","click",function(){$(this).parent().find("input[type='file']").click()})},Extend.showCropDialog=function(t,e,n,i){var r=$(['<div class="ui standard small test modal" id="tab">',' <i class="close icon"></i>',' <div class="header">确认图片</div>',' <div class="content ui form segment">','<div class="field">','<label for="">图片</label>','<img src="'+t.url.split("app")[1]+'" style="max-height:470px;max-width:570px;visibility:visible;">',"</div>",'<div class="field">','<div class="ui button teal" id="img_crop_sure">确  定</div>',"</div>","</div></div>"].join(""));$(document.body).find("#tab").remove(),r.appendTo(document.body),r.modal("show");var o,a=r;e.height=e.height||e.size||a.find("img").height(),e.width=e.width||e.size||a.find("img").width();var s,l,c,u;if(i){s=100,c=s+e.width,l=100,u=l+e.height;var h=a.find("img")[0],d=h.offsetWidth,f=h.offsetHeight;c>d&&(c=d,s=c-e.width,0>s&&(s=0)),u>f&&(u=f,l=u-e.height,0>l&&(l=0))}else s=0,l=0,c=a.find("img").width(),u=a.find("img").height();a.find("img").Jcrop({aspectRatio:void 0===e.aspectRatio?1:e.aspectRatio,setSelect:[s,l,c,u]},function(){o=this}),a.find("#img_crop_sure").click(function(){if(o){var i=a.find(".jcrop-holder img")[0],r=i.offsetWidth/i.naturalWidth;Extend.cropcallback=function(t){o=null,"function"==typeof n&&n(t,a),"function"==typeof e.onSure&&e.onSure(t)},$.ajax({async:!1,type:"get",url:"/api/common/imagecrop",data:"type="+e.imageType+"&_id="+e.targetId+"&path="+t.url+"&zoom="+r+"&size="+e.size+"&width="+e.width+"&height="+e.height+"&pos="+JSON.stringify(o.tellSelect()),dataType:"jsonp"})}})}}]).factory("Restful",["$resource",function(t){return t(url,{},{})}]),angular.module("app").directive("onview",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){t(function(){if(i.type&&"maincon"==i.type){var t=new showdown.Converter({tables:!0});i.content=t.makeHtml(i.content)}var e={};e.HtmlUtil={htmlEncode:function(t){var e=document.createElement("div");void 0!=e.textContent?e.textContent=t:e.innerText=t;var n=e.innerHTML;return e=null,n},htmlDecode:function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.innerText||e.textContent;return e=null,n}},e.videoreg=/(&lt;video.+\/video&gt;)|(&lt;embed.+\/embed&gt;)/g,e.result=i.content.match(e.videoreg),e.nresult=e.HtmlUtil.htmlDecode(e.result),e.ncon=i.content.replace(e.videoreg,e.nresult),e.ncon=e.ncon.replace(/<img[^>]+src="[^"]+"[^>]*>/,""),i.content&&$(n).html($(e.ncon))},0)}}}]).directive("dropdown",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){t(function(){$(n).dropdown()})}}}]).directive("tab",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){t(function(){$(n).tab()})}}}]).directive("comment",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){t(function(){console.log(i);var t=i.arid,e=i.artitle;console.log(t);var r=t,o=window.location.href,a="http://www.chqiangs.com/article/"+t,s=document.createElement("div");s.setAttribute("data-thread-key",r),s.setAttribute("data-url",o),s.setAttribute("data-title",e),s.setAttribute("data-author-key",a),$(n).find("hr").after(s)})}}}]).directive("checkbox",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){t(function(){$(n).checkbox(),$(n).on("change",function(){"lifeismine"==$(this).attr("id")&&e.$apply(function(){e.life.ismine=!e.life.ismine})})})}}}]).directive("faComment",["$timeout",function(t){return{restrict:"C",link:function(e,n,i){t(function(){var t=$(n).parent().attr("href").split("/")[$(n).parent().attr("href").split("/").length-1].split("#")[0],e=document.createElement("span");e.className="ds-thread-count",e.setAttribute("data-thread-key",t),$(n).html(e)},0)}}}]).directive("recentComment",["$timeout",function(t){return{restrict:"A",link:function(t,e,n){var i=document.createElement("div");i.setAttribute("data-num-items",4),i.setAttribute("data-show-avatars",0),i.setAttribute("data-show-time",0),i.setAttribute("data-show-title",1),i.setAttribute("data-show-admin",1),i.setAttribute("data-excerpt-length",70),i.className="ds-recent-comments",$(e).find("h6").after(i)}}}]).directive("popularPost",["$timeout",function(t){return{restrict:"A",link:function(t,e,n){var i=document.createElement("ul");i.setAttribute("data-range","weekly"),i.setAttribute("data-num-items",5),i.className="ds-top-threads",$(e).html(i)}}}]).directive("ukHtmleditor",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){$(document).ready(function(){t(function(){console.log($(n)),console.log(window.UIkit),window.UIkit.htmleditor($(n),{mode:"split",markdown:!0,maxsplitsize:350,lblCodeview:"Markdown",lblPreview:"Preview"})},1e3)})}}}]),!function(){var t=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(t){function e(t){var e=t.charCodeAt(0);if(92!==e)return e;var n=t.charAt(1);return(e=h[n])?e:n>="0"&&"7">=n?parseInt(t.substring(1),8):"u"===n||"x"===n?parseInt(t.substring(2),16):t.charCodeAt(1)}function n(t){return 32>t?(16>t?"\\x0":"\\x")+t.toString(16):(t=String.fromCharCode(t),"\\"===t||"-"===t||"]"===t||"^"===t?"\\"+t:t)}function i(t){var i=t.substring(1,t.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),t=[],r="^"===i[0],o=["["];r&&o.push("^");for(var r=r?1:0,a=i.length;a>r;++r){var s=i[r];if(/\\[bdsw]/i.test(s))o.push(s);else{var l,s=e(s);a>r+2&&"-"===i[r+1]?(l=e(i[r+2]),r+=2):l=s,t.push([s,l]),65>l||s>122||(65>l||s>90||t.push([32|Math.max(65,s),32|Math.min(l,90)]),97>l||s>122||t.push([-33&Math.max(97,s),-33&Math.min(l,122)]))}}for(t.sort(function(t,e){return t[0]-e[0]||e[1]-t[1]}),i=[],a=[],r=0;r<t.length;++r)s=t[r],s[0]<=a[1]+1?a[1]=Math.max(a[1],s[1]):i.push(a=s);for(r=0;r<i.length;++r)s=i[r],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function r(t){for(var e=t.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),r=e.length,s=[],l=0,c=0;r>l;++l){var u=e[l];"("===u?++c:"\\"===u.charAt(0)&&(u=+u.substring(1))&&(c>=u?s[u]=-1:e[l]=n(u))}for(l=1;l<s.length;++l)-1===s[l]&&(s[l]=++o);for(c=l=0;r>l;++l)u=e[l],"("===u?(++c,s[c]||(e[l]="(?:")):"\\"===u.charAt(0)&&(u=+u.substring(1))&&c>=u&&(e[l]="\\"+s[u]);for(l=0;r>l;++l)"^"===e[l]&&"^"!==e[l+1]&&(e[l]="");if(t.ignoreCase&&a)for(l=0;r>l;++l)u=e[l],t=u.charAt(0),u.length>=2&&"["===t?e[l]=i(u):"\\"!==t&&(e[l]=u.replace(/[A-Za-z]/g,function(t){return t=t.charCodeAt(0),"["+String.fromCharCode(-33&t,32|t)+"]"}));return e.join("")}for(var o=0,a=!1,s=!1,l=0,c=t.length;c>l;++l){var u=t[l];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,s=!1;break}}for(var h={b:8,t:9,n:10,v:11,f:12,r:13},d=[],l=0,c=t.length;c>l;++l){if(u=t[l],u.global||u.multiline)throw Error(""+u);d.push("(?:"+r(u)+")")}return RegExp(d.join("|"),s?"gi":"g")}function n(t,e){function n(t){var l=t.nodeType;if(1==l){if(!i.test(t.className)){for(l=t.firstChild;l;l=l.nextSibling)n(l);l=t.nodeName.toLowerCase(),"br"!==l&&"li"!==l||(r[s]="\n",a[s<<1]=o++,a[s++<<1|1]=t)}}else 3!=l&&4!=l||(l=t.nodeValue,l.length&&(l=e?l.replace(/\r\n?/g,"\n"):l.replace(/[\t\n\r ]+/g," "),r[s]=l,a[s<<1]=o,o+=l.length,a[s++<<1|1]=t))}var i=/(?:^|\s)nocode(?:\s|$)/,r=[],o=0,a=[],s=0;return n(t),{a:r.join("").replace(/\n$/,""),d:a}}function i(t,e,n,i){e&&(t={a:e,e:t},n(t),i.push.apply(i,t.g))}function r(t){for(var e=void 0,n=t.firstChild;n;n=n.nextSibling)var i=n.nodeType,e=1===i?e?t:n:3===i&&k.test(n.nodeValue)?t:e;return e===t?void 0:e}function o(n,r){function o(t){for(var e=t.e,n=[e,"pln"],u=0,h=t.a.match(a)||[],d={},f=0,p=h.length;p>f;++f){var g,m=h[f],v=d[m],b=void 0;if("string"==typeof v)g=!1;else{var y=s[m.charAt(0)];if(y)b=m.match(y[1]),v=y[0];else{for(g=0;l>g;++g)if(y=r[g],b=m.match(y[1])){v=y[0];break}b||(v="pln")}!(g=v.length>=5&&"lang-"===v.substring(0,5))||b&&"string"==typeof b[1]||(g=!1,v="src"),g||(d[m]=v)}if(y=u,u+=m.length,g){g=b[1];var w=m.indexOf(g),k=w+g.length;b[2]&&(k=m.length-b[2].length,w=k-g.length),v=v.substring(5),i(e+y,m.substring(0,w),o,n),i(e+y+w,g,c(v,g),n),i(e+y+k,m.substring(k),o,n)}else n.push(e+y,v)}t.g=n}var a,s={};!function(){for(var i=n.concat(r),o=[],l={},c=0,u=i.length;u>c;++c){var h=i[c],d=h[3];if(d)for(var f=d.length;--f>=0;)s[d.charAt(f)]=h;h=h[1],d=""+h,l.hasOwnProperty(d)||(o.push(h),l[d]=t)}o.push(/[\S\s]/),a=e(o)}();var l=r.length;return o}function a(e){var n=[],i=[];e.tripleQuotedStrings?n.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,t,"'\""]):e.multiLineStrings?n.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,t,"'\"`"]):n.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,t,"\"'"]),e.verbatimStrings&&i.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,t]);var r=e.hashComments;if(r&&(e.cStyleComments?(r>1?n.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,t,"#"]):n.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,t,"#"]),i.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,t])):n.push(["com",/^#[^\n\r]*/,t,"#"])),e.cStyleComments&&(i.push(["com",/^\/\/[^\n\r]*/,t]),i.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,t])),r=e.regexLiterals){var a=(r=r>1?"":"\n\r")?".":"[\\S\\s]";i.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+r+"])(?:[^/\\x5B\\x5C"+r+"]|\\x5C"+a+"|\\x5B(?:[^\\x5C\\x5D"+r+"]|\\x5C"+a+")*(?:\\x5D|$))+/")+")")])}return(r=e.types)&&i.push(["typ",r]),r=(""+e.keywords).replace(/^ | $/g,""),r.length&&i.push(["kwd",RegExp("^(?:"+r.replace(/[\s,]+/g,"|")+")\\b"),t]),n.push(["pln",/^\s+/,t," \r\n	 "]),r="^.[^\\s\\w.$@'\"`/\\\\]*",e.regexLiterals&&(r+="(?!s*/)"),i.push(["lit",/^@[$_a-z][\w$@]*/i,t],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,t],["pln",/^[$_a-z][\w$@]*/i,t],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,t,"0123456789"],["pln",/^\\[\S\s]?/,t],["pun",RegExp(r),t]),o(n,i)}function s(t,e,n){function i(t){var e=t.nodeType;if(1!=e||o.test(t.className)){if((3==e||4==e)&&n){var l=t.nodeValue,c=l.match(a);c&&(e=l.substring(0,c.index),t.nodeValue=e,(l=l.substring(c.index+c[0].length))&&t.parentNode.insertBefore(s.createTextNode(l),t.nextSibling),r(t),e||t.parentNode.removeChild(t))}}else if("br"===t.nodeName)r(t),t.parentNode&&t.parentNode.removeChild(t);else for(t=t.firstChild;t;t=t.nextSibling)i(t)}function r(t){function e(t,n){var i=n?t.cloneNode(!1):t,r=t.parentNode;if(r){var r=e(r,1),o=t.nextSibling;r.appendChild(i);for(var a=o;a;a=o)o=a.nextSibling,r.appendChild(a)}return i}for(;!t.nextSibling;)if(t=t.parentNode,!t)return;for(var n,t=e(t.nextSibling,0);(n=t.parentNode)&&1===n.nodeType;)t=n;c.push(t)}for(var o=/(?:^|\s)nocode(?:\s|$)/,a=/\r\n?|\n/,s=t.ownerDocument,l=s.createElement("li");t.firstChild;)l.appendChild(t.firstChild);for(var c=[l],u=0;u<c.length;++u)i(c[u]);e===(0|e)&&c[0].setAttribute("value",e);var h=s.createElement("ol");h.className="linenums";
for(var e=Math.max(0,e-1|0)||0,u=0,d=c.length;d>u;++u)l=c[u],l.className="L"+(u+e)%10,l.firstChild||l.appendChild(s.createTextNode(" ")),h.appendChild(l);t.appendChild(h)}function l(t,e){for(var n=e.length;--n>=0;){var i=e[n];C.hasOwnProperty(i)?h.console&&console.warn("cannot override language handler %s",i):C[i]=t}}function c(t,e){return t&&C.hasOwnProperty(t)||(t=/^\s*</.test(e)?"default-markup":"default-code"),C[t]}function u(t){var e=t.h;try{var i=n(t.c,t.i),r=i.a;t.a=r,t.d=i.d,t.e=0,c(e,r)(t);var o=/\bMSIE\s(\d+)/.exec(navigator.userAgent),o=o&&+o[1]<=8,e=/\n/g,a=t.a,s=a.length,i=0,l=t.d,u=l.length,r=0,d=t.g,f=d.length,p=0;d[f]=s;var g,m;for(m=g=0;f>m;)d[m]!==d[m+2]?(d[g++]=d[m++],d[g++]=d[m++]):m+=2;for(f=g,m=g=0;f>m;){for(var v=d[m],b=d[m+1],y=m+2;f>=y+2&&d[y+1]===b;)y+=2;d[g++]=v,d[g++]=b,m=y}d.length=g;var w,k=t.c;k&&(w=k.style.display,k.style.display="none");try{for(;u>r;){var x,C=l[r+2]||s,S=d[p+2]||s,y=Math.min(C,S),$=l[r+1];if(1!==$.nodeType&&(x=a.substring(i,y))){o&&(x=x.replace(e,"\r")),$.nodeValue=x;var L=$.ownerDocument,T=L.createElement("span");T.className=d[p+1];var M=$.parentNode;M.replaceChild(T,$),T.appendChild($),C>i&&(l[r+1]=$=L.createTextNode(a.substring(y,C)),M.insertBefore($,T.nextSibling))}i=y,i>=C&&(r+=2),i>=S&&(p+=2)}}finally{k&&(k.style.display=w)}}catch(A){h.console&&console.log(A&&A.stack||A)}}var h=window,d=["break,continue,do,else,for,if,return,while"],f=[[d,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],p=[f,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],g=[f,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],m=[g,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],f=[f,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],v=[d,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],b=[d,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],y=[d,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],d=[d,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],w=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,k=/\S/,x=a({keywords:[p,m,f,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",v,b,d],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),C={};l(x,["default-code"]),l(o([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(o([["pln",/^\s+/,t," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,t,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'\/>]|\/(?=\s)))/],["pun",/^[\/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),l(o([],[["atv",/^[\S\s]+/]]),["uq.val"]),l(a({keywords:p,hashComments:!0,cStyleComments:!0,types:w}),["c","cc","cpp","cxx","cyc","m"]),l(a({keywords:"null,true,false"}),["json"]),l(a({keywords:m,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:w}),["cs"]),l(a({keywords:g,cStyleComments:!0}),["java"]),l(a({keywords:d,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),l(a({keywords:v,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),l(a({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),l(a({keywords:b,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),l(a({keywords:f,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),l(a({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(a({keywords:y,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),l(o([],[["str",/^[\S\s]+/]]),["regex"]);var S=h.PR={createSimpleLexer:o,registerLangHandler:l,sourceDecorator:a,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:h.prettyPrintOne=function(t,e,n){var i=document.createElement("div");return i.innerHTML="<pre>"+t+"</pre>",i=i.firstChild,n&&s(i,n,!0),u({h:e,j:n,c:i,i:1}),i.innerHTML},prettyPrint:h.prettyPrint=function(e,n){function i(){for(var n=h.PR_SHOULD_USE_CONTINUATION?p.now()+250:1/0;m<l.length&&p.now()<n;m++){for(var o=l[m],c=C,d=o;d=d.previousSibling;){var f=d.nodeType,S=(7===f||8===f)&&d.nodeValue;if(S?!/^\??prettify\b/.test(S):3!==f||/\S/.test(d.nodeValue))break;if(S){c={},S.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(t,e,n){c[e]=n});break}}if(d=o.className,(c!==C||b.test(d))&&!y.test(d)){for(f=!1,S=o.parentNode;S;S=S.parentNode)if(x.test(S.tagName)&&S.className&&b.test(S.className)){f=!0;break}if(!f){if(o.className+=" prettyprinted",f=c.lang,!f){var $,f=d.match(v);!f&&($=r(o))&&k.test($.tagName)&&(f=$.className.match(v)),f&&(f=f[1])}if(w.test(o.tagName))S=1;else var S=o.currentStyle,L=a.defaultView,S=(S=S?S.whiteSpace:L&&L.getComputedStyle?L.getComputedStyle(o,t).getPropertyValue("white-space"):0)&&"pre"===S.substring(0,3);L=c.linenums,(L="true"===L||+L)||(L=(L=d.match(/\blinenums\b(?::(\d+))?/))?L[1]&&L[1].length?+L[1]:!0:!1),L&&s(o,L,S),g={h:f,c:o,j:L,i:S},u(g)}}}m<l.length?setTimeout(i,250):"function"==typeof e&&e()}for(var o=n||document.body,a=o.ownerDocument||document,o=[o.getElementsByTagName("pre"),o.getElementsByTagName("code"),o.getElementsByTagName("xmp")],l=[],c=0;c<o.length;++c)for(var d=0,f=o[c].length;f>d;++d)l.push(o[c][d]);var o=t,p=Date;p.now||(p={now:function(){return+new Date}});var g,m=0,v=/\blang(?:uage)?-([\w.]+)(?!\S)/,b=/\bprettyprint\b/,y=/\bprettyprinted\b/,w=/pre|xmp/i,k=/^code$/i,x=/^(?:pre|code|xmp)$/i,C={};i()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return S})}()}(),!function(t){if("function"==typeof define&&define.amd&&define("uikit",function(){var e=window.UIkit||t(window,window.jQuery,window.document);return e.load=function(t,n,i,r){var o,a=t.split(","),s=[],l=(r.config&&r.config.uikit&&r.config.uikit.base?r.config.uikit.base:"").replace(/\/+$/g,"");if(!l)throw new Error("Please define base path to UIkit in the requirejs config.");for(o=0;o<a.length;o+=1){var c=a[o].replace(/\./g,"/");s.push(l+"/components/"+c)}n(s,function(){i(e)})},e}),!window.jQuery)throw new Error("UIkit requires jQuery");window&&window.jQuery&&t(window,window.jQuery,window.document)}(function(t,e,n){var i={},r=t.UIkit?Object.create(t.UIkit):void 0;if(i.version="2.23.0",i.noConflict=function(){return r&&(t.UIkit=r,e.UIkit=r,e.fn.uk=r.fn),i},i.prefix=function(t){return t},i.$=e,i.$doc=i.$(document),i.$win=i.$(window),i.$html=i.$("html"),i.support={},i.support.transition=function(){var t=function(){var t,e=n.body||n.documentElement,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}(),i.support.animation=function(){var t=function(){var t,e=n.body||n.documentElement,i={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}(),function(){Date.now=Date.now||function(){return(new Date).getTime()};for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}(),i.support.touch="ontouchstart"in document||t.DocumentTouch&&document instanceof t.DocumentTouch||t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints>0||t.navigator.pointerEnabled&&t.navigator.maxTouchPoints>0||!1,i.support.mutationobserver=t.MutationObserver||t.WebKitMutationObserver||null,i.Utils={},i.Utils.isFullscreen=function(){return document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||!1},i.Utils.str2json=function(t,e){try{return e?JSON.parse(t.replace(/([\$\w]+)\s*:/g,function(t,e){return'"'+e+'":'}).replace(/'([^']+)'/g,function(t,e){return'"'+e+'"'})):new Function("","var json = "+t+"; return JSON.parse(JSON.stringify(json));")()}catch(n){return!1}},i.Utils.debounce=function(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||t.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}},i.Utils.removeCssRules=function(t){var e,n,i,r,o,a,s,l,c,u;t&&setTimeout(function(){try{for(u=document.styleSheets,r=0,s=u.length;s>r;r++){for(i=u[r],n=[],i.cssRules=i.cssRules,e=o=0,l=i.cssRules.length;l>o;e=++o)i.cssRules[e].type===CSSRule.STYLE_RULE&&t.test(i.cssRules[e].selectorText)&&n.unshift(e);for(a=0,c=n.length;c>a;a++)i.deleteRule(n[a])}}catch(h){}},0)},i.Utils.isInView=function(t,n){var r=e(t);if(!r.is(":visible"))return!1;var o=i.$win.scrollLeft(),a=i.$win.scrollTop(),s=r.offset(),l=s.left,c=s.top;return n=e.extend({topoffset:0,leftoffset:0},n),c+r.height()>=a&&c-n.topoffset<=a+i.$win.height()&&l+r.width()>=o&&l-n.leftoffset<=o+i.$win.width()},i.Utils.checkDisplay=function(t,n){var r=i.$("[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]",t||document);return t&&!r.length&&(r=e(t)),r.trigger("display.uk.check"),n&&("string"!=typeof n&&(n='[class*="uk-animation-"]'),r.find(n).each(function(){var t=i.$(this),e=t.attr("class"),n=e.match(/uk\-animation\-(.+)/);t.removeClass(n[0]).width(),t.addClass(n[0])})),r},i.Utils.options=function(t){if(e.isPlainObject(t))return t;var n=t?t.indexOf("{"):-1,r={};if(-1!=n)try{r=i.Utils.str2json(t.substr(n))}catch(o){}return r},i.Utils.animate=function(t,n){var r=e.Deferred();return t=i.$(t),n=n,t.css("display","none").addClass(n).one(i.support.animation.end,function(){t.removeClass(n),r.resolve()}).width(),t.css("display",""),r.promise()},i.Utils.uid=function(t){return(t||"id")+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())},i.Utils.template=function(t,e){for(var n,i,r,o,a=t.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),s=0,l=[],c=0;s<a.length;){if(n=a[s],n.match(/\{\{\s*(.+?)\s*\}\}/))switch(s+=1,n=a[s],i=n[0],r=n.substring(n.match(/^(\^|\#|\!|\~|\:)/)?1:0),i){case"~":l.push("for(var $i=0;$i<"+r+".length;$i++) { var $item = "+r+"[$i];"),c++;break;case":":l.push("for(var $key in "+r+") { var $val = "+r+"[$key];"),c++;break;case"#":l.push("if("+r+") {"),c++;break;case"^":l.push("if(!"+r+") {"),c++;break;case"/":l.push("}"),c--;break;case"!":l.push("__ret.push("+r+");");break;default:l.push("__ret.push(escape("+r+"));")}else l.push("__ret.push('"+n.replace(/\'/g,"\\'")+"');");s+=1}return o=new Function("$data",["var __ret = [];","try {","with($data){",c?'__ret = ["Not all blocks are closed correctly."]':l.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n")),e?o(e):o},i.Utils.events={},i.Utils.events.click=i.support.touch?"tap":"click",t.UIkit=i,i.fn=function(t,n){var r=arguments,o=t.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),a=o[1],s=o[2];return i[a]?this.each(function(){var t=e(this),o=t.data(a);o||t.data(a,o=i[a](this,s?void 0:n)),s&&o[s].apply(o,Array.prototype.slice.call(r,1))}):(e.error("UIkit component ["+a+"] does not exist."),this)},e.UIkit=i,e.fn.uk=i.fn,i.langdirection="rtl"==i.$html.attr("dir")?"right":"left",i.components={},i.component=function(t,n){var r=function(n,o){var a=this;return this.UIkit=i,this.element=n?i.$(n):null,this.options=e.extend(!0,{},this.defaults,o),this.plugins={},this.element&&this.element.data(t,this),this.init(),(this.options.plugins.length?this.options.plugins:Object.keys(r.plugins)).forEach(function(t){r.plugins[t].init&&(r.plugins[t].init(a),a.plugins[t]=!0)}),this.trigger("init.uk.component",[t,this]),this};return r.plugins={},e.extend(!0,r.prototype,{defaults:{plugins:[]},boot:function(){},init:function(){},on:function(t,e,n){return i.$(this.element||this).on(t,e,n)},one:function(t,e,n){return i.$(this.element||this).one(t,e,n)},off:function(t){return i.$(this.element||this).off(t)},trigger:function(t,e){return i.$(this.element||this).trigger(t,e)},find:function(t){return i.$(this.element?this.element:[]).find(t)},proxy:function(t,e){var n=this;e.split(" ").forEach(function(e){n[e]||(n[e]=function(){return t[e].apply(t,arguments)})})},mixin:function(t,e){var n=this;e.split(" ").forEach(function(e){n[e]||(n[e]=t[e].bind(n))})},option:function(){return 1==arguments.length?this.options[arguments[0]]||void 0:void(2==arguments.length&&(this.options[arguments[0]]=arguments[1]))}},n),this.components[t]=r,this[t]=function(){var n,r;if(arguments.length)switch(arguments.length){case 1:"string"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof jQuery?n=e(arguments[0]):r=arguments[0];break;case 2:n=e(arguments[0]),r=arguments[1]}return n&&n.data(t)?n.data(t):new i.components[t](n,r)},i.domready&&i.component.boot(t),r},i.plugin=function(t,e,n){this.components[t].plugins[e]=n},i.component.boot=function(t){i.components[t].prototype&&i.components[t].prototype.boot&&!i.components[t].booted&&(i.components[t].prototype.boot.apply(i,[]),i.components[t].booted=!0)},i.component.bootComponents=function(){for(var t in i.components)i.component.boot(t)},i.domObservers=[],i.domready=!1,i.ready=function(t){i.domObservers.push(t),i.domready&&t(document)},i.on=function(t,e,n){return t&&t.indexOf("ready.uk.dom")>-1&&i.domready&&e.apply(i.$doc),i.$doc.on(t,e,n)},i.one=function(t,e,n){return t&&t.indexOf("ready.uk.dom")>-1&&i.domready?(e.apply(i.$doc),i.$doc):i.$doc.one(t,e,n)},i.trigger=function(t,e){return i.$doc.trigger(t,e)},i.domObserve=function(t,e){i.support.mutationobserver&&(e=e||function(){},i.$(t).each(function(){var t=this,n=i.$(t);if(!n.data("observer"))try{var r=new i.support.mutationobserver(i.Utils.debounce(function(){e.apply(t,[]),n.trigger("changed.uk.dom")},50));r.observe(t,{childList:!0,subtree:!0}),n.data("observer",r)}catch(o){}}))},i.init=function(t){t=t||document,i.domObservers.forEach(function(e){e(t)})},i.on("domready.uk.dom",function(){i.init(),i.domready&&i.Utils.checkDisplay()}),e(function(){i.$body=i.$("body"),i.ready(function(){i.domObserve("[data-uk-observe]")}),i.on("changed.uk.dom",function(t){i.init(t.target),i.Utils.checkDisplay(t.target)}),i.trigger("beforeready.uk.dom"),i.component.bootComponents(),requestAnimationFrame(function(){var t,e={x:window.pageXOffset,y:window.pageYOffset},n=function(){(e.x!=window.pageXOffset||e.y!=window.pageYOffset)&&(t={x:0,y:0},window.pageXOffset!=e.x&&(t.x=window.pageXOffset>e.x?1:-1),window.pageYOffset!=e.y&&(t.y=window.pageYOffset>e.y?1:-1),e={dir:t,x:window.pageXOffset,y:window.pageYOffset},i.$doc.trigger("scrolling.uk.document",[e])),requestAnimationFrame(n)};return i.support.touch&&i.$html.on("touchmove touchend MSPointerMove MSPointerUp pointermove pointerup",n),(e.x||e.y)&&n(),n}()),i.trigger("domready.uk.dom"),i.support.touch&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&i.$win.on("load orientationchange resize",i.Utils.debounce(function(){var t=function(){return e(".uk-height-viewport").css("height",window.innerHeight),t};return t()}(),100)),i.trigger("afterready.uk.dom"),i.domready=!0}),i.$html.addClass(i.support.touch?"uk-touch":"uk-notouch"),i.support.touch){var o,a=!1,s="uk-hover",l=".uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover";i.$html.on("mouseenter touchstart MSPointerDown pointerdown",l,function(){a&&e("."+s).removeClass(s),a=e(this).addClass(s)}).on("mouseleave touchend MSPointerUp pointerup",function(t){o=e(t.target).parents(l),a&&a.not(o).removeClass(s)})}return i}),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){c=null,h.last&&(void 0!==h.el&&h.el.trigger("longTap"),h={})}function i(){c&&clearTimeout(c),c=null}function r(){a&&clearTimeout(a),s&&clearTimeout(s),l&&clearTimeout(l),c&&clearTimeout(c),a=s=l=c=null,h={}}function o(t){return t.pointerType==t.MSPOINTER_TYPE_TOUCH&&t.isPrimary}if(!t.fn.swipeLeft){var a,s,l,c,u,h={},d=750;t(function(){var f,p,g,m=0,v=0;"MSGesture"in window&&(u=new MSGesture,u.target=document.body),t(document).on("MSGestureEnd gestureend",function(t){var e=t.originalEvent.velocityX>1?"Right":t.originalEvent.velocityX<-1?"Left":t.originalEvent.velocityY>1?"Down":t.originalEvent.velocityY<-1?"Up":null;e&&void 0!==h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){("MSPointerDown"!=e.type||o(e.originalEvent))&&(g="MSPointerDown"==e.type||"pointerdown"==e.type?e:e.originalEvent.touches[0],f=Date.now(),p=f-(h.last||f),h.el=t("tagName"in g.target?g.target:g.target.parentNode),a&&clearTimeout(a),h.x1=g.pageX,h.y1=g.pageY,p>0&&250>=p&&(h.isDoubleTap=!0),h.last=f,c=setTimeout(n,d),!u||"MSPointerDown"!=e.type&&"pointerdown"!=e.type&&"touchstart"!=e.type||u.addPointer(e.originalEvent.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){("MSPointerMove"!=t.type||o(t.originalEvent))&&(g="MSPointerMove"==t.type||"pointermove"==t.type?t:t.originalEvent.touches[0],i(),h.x2=g.pageX,h.y2=g.pageY,m+=Math.abs(h.x1-h.x2),v+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(n){("MSPointerUp"!=n.type||o(n.originalEvent))&&(i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?l=setTimeout(function(){void 0!==h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e(h.x1,h.x2,h.y1,h.y2))),h={}},0):"last"in h&&(isNaN(m)||30>m&&30>v?s=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,void 0!==h.el&&h.el.trigger(e),h.isDoubleTap?(void 0!==h.el&&h.el.trigger("doubleTap"),h={}):a=setTimeout(function(){a=null,void 0!==h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={},m=v=0))}).on("touchcancel MSPointerCancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(n){return t(this).on(e,n)}})}}(jQuery),function(t){var e=[];t.component("stackMargin",{defaults:{cls:"uk-margin-small-top"},boot:function(){t.ready(function(e){t.$("[data-uk-margin]",e).each(function(){var e,n=t.$(this);n.data("stackMargin")||(e=t.stackMargin(n,t.Utils.options(n.attr("data-uk-margin"))))})})},init:function(){var n=this;this.columns=[],t.$win.on("resize orientationchange",function(){var e=function(){n.process()};return t.$(function(){e(),t.$win.on("load",e)}),t.Utils.debounce(e,20)}()),t.$html.on("changed.uk.dom",function(){n.process()}),this.on("display.uk.check",function(){this.element.is(":visible")&&this.process()}.bind(this)),e.push(this)},process:function(){return this.columns=this.element.children(),t.Utils.stackMargin(this.columns,this.options),this},revert:function(){return this.columns.removeClass(this.options.cls),this}}),function(){var e=[],n=function(t){if(t.is(":visible")){var e=t.parent().width(),n=t.data("width"),i=e/n,r=Math.floor(i*t.data("height"));t.css({height:n>e?r:t.data("height")})}};t.component("responsiveElement",{defaults:{},boot:function(){t.ready(function(e){t.$("iframe.uk-responsive-width, [data-uk-responsive]",e).each(function(){var e,n=t.$(this);n.data("responsiveIframe")||(e=t.responsiveElement(n,{}))})})},init:function(){var t=this.element;t.attr("width")&&t.attr("height")&&(t.data({width:t.attr("width"),height:t.attr("height")}).on("display.uk.check",function(){n(t)}),n(t),e.push(t))}}),t.$win.on("resize load",t.Utils.debounce(function(){e.forEach(function(t){n(t)})},15))}(),t.Utils.stackMargin=function(e,n){n=t.$.extend({cls:"uk-margin-small-top"},n),n.cls=n.cls,e=t.$(e).removeClass(n.cls);var i=!1,r=e.filter(":visible:first"),o=r.length?r.position().top+r.outerHeight()-1:!1;o!==!1&&e.each(function(){var e=t.$(this);e.is(":visible")&&(i?e.addClass(n.cls):e.position().top>=o&&(i=e.addClass(n.cls)))})},t.Utils.matchHeights=function(e,n){e=t.$(e).css("min-height",""),n=t.$.extend({row:!0},n);var i=function(e){if(!(e.length<2)){var n=0;e.each(function(){n=Math.max(n,t.$(this).outerHeight())}).each(function(){var e=t.$(this),i=n-("border-box"==e.css("box-sizing")?0:e.outerHeight()-e.height());e.css("min-height",i+"px")})}};n.row?(e.first().width(),setTimeout(function(){var n=!1,r=[];e.each(function(){var e=t.$(this),o=e.offset().top;o!=n&&r.length&&(i(t.$(r)),r=[],o=e.offset().top),r.push(e),n=o}),r.length&&i(t.$(r))},0)):i(e)},function(e){t.Utils.inlineSvg=function(n,i){t.$(n||'img[src$=".svg"]',i||document).each(function(){var n=t.$(this),i=n.attr("src");if(!e[i]){var r=t.$.Deferred();t.$.get(i,{nc:Math.random()},function(e){r.resolve(t.$(e).find("svg"))}),e[i]=r.promise()}e[i].then(function(e){var i=t.$(e).clone();n.attr("id")&&i.attr("id",n.attr("id")),n.attr("class")&&i.attr("class",n.attr("class")),n.attr("style")&&i.attr("style",n.attr("style")),n.attr("width")&&(i.attr("width",n.attr("width")),n.attr("height")||i.removeAttr("height")),n.attr("height")&&(i.attr("height",n.attr("height")),n.attr("width")||i.removeAttr("width")),n.replaceWith(i)})})},t.ready(function(e){t.Utils.inlineSvg("[data-uk-svg]",e)})}({})}(UIkit),function(t){function e(e,n){n=t.$.extend({duration:1e3,transition:"easeOutExpo",offset:0,complete:function(){}},n);var i=e.offset().top-n.offset,r=t.$doc.height(),o=window.innerHeight;i+o>r&&(i=r-o),t.$("html,body").stop().animate({scrollTop:i},n.duration,n.transition).promise().done(n.complete)}t.component("smoothScroll",{boot:function(){t.$html.on("click.smooth-scroll.uikit","[data-uk-smooth-scroll]",function(){var e=t.$(this);return e.data("smoothScroll")||(t.smoothScroll(e,t.Utils.options(e.attr("data-uk-smooth-scroll"))),e.trigger("click")),!1})},init:function(){var n=this;this.on("click",function(i){i.preventDefault(),e(t.$(this.hash).length?t.$(this.hash):t.$("body"),n.options)})}}),t.Utils.scrollToElement=e,t.$.easing.easeOutExpo||(t.$.easing.easeOutExpo=function(t,e,n,i,r){return e==r?n+i:i*(-Math.pow(2,-10*e/r)+1)+n})}(UIkit),function(t){var e=t.$win,n=t.$doc,i=[],r=function(){for(var t=0;t<i.length;t++)window.requestAnimationFrame.apply(window,[i[t].check])};t.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){n.on("scrolling.uk.document",r),e.on("load resize orientationchange",t.Utils.debounce(r,50)),t.ready(function(e){t.$("[data-uk-scrollspy]",e).each(function(){var e=t.$(this);e.data("scrollspy")||t.scrollspy(e,t.Utils.options(e.attr("data-uk-scrollspy")))})})},init:function(){var e,n=this,r=this.options.cls.split(/,/),o=function(){var i=n.options.target?n.element.find(n.options.target):n.element,o=1===i.length?1:0,a=0;i.each(function(){var i=t.$(this),s=i.data("inviewstate"),l=t.Utils.isInView(i,n.options),c=i.data("ukScrollspyCls")||r[a].trim();!l||s||i.data("scrollspy-idle")||(e||(i.addClass(n.options.initcls),n.offset=i.offset(),e=!0,i.trigger("init.uk.scrollspy")),i.data("scrollspy-idle",setTimeout(function(){i.addClass("uk-scrollspy-inview").toggleClass(c).width(),i.trigger("inview.uk.scrollspy"),i.data("scrollspy-idle",!1),i.data("inviewstate",!0)},n.options.delay*o)),o++),!l&&s&&n.options.repeat&&(i.data("scrollspy-idle")&&clearTimeout(i.data("scrollspy-idle")),i.removeClass("uk-scrollspy-inview").toggleClass(c),i.data("inviewstate",!1),i.trigger("outview.uk.scrollspy")),a=r[a+1]?a+1:0})};o(),this.check=o,i.push(this)}});var o=[],a=function(){for(var t=0;t<o.length;t++)window.requestAnimationFrame.apply(window,[o[t].check])};t.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){n.on("scrolling.uk.document",a),e.on("resize orientationchange",t.Utils.debounce(a,50)),t.ready(function(e){t.$("[data-uk-scrollspy-nav]",e).each(function(){var e=t.$(this);e.data("scrollspynav")||t.scrollspynav(e,t.Utils.options(e.attr("data-uk-scrollspy-nav")))})})},init:function(){var n,i=[],r=this.find("a[href^='#']").each(function(){i.push(t.$(this).attr("href"))}),a=t.$(i.join(",")),s=this.options.cls,l=this.options.closest||this.options.closest,c=this,u=function(){n=[];for(var i=0;i<a.length;i++)t.Utils.isInView(a.eq(i),c.options)&&n.push(a.eq(i));if(n.length){var o,u=e.scrollTop(),h=function(){for(var t=0;t<n.length;t++)if(n[t].offset().top>=u)return n[t]}();if(!h)return;c.options.closest?(r.closest(l).removeClass(s),o=r.filter("a[href='#"+h.attr("id")+"']").closest(l).addClass(s)):o=r.removeClass(s).filter("a[href='#"+h.attr("id")+"']").addClass(s),c.element.trigger("inview.uk.scrollspynav",[h,o])}};this.options.smoothscroll&&t.smoothScroll&&r.each(function(){t.smoothScroll(this,c.options.smoothscroll)}),u(),this.element.data("scrollspynav",this),this.check=u,o.push(this)}})}(UIkit),function(t){var e=[];t.component("toggle",{defaults:{target:!1,cls:"uk-hidden",animation:!1,duration:200},boot:function(){t.ready(function(n){t.$("[data-uk-toggle]",n).each(function(){var e=t.$(this);e.data("toggle")||t.toggle(e,t.Utils.options(e.attr("data-uk-toggle")))}),setTimeout(function(){e.forEach(function(t){t.getToggles()})},0)})},init:function(){var t=this;this.aria=-1!==this.options.cls.indexOf("uk-hidden"),this.getToggles(),this.on("click",function(e){t.element.is('a[href="#"]')&&e.preventDefault(),t.toggle()}),e.push(this)},toggle:function(){if(this.totoggle.length){if(this.options.animation&&t.support.animation){var e=this,n=this.options.animation.split(",");1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),this.totoggle.css("animation-duration",this.options.duration+"ms"),this.totoggle.each(function(){var i=t.$(this);i.hasClass(e.options.cls)?(i.toggleClass(e.options.cls),t.Utils.animate(i,n[0]).then(function(){i.css("animation-duration",""),t.Utils.checkDisplay(i)})):t.Utils.animate(this,n[1]+" uk-animation-reverse").then(function(){i.toggleClass(e.options.cls).css("animation-duration",""),t.Utils.checkDisplay(i)})})}else this.totoggle.toggleClass(this.options.cls),t.Utils.checkDisplay(this.totoggle);this.updateAria()}},getToggles:function(){this.totoggle=this.options.target?t.$(this.options.target):[],this.updateAria()},updateAria:function(){this.aria&&this.totoggle.length&&this.totoggle.each(function(){t.$(this).attr("aria-hidden",t.$(this).hasClass("uk-hidden"))})}})}(UIkit),function(t){t.component("alert",{defaults:{fade:!0,duration:200,trigger:".uk-alert-close"},boot:function(){t.$html.on("click.alert.uikit","[data-uk-alert]",function(e){var n=t.$(this);if(!n.data("alert")){var i=t.alert(n,t.Utils.options(n.attr("data-uk-alert")));t.$(e.target).is(i.options.trigger)&&(e.preventDefault(),i.close())}})},init:function(){var t=this;this.on("click",this.options.trigger,function(e){e.preventDefault(),t.close()})},close:function(){var t=this.trigger("close.uk.alert"),e=function(){this.trigger("closed.uk.alert").remove()}.bind(this);this.options.fade?t.css("overflow","hidden").css("max-height",t.height()).animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0,"margin-top":0,"margin-bottom":0},this.options.duration,e):e()}})}(UIkit),function(t){t.component("buttonRadio",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){t.$html.on("click.buttonradio.uikit","[data-uk-button-radio]",function(e){var n=t.$(this);if(!n.data("buttonRadio")){var i=t.buttonRadio(n,t.Utils.options(n.attr("data-uk-button-radio"))),r=t.$(e.target);r.is(i.options.target)&&r.trigger("click")}})},init:function(){var e=this;this.find(e.options.target).attr("aria-checked","false").filter("."+e.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(n){var i=t.$(this);i.is('a[href="#"]')&&n.preventDefault(),e.find(e.options.target).not(i).removeClass(e.options.activeClass).blur(),i.addClass(e.options.activeClass),e.find(e.options.target).not(i).attr("aria-checked","false"),i.attr("aria-checked","true"),e.trigger("change.uk.button",[i])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),t.component("buttonCheckbox",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){t.$html.on("click.buttoncheckbox.uikit","[data-uk-button-checkbox]",function(e){var n=t.$(this);if(!n.data("buttonCheckbox")){var i=t.buttonCheckbox(n,t.Utils.options(n.attr("data-uk-button-checkbox"))),r=t.$(e.target);r.is(i.options.target)&&r.trigger("click")}})},init:function(){var e=this;this.find(e.options.target).attr("aria-checked","false").filter("."+e.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,function(n){var i=t.$(this);i.is('a[href="#"]')&&n.preventDefault(),i.toggleClass(e.options.activeClass).blur(),i.attr("aria-checked",i.hasClass(e.options.activeClass)),e.trigger("change.uk.button",[i])})},getSelected:function(){return this.find("."+this.options.activeClass)}}),t.component("button",{defaults:{},boot:function(){t.$html.on("click.button.uikit","[data-uk-button]",function(){var e=t.$(this);e.data("button")||(t.button(e,t.Utils.options(e.attr("data-uk-button"))),e.trigger("click"))})},init:function(){var t=this;this.element.attr("aria-pressed",this.element.hasClass("uk-active")),this.on("click",function(e){t.element.is('a[href="#"]')&&e.preventDefault(),t.toggle(),t.trigger("change.uk.button",[t.element.blur().hasClass("uk-active")])})},toggle:function(){this.element.toggleClass("uk-active"),this.element.attr("aria-pressed",this.element.hasClass("uk-active"))}})}(UIkit),function(t){function e(e,n,i,r){if(e=t.$(e),
n=t.$(n),i=i||window.innerWidth,r=r||e.offset(),n.length){var o=n.outerWidth();if(e.css("min-width",o),"right"==t.langdirection){var a=i-(n.offset().left+o),s=i-(e.offset().left+e.outerWidth());e.css("margin-right",a-s)}else e.css("margin-left",n.offset().left-r.left)}}var n,i=!1,r={x:{"bottom-left":"bottom-right","bottom-right":"bottom-left","bottom-center":"bottom-right","top-left":"top-right","top-right":"top-left","top-center":"top-right","left-top":"right","left-bottom":"right-bottom","left-center":"right-center","right-top":"left","right-bottom":"left-bottom","right-center":"left-center"},y:{"bottom-left":"top-left","bottom-right":"top-right","bottom-center":"top-center","top-left":"bottom-left","top-right":"bottom-right","top-center":"bottom-center","left-top":"top-left","left-bottom":"left-bottom","left-center":"top-left","right-top":"top-left","right-bottom":"bottom-left","right-center":"top-left"},xy:{}};t.component("dropdown",{defaults:{mode:"hover",pos:"bottom-left",offset:0,remaintime:800,justify:!1,boundary:t.$win,delay:0,dropdownSelector:".uk-dropdown,.uk-dropdown-blank",hoverDelayIdle:250},remainIdle:!1,boot:function(){var e=t.support.touch?"click":"mouseenter";t.$html.on(e+".dropdown.uikit","[data-uk-dropdown]",function(n){var i=t.$(this);if(!i.data("dropdown")){var r=t.dropdown(i,t.Utils.options(i.attr("data-uk-dropdown")));("click"==e||"mouseenter"==e&&"hover"==r.options.mode)&&r.element.trigger(e),r.element.find(r.options.dropdownSelector).length&&n.preventDefault()}})},init:function(){var e=this;this.dropdown=this.find(this.options.dropdownSelector),this.offsetParent=this.dropdown.parents().filter(function(){return-1!==t.$.inArray(t.$(this).css("position"),["relative","fixed","absolute"])}).slice(0,1),this.centered=this.dropdown.hasClass("uk-dropdown-center"),this.justified=this.options.justify?t.$(this.options.justify):!1,this.boundary=t.$(this.options.boundary),this.boundary.length||(this.boundary=t.$win),this.dropdown.hasClass("uk-dropdown-up")&&(this.options.pos="top-left"),this.dropdown.hasClass("uk-dropdown-flip")&&(this.options.pos=this.options.pos.replace("left","right")),this.dropdown.hasClass("uk-dropdown-center")&&(this.options.pos=this.options.pos.replace(/(left|right)/,"center")),this.element.attr("aria-haspopup","true"),this.element.attr("aria-expanded",this.element.hasClass("uk-open")),"click"==this.options.mode||t.support.touch?this.on("click.uikit.dropdown",function(n){var i=t.$(n.target);i.parents(e.options.dropdownSelector).length||((i.is("a[href='#']")||i.parent().is("a[href='#']")||e.dropdown.length&&!e.dropdown.is(":visible"))&&n.preventDefault(),i.blur()),e.element.hasClass("uk-open")?(!e.dropdown.find(n.target).length||i.is(".uk-dropdown-close")||i.parents(".uk-dropdown-close").length)&&e.hide():e.show()}):this.on("mouseenter",function(){e.trigger("pointerenter.uk.dropdown",[e]),e.remainIdle&&clearTimeout(e.remainIdle),n&&clearTimeout(n),i&&i==e||(n=i&&i!=e?setTimeout(function(){n=setTimeout(e.show.bind(e),e.options.delay)},e.options.hoverDelayIdle):setTimeout(e.show.bind(e),e.options.delay))}).on("mouseleave",function(){n&&clearTimeout(n),e.remainIdle=setTimeout(function(){i&&i==e&&e.hide()},e.options.remaintime),e.trigger("pointerleave.uk.dropdown",[e])}).on("click",function(n){var r=t.$(n.target);e.remainIdle&&clearTimeout(e.remainIdle),i&&i==e||((r.is("a[href='#']")||r.parent().is("a[href='#']"))&&n.preventDefault(),e.show())})},show:function(){t.$html.off("click.outer.dropdown"),i&&i!=this&&i.hide(!0),n&&clearTimeout(n),this.trigger("beforeshow.uk.dropdown",[this]),this.checkDimensions(),this.element.addClass("uk-open"),this.element.attr("aria-expanded","true"),this.trigger("show.uk.dropdown",[this]),t.Utils.checkDisplay(this.dropdown,!0),i=this,this.registerOuterClick()},hide:function(t){this.trigger("beforehide.uk.dropdown",[this,t]),this.element.removeClass("uk-open"),this.remainIdle&&clearTimeout(this.remainIdle),this.remainIdle=!1,this.element.attr("aria-expanded","false"),this.trigger("hide.uk.dropdown",[this,t]),i==this&&(i=!1)},registerOuterClick:function(){var e=this;t.$html.off("click.outer.dropdown"),setTimeout(function(){t.$html.on("click.outer.dropdown",function(r){n&&clearTimeout(n),t.$(r.target),i!=e||e.element.find(r.target).length||(e.hide(!0),t.$html.off("click.outer.dropdown"))})},10)},checkDimensions:function(){if(this.dropdown.length){this.dropdown.removeClass("uk-dropdown-top uk-dropdown-bottom uk-dropdown-left uk-dropdown-right uk-dropdown-stack").css({"top-left":"",left:"","margin-left":"","margin-right":""}),this.justified&&this.justified.length&&this.dropdown.css("min-width","");var n,i=t.$.extend({},this.offsetParent.offset(),{width:this.offsetParent[0].offsetWidth,height:this.offsetParent[0].offsetHeight}),o=this.options.offset,a=this.dropdown,s=(a.show().offset(),a.outerWidth()),l=a.outerHeight(),c=this.boundary.width(),u=(this.boundary.offset()?this.boundary.offset():{top:0,left:0},this.options.pos),h={"bottom-left":{top:0+i.height+o,left:0},"bottom-right":{top:0+i.height+o,left:0+i.width-s},"bottom-center":{top:0+i.height+o,left:0+i.width/2-s/2},"top-left":{top:0-l-o,left:0},"top-right":{top:0-l-o,left:0+i.width-s},"top-center":{top:0-l-o,left:0+i.width/2-s/2},"left-top":{top:0,left:0-s-o},"left-bottom":{top:0+i.height-l,left:0-s-o},"left-center":{top:0+i.height/2-l/2,left:0-s-o},"right-top":{top:0,left:0+i.width+o},"right-bottom":{top:0+i.height-l,left:0+i.width+o},"right-center":{top:0+i.height/2-l/2,left:0+i.width+o}},d={};if(n=u.split("-"),d=h[u]?h[u]:h["bottom-left"],this.justified&&this.justified.length)e(a.css({left:0}),this.justified,c);else{switch(this.checkBoundary(i.left+d.left,i.top+d.top,s,l,c)){case"x":u=r.x[u]||"right-top";break;case"y":u=r.y[u]||"top-left";break;case"xy":u=r.xy[u]||"right-bottom"}n=u.split("-"),d=h[u]?h[u]:h["bottom-left"]}s>c&&(a.addClass("uk-dropdown-stack"),this.trigger("stack.uk.dropdown",[this])),a.css(d).css("display","").addClass("uk-dropdown-"+n[0])}},checkBoundary:function(e,n,i,r,o){var a="";return(0>e||e-t.$win.scrollLeft()+i>o)&&(a+="x"),(0>n||n-t.$win.scrollTop()+r>window.innerHeight)&&(a+="y"),a}}),t.component("dropdownOverlay",{defaults:{justify:!1,cls:"",duration:200},boot:function(){t.ready(function(e){t.$("[data-uk-dropdown-overlay]",e).each(function(){var e=t.$(this);e.data("dropdownOverlay")||t.dropdownOverlay(e,t.Utils.options(e.attr("data-uk-dropdown-overlay")))})})},init:function(){var n=this;this.justified=this.options.justify?t.$(this.options.justify):!1,this.overlay=this.element.find("uk-dropdown-overlay"),this.overlay.length||(this.overlay=t.$('<div class="uk-dropdown-overlay"></div>').appendTo(this.element)),this.overlay.addClass(this.options.cls),this.on({"beforeshow.uk.dropdown":function(t,i){n.dropdown=i,n.justified&&n.justified.length&&e(n.overlay.css({display:"block","margin-left":"","margin-right":""}),n.justified,n.justified.outerWidth())},"show.uk.dropdown":function(){var e=n.dropdown.dropdown.outerHeight(!0);n.dropdown.element.removeClass("uk-open"),n.overlay.stop().css("display","block").animate({height:e},n.options.duration,function(){n.dropdown.dropdown.css("visibility",""),n.dropdown.element.addClass("uk-open"),t.Utils.checkDisplay(n.dropdown.dropdown,!0)}),n.pointerleave=!1},"hide.uk.dropdown":function(){n.overlay.stop().animate({height:0},n.options.duration)},"pointerenter.uk.dropdown":function(){clearTimeout(n.remainIdle)},"pointerleave.uk.dropdown":function(){n.pointerleave=!0}}),this.overlay.on({mouseenter:function(){n.remainIdle&&(clearTimeout(n.dropdown.remainIdle),clearTimeout(n.remainIdle))},mouseleave:function(){n.pointerleave&&i&&(n.remainIdle=setTimeout(function(){i&&i.hide()},i.options.remaintime))}})}})}(UIkit),function(t){var e=[];t.component("gridMatchHeight",{defaults:{target:!1,row:!0,ignorestacked:!1},boot:function(){t.ready(function(e){t.$("[data-uk-grid-match]",e).each(function(){var e,n=t.$(this);n.data("gridMatchHeight")||(e=t.gridMatchHeight(n,t.Utils.options(n.attr("data-uk-grid-match"))))})})},init:function(){var n=this;this.columns=this.element.children(),this.elements=this.options.target?this.find(this.options.target):this.columns,this.columns.length&&(t.$win.on("load resize orientationchange",function(){var e=function(){n.match()};return t.$(function(){e()}),t.Utils.debounce(e,50)}()),t.$html.on("changed.uk.dom",function(){n.columns=n.element.children(),n.elements=n.options.target?n.find(n.options.target):n.columns,n.match()}),this.on("display.uk.check",function(){this.element.is(":visible")&&this.match()}.bind(this)),e.push(this))},match:function(){var e=this.columns.filter(":visible:first");if(e.length){var n=Math.ceil(100*parseFloat(e.css("width"))/parseFloat(e.parent().css("width")))>=100;return n&&!this.options.ignorestacked?this.revert():t.Utils.matchHeights(this.elements,this.options),this}},revert:function(){return this.elements.css("min-height",""),this}}),t.component("gridMargin",{defaults:{cls:"uk-grid-margin"},boot:function(){t.ready(function(e){t.$("[data-uk-grid-margin]",e).each(function(){var e,n=t.$(this);n.data("gridMargin")||(e=t.gridMargin(n,t.Utils.options(n.attr("data-uk-grid-margin"))))})})},init:function(){t.stackMargin(this.element,this.options)}})}(UIkit),function(t){function e(e,n){return n?("object"==typeof e?(e=e instanceof jQuery?e:t.$(e),e.parent().length&&(n.persist=e,n.persist.data("modalPersistParent",e.parent()))):e="string"==typeof e||"number"==typeof e?t.$("<div></div>").html(e):t.$("<div></div>").html("UIkit.modal Error: Unsupported data type: "+typeof e),e.appendTo(n.element.find(".uk-modal-dialog")),n):void 0}var n,i=!1,r=0,o=t.$html;t.component("modal",{defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1,modal:!0},scrollable:!1,transition:!1,hasTransitioned:!0,init:function(){if(n||(n=t.$("body")),this.element.length){var e=this;this.paddingdir="padding-"+("left"==t.langdirection?"right":"left"),this.dialog=this.find(".uk-modal-dialog"),this.active=!1,this.element.attr("aria-hidden",this.element.hasClass("uk-open")),this.on("click",".uk-modal-close",function(t){t.preventDefault(),e.hide()}).on("click",function(n){var i=t.$(n.target);i[0]==e.element[0]&&e.options.bgclose&&e.hide()})}},toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){if(this.element.length){var e=this;if(!this.isActive())return this.options.modal&&i&&i.hide(!0),this.element.removeClass("uk-open").show(),this.resize(),this.options.modal&&(i=this),this.active=!0,r++,t.support.transition?(this.hasTransitioned=!1,this.element.one(t.support.transition.end,function(){e.hasTransitioned=!0}).addClass("uk-open")):this.element.addClass("uk-open"),o.addClass("uk-modal-page").height(),this.element.attr("aria-hidden","false"),this.element.trigger("show.uk.modal"),t.Utils.checkDisplay(this.dialog,!0),this}},hide:function(e){if(!e&&t.support.transition&&this.hasTransitioned){var n=this;this.one(t.support.transition.end,function(){n._hide()}).removeClass("uk-open")}else this._hide();return this},resize:function(){var t=n.width();if(this.scrollbarwidth=window.innerWidth-t,n.css(this.paddingdir,this.scrollbarwidth),this.element.css("overflow-y",this.scrollbarwidth?"scroll":"auto"),!this.updateScrollable()&&this.options.center){var e=this.dialog.outerHeight(),i=parseInt(this.dialog.css("margin-top"),10)+parseInt(this.dialog.css("margin-bottom"),10);e+i<window.innerHeight?this.dialog.css({top:window.innerHeight/2-e/2-i}):this.dialog.css({top:""})}},updateScrollable:function(){var t=this.dialog.find(".uk-overflow-container:visible:first");if(t.length){t.css("height",0);var e=Math.abs(parseInt(this.dialog.css("margin-top"),10)),n=this.dialog.outerHeight(),i=window.innerHeight,r=i-2*(20>e?20:e)-n;return t.css("height",r<this.options.minScrollHeight?"":r),!0}return!1},_hide:function(){this.active=!1,r>0?r--:r=0,this.element.hide().removeClass("uk-open"),this.element.attr("aria-hidden","true"),r||(o.removeClass("uk-modal-page"),n.css(this.paddingdir,"")),i===this&&(i=!1),this.trigger("hide.uk.modal")},isActive:function(){return this.active}}),t.component("modalTrigger",{boot:function(){t.$html.on("click.modal.uikit","[data-uk-modal]",function(e){var n=t.$(this);if(n.is("a")&&e.preventDefault(),!n.data("modalTrigger")){var i=t.modalTrigger(n,t.Utils.options(n.attr("data-uk-modal")));i.show()}}),t.$html.on("keydown.modal.uikit",function(t){i&&27===t.keyCode&&i.options.keyboard&&(t.preventDefault(),i.hide())}),t.$win.on("resize orientationchange",t.Utils.debounce(function(){i&&i.resize()},150))},init:function(){var e=this;this.options=t.$.extend({target:e.element.is("a")?e.element.attr("href"):!1},this.options),this.modal=t.modal(this.options.target,this.options),this.on("click",function(t){t.preventDefault(),e.show()}),this.proxy(this.modal,"show hide isActive")}}),t.modal.dialog=function(n,i){var r=t.modal(t.$(t.modal.dialog.template).appendTo("body"),i);return r.on("hide.uk.modal",function(){r.persist&&(r.persist.appendTo(r.persist.data("modalPersistParent")),r.persist=!1),r.element.remove()}),e(n,r),r},t.modal.dialog.template='<div class="uk-modal"><div class="uk-modal-dialog" style="min-height:0;"></div></div>',t.modal.alert=function(e,n){n=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},n);var i=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-button-primary uk-modal-close">'+n.labels.Ok+"</button></div>"].join(""),n);return i.on("show.uk.modal",function(){setTimeout(function(){i.element.find("button:first").focus()},50)}),i.show()},t.modal.confirm=function(e,n,i){n=t.$.isFunction(n)?n:function(){},i=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},i);var r=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+i.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-confirm">'+i.labels.Ok+"</button></div>"].join(""),i);return r.element.find(".js-modal-confirm").on("click",function(){n(),r.hide()}),r.on("show.uk.modal",function(){setTimeout(function(){r.element.find(".js-modal-confirm").focus()},50)}),r.show()},t.modal.prompt=function(e,n,i,r){i=t.$.isFunction(i)?i:function(){},r=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},r);var o=t.modal.dialog([e?'<div class="uk-modal-content uk-form">'+String(e)+"</div>":"",'<div class="uk-margin-small-top uk-modal-content uk-form"><p><input type="text" class="uk-width-1-1"></p></div>','<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+r.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-ok">'+r.labels.Ok+"</button></div>"].join(""),r),a=o.element.find("input[type='text']").val(n||"").on("keyup",function(t){13==t.keyCode&&o.element.find(".js-modal-ok").trigger("click")});return o.element.find(".js-modal-ok").on("click",function(){i(a.val())!==!1&&o.hide()}),o.on("show.uk.modal",function(){setTimeout(function(){a.focus()},50)}),o.show()},t.modal.blockUI=function(e,n){var i=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e||'<div class="uk-text-center">...</div>')+"</div>"].join(""),t.$.extend({bgclose:!1,keyboard:!1,modal:!1},n));return i.content=i.element.find(".uk-modal-content:first"),i.show()},t.modal.labels={Ok:"Ok",Cancel:"Cancel"}}(UIkit),function(t){function e(e){var n=t.$(e),i="auto";if(n.is(":visible"))i=n.outerHeight();else{var r={position:n.css("position"),visibility:n.css("visibility"),display:n.css("display")};i=n.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),n.css(r)}return i}t.component("nav",{defaults:{toggle:">li.uk-parent > a[href='#']",lists:">li.uk-parent > ul",multiple:!1},boot:function(){t.ready(function(e){t.$("[data-uk-nav]",e).each(function(){var e=t.$(this);e.data("nav")||t.nav(e,t.Utils.options(e.attr("data-uk-nav")))})})},init:function(){var e=this;this.on("click.uikit.nav",this.options.toggle,function(n){n.preventDefault();var i=t.$(this);e.open(i.parent()[0]==e.element[0]?i:i.parent("li"))}),this.find(this.options.lists).each(function(){var n=t.$(this),i=n.parent(),r=i.hasClass("uk-active");n.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>'),i.data("list-container",n.parent()[r?"removeClass":"addClass"]("uk-hidden")),i.attr("aria-expanded",i.hasClass("uk-open")),r&&e.open(i,!0)})},open:function(n,i){var r=this,o=this.element,a=t.$(n),s=a.data("list-container");this.options.multiple||o.children(".uk-open").not(n).each(function(){var e=t.$(this);e.data("list-container")&&e.data("list-container").stop().animate({height:0},function(){t.$(this).parent().removeClass("uk-open").end().addClass("uk-hidden")})}),a.toggleClass("uk-open"),a.attr("aria-expanded",a.hasClass("uk-open")),s&&(a.hasClass("uk-open")&&s.removeClass("uk-hidden"),i?(s.stop().height(a.hasClass("uk-open")?"auto":0),a.hasClass("uk-open")||s.addClass("uk-hidden"),this.trigger("display.uk.check")):s.stop().animate({height:a.hasClass("uk-open")?e(s.find("ul:first")):0},function(){a.hasClass("uk-open")?s.css("height",""):s.addClass("uk-hidden"),r.trigger("display.uk.check")}))}})}(UIkit),function(t){var e={x:window.scrollX,y:window.scrollY},n=(t.$win,t.$doc,t.$html),i={show:function(i){if(i=t.$(i),i.length){var r=t.$("body"),o=i.find(".uk-offcanvas-bar:first"),a="right"==t.langdirection,s=o.hasClass("uk-offcanvas-bar-flip")?-1:1,l=s*(a?-1:1),c=window.innerWidth-r.width();e={x:window.pageXOffset,y:window.pageYOffset},i.addClass("uk-active"),r.css({width:window.innerWidth-c,height:window.innerHeight}).addClass("uk-offcanvas-page"),r.css(a?"margin-right":"margin-left",(a?-1:1)*o.outerWidth()*l).width(),n.css("margin-top",-1*e.y),o.addClass("uk-offcanvas-bar-show"),this._initElement(i),o.trigger("show.uk.offcanvas",[i,o]),i.attr("aria-hidden","false")}},hide:function(i){var r=t.$("body"),o=t.$(".uk-offcanvas.uk-active"),a="right"==t.langdirection,s=o.find(".uk-offcanvas-bar:first"),l=function(){r.removeClass("uk-offcanvas-page").css({width:"",height:"","margin-left":"","margin-right":""}),o.removeClass("uk-active"),s.removeClass("uk-offcanvas-bar-show"),n.css("margin-top",""),window.scrollTo(e.x,e.y),s.trigger("hide.uk.offcanvas",[o,s]),o.attr("aria-hidden","true")};o.length&&(t.support.transition&&!i?(r.one(t.support.transition.end,function(){l()}).css(a?"margin-right":"margin-left",""),setTimeout(function(){s.removeClass("uk-offcanvas-bar-show")},0)):l())},_initElement:function(e){e.data("OffcanvasInit")||(e.on("click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas",function(e){var n=t.$(e.target);if(!e.type.match(/swipe/)&&!n.hasClass("uk-offcanvas-close")){if(n.hasClass("uk-offcanvas-bar"))return;if(n.parents(".uk-offcanvas-bar:first").length)return}e.stopImmediatePropagation(),i.hide()}),e.on("click","a[href^='#']",function(){var e=t.$(this),n=e.attr("href");"#"!=n&&(t.$doc.one("hide.uk.offcanvas",function(){var i;try{i=t.$(n)}catch(r){i=""}i.length||(i=t.$('[name="'+n.replace("#","")+'"]')),i.length&&e.attr("data-uk-smooth-scroll")&&t.Utils.scrollToElement?t.Utils.scrollToElement(i,t.Utils.options(e.attr("data-uk-smooth-scroll")||"{}")):window.location.href=n}),i.hide())}),e.data("OffcanvasInit",!0))}};t.component("offcanvasTrigger",{boot:function(){n.on("click.offcanvas.uikit","[data-uk-offcanvas]",function(e){e.preventDefault();var n=t.$(this);n.data("offcanvasTrigger")||(t.offcanvasTrigger(n,t.Utils.options(n.attr("data-uk-offcanvas"))),n.trigger("click"))}),n.on("keydown.uk.offcanvas",function(t){27===t.keyCode&&i.hide()})},init:function(){var e=this;this.options=t.$.extend({target:e.element.is("a")?e.element.attr("href"):!1},this.options),this.on("click",function(t){t.preventDefault(),i.show(e.options.target)})}}),t.offcanvas=i}(UIkit),function(t){function e(e,n,i){var r,o=t.$.Deferred(),a=e,s=e;return i[0]===n[0]?(o.resolve(),o.promise()):("object"==typeof e&&(a=e[0],s=e[1]||e[0]),t.$body.css("overflow-x","hidden"),r=function(){n&&n.hide().removeClass("uk-active "+s+" uk-animation-reverse"),i.addClass(a).one(t.support.animation.end,function(){i.removeClass(""+a).css({opacity:"",display:""}),o.resolve(),t.$body.css("overflow-x",""),n&&n.css({opacity:"",display:""})}.bind(this)).show()},i.css("animation-duration",this.options.duration+"ms"),n&&n.length?(n.css("animation-duration",this.options.duration+"ms"),n.css("display","none").addClass(s+" uk-animation-reverse").one(t.support.animation.end,function(){r()}.bind(this)).css("display","")):(i.addClass("uk-active"),r()),o.promise())}var n;t.component("switcher",{defaults:{connect:!1,toggle:">*",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){t.ready(function(e){t.$("[data-uk-switcher]",e).each(function(){var e=t.$(this);e.data("switcher")||t.switcher(e,t.Utils.options(e.attr("data-uk-switcher")))})})},init:function(){var e=this;if(this.on("click.uikit.switcher",this.options.toggle,function(t){t.preventDefault(),e.show(this)}),this.options.connect){this.connect=t.$(this.options.connect),this.connect.find(".uk-active").removeClass(".uk-active"),this.connect.length&&(this.connect.children().attr("aria-hidden","true"),this.connect.on("click","[data-uk-switcher-item]",function(n){n.preventDefault();var i=t.$(this).attr("data-uk-switcher-item");if(e.index!=i)switch(i){case"next":case"previous":e.show(e.index+("next"==i?1:-1));break;default:e.show(parseInt(i,10))}}),this.options.swiping&&this.connect.on("swipeRight swipeLeft",function(t){t.preventDefault(),window.getSelection().toString()||e.show(e.index+("swipeLeft"==t.type?1:-1))}));var n=this.find(this.options.toggle),i=n.filter(".uk-active");if(i.length)this.show(i,!1);else{if(this.options.active===!1)return;i=n.eq(this.options.active),this.show(i.length?i:n.eq(0),!1)}n.not(i).attr("aria-expanded","false"),i.attr("aria-expanded","true"),this.on("changed.uk.dom",function(){e.connect=t.$(e.options.connect)})}},show:function(i,r){if(!this.animating){if(isNaN(i))i=t.$(i);else{var o=this.find(this.options.toggle);i=0>i?o.length-1:i,i=o.eq(o[i]?i:0)}var a=this,o=this.find(this.options.toggle),s=t.$(i),l=n[this.options.animation]||function(t,i){if(!a.options.animation)return n.none.apply(a);var r=a.options.animation.split(",");return 1==r.length&&(r[1]=r[0]),r[0]=r[0].trim(),r[1]=r[1].trim(),e.apply(a,[r,t,i])};r!==!1&&t.support.animation||(l=n.none),s.hasClass("uk-disabled")||(o.attr("aria-expanded","false"),s.attr("aria-expanded","true"),o.filter(".uk-active").removeClass("uk-active"),s.addClass("uk-active"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(s),-1==this.index&&(this.index=0),this.connect.each(function(){var e=t.$(this),n=t.$(e.children()),i=t.$(n.filter(".uk-active")),r=t.$(n.eq(a.index));a.animating=!0,l.apply(a,[i,r]).then(function(){i.removeClass("uk-active"),r.addClass("uk-active"),i.attr("aria-hidden","true"),r.attr("aria-hidden","false"),t.Utils.checkDisplay(r,!0),a.animating=!1})})),this.trigger("show.uk.switcher",[s]))}}}),n={none:function(){var e=t.$.Deferred();return e.resolve(),e.promise()},fade:function(t,n){return e.apply(this,["uk-animation-fade",t,n])},"slide-bottom":function(t,n){return e.apply(this,["uk-animation-slide-bottom",t,n])},"slide-top":function(t,n){return e.apply(this,["uk-animation-slide-top",t,n])},"slide-vertical":function(t,n){var i=["uk-animation-slide-top","uk-animation-slide-bottom"];return t&&t.index()>n.index()&&i.reverse(),e.apply(this,[i,t,n])},"slide-left":function(t,n){return e.apply(this,["uk-animation-slide-left",t,n])},"slide-right":function(t,n){return e.apply(this,["uk-animation-slide-right",t,n])},"slide-horizontal":function(t,n){var i=["uk-animation-slide-right","uk-animation-slide-left"];return t&&t.index()>n.index()&&i.reverse(),e.apply(this,[i,t,n])},scale:function(t,n){return e.apply(this,["uk-animation-scale-up",t,n])}},t.switcher.animations=n}(UIkit),function(t){t.component("tab",{defaults:{target:">li:not(.uk-tab-responsive, .uk-disabled)",connect:!1,active:0,animation:!1,duration:200,swiping:!0},boot:function(){t.ready(function(e){t.$("[data-uk-tab]",e).each(function(){var e=t.$(this);e.data("tab")||t.tab(e,t.Utils.options(e.attr("data-uk-tab")))})})},init:function(){var e=this;this.current=!1,this.on("click.uikit.tab",this.options.target,function(n){if(n.preventDefault(),!e.switcher||!e.switcher.animating){var i=e.find(e.options.target).not(this);i.removeClass("uk-active").blur(),e.trigger("change.uk.tab",[t.$(this).addClass("uk-active"),e.current]),e.current=t.$(this),e.options.connect||(i.attr("aria-expanded","false"),t.$(this).attr("aria-expanded","true"))}}),this.options.connect&&(this.connect=t.$(this.options.connect)),this.responsivetab=t.$('<li class="uk-tab-responsive uk-active"><a></a></li>').append('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>'),this.responsivetab.dropdown=this.responsivetab.find(".uk-dropdown"),this.responsivetab.lst=this.responsivetab.dropdown.find("ul"),this.responsivetab.caption=this.responsivetab.find("a:first"),this.element.hasClass("uk-tab-bottom")&&this.responsivetab.dropdown.addClass("uk-dropdown-up"),this.responsivetab.lst.on("click.uikit.tab","a",function(n){n.preventDefault(),n.stopPropagation();var i=t.$(this);e.element.children("li:not(.uk-tab-responsive)").eq(i.data("index")).trigger("click")}),this.on("show.uk.switcher change.uk.tab",function(t,n){e.responsivetab.caption.html(n.text())}),this.element.append(this.responsivetab),this.options.connect&&(this.switcher=t.switcher(this.element,{toggle:">li:not(.uk-tab-responsive)",connect:this.options.connect,active:this.options.active,animation:this.options.animation,duration:this.options.duration,swiping:this.options.swiping})),t.dropdown(this.responsivetab,{mode:"click"}),e.trigger("change.uk.tab",[this.element.find(this.options.target).not(".uk-tab-responsive").filter(".uk-active")]),this.check(),t.$win.on("resize orientationchange",t.Utils.debounce(function(){e.element.is(":visible")&&e.check()},100)),this.on("display.uk.check",function(){e.element.is(":visible")&&e.check()})},check:function(){var e=this.element.children("li:not(.uk-tab-responsive)").removeClass("uk-hidden");if(!e.length)return void this.responsivetab.addClass("uk-hidden");var n,i,r,o=e.eq(0).offset().top+Math.ceil(e.eq(0).height()/2),a=!1;if(this.responsivetab.lst.empty(),e.each(function(){t.$(this).offset().top>o&&(a=!0)}),a)for(var s=0;s<e.length;s++)n=t.$(e.eq(s)),i=n.find("a"),"none"==n.css("float")||n.attr("uk-dropdown")||(n.hasClass("uk-disabled")||(r=n[0].outerHTML.replace("<a ",'<a data-index="'+s+'" '),this.responsivetab.lst.append(r)),n.addClass("uk-hidden"));this.responsivetab[this.responsivetab.lst.children("li").length?"removeClass":"addClass"]("uk-hidden")}})}(UIkit),function(t){t.component("cover",{defaults:{automute:!0},boot:function(){t.ready(function(e){t.$("[data-uk-cover]",e).each(function(){var e=t.$(this);e.data("cover")||t.cover(e,t.Utils.options(e.attr("data-uk-cover")))})})},init:function(){if(this.parent=this.element.parent(),t.$win.on("load resize orientationchange",t.Utils.debounce(function(){this.check()}.bind(this),100)),this.on("display.uk.check",function(){this.element.is(":visible")&&this.check()}.bind(this)),this.check(),this.element.is("iframe")&&this.options.automute){var e=this.element.attr("src");this.element.attr("src","").on("load",function(){this.contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}',"*")}).attr("src",[e,e.indexOf("?")>-1?"&":"?","enablejsapi=1&api=1"].join(""))}},check:function(){this.element.css({width:"",height:""}),this.dimension={w:this.element.width(),h:this.element.height()},this.element.attr("width")&&!isNaN(this.element.attr("width"))&&(this.dimension.w=this.element.attr("width")),this.element.attr("height")&&!isNaN(this.element.attr("height"))&&(this.dimension.h=this.element.attr("height")),this.ratio=this.dimension.w/this.dimension.h;var t,e,n=this.parent.width(),i=this.parent.height();n/this.ratio<i?(t=Math.ceil(i*this.ratio),e=i):(t=n,e=Math.ceil(n/this.ratio)),this.element.css({width:t,height:e})}})}(UIkit),!function(t){function e(t,i){if(!(this instanceof e))return new e(t,i);this.options=i=i?Nr(i):{},Nr(qo,i,!1),p(i);var r=i.value;"string"==typeof r&&(r=new ga(r,i.mode)),this.doc=r;var o=new e.inputStyles[i.inputStyle](this),a=this.display=new n(t,r,o);a.wrapper.CodeMirror=this,u(this),l(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!ko&&a.input.focus(),b(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Cr,keySeq:null};var s=this;uo&&11>ho&&setTimeout(function(){s.display.input.reset(!0)},20),ze(this),Br(),be(this),this.curOp.forceUpdate=!0,ji(this,r),i.autofocus&&!ko||s.hasFocus()?setTimeout(Or(hn,this),20):dn(this);for(var c in Go)Go.hasOwnProperty(c)&&Go[c](this,i[c],Vo);C(this),i.finishInit&&i.finishInit(this);for(var h=0;h<Qo.length;++h)Qo[h](this);we(this),fo&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function n(t,e,n){var i=this;this.input=n,i.scrollbarFiller=_r("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=_r("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=_r("div",null,"CodeMirror-code"),i.selectionDiv=_r("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=_r("div",null,"CodeMirror-cursors"),i.measure=_r("div",null,"CodeMirror-measure"),i.lineMeasure=_r("div",null,"CodeMirror-measure"),i.lineSpace=_r("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=_r("div",[_r("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=_r("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=_r("div",null,null,"position: absolute; height: "+$a+"px; width: 1px;"),i.gutters=_r("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=_r("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=_r("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),uo&&8>ho&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),fo||so&&ko||(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,Ht(t,100),t.state.modeGen++,t.curOp&&Ie(t)}function o(t){t.options.lineWrapping?(Ra(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(za(t.display.wrapper,"CodeMirror-wrap"),f(t)),s(t),Ie(t),oe(t),setTimeout(function(){y(t)},100)}function a(t){var e=me(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ve(t.display)-3);return function(r){if(mi(t.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function s(t){
var e=t.doc,n=a(t);e.iter(function(t){var e=n(t);e!=t.height&&Ki(t,e)})}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),oe(t)}function c(t){u(t),Ie(t),setTimeout(function(){x(t)},20)}function u(t){var e=t.display.gutters,n=t.options.gutters;Hr(e);for(var i=0;i<n.length;++i){var r=n[i],o=e.appendChild(_r("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none",h(t)}function h(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function d(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=ci(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=ui(i);){var r=e.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function f(t){var e=t.display,n=t.doc;e.maxLine=qi(n,n.first),e.maxLineLength=d(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=d(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function p(t){var e=Tr(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function g(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Ft(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+jt(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function m(t,e,n){this.cm=n;var i=this.vert=_r("div",[_r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=_r("div",[_r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(i),t(r),ka(i,"scroll",function(){i.clientHeight&&e(i.scrollTop,"vertical")}),ka(r,"scroll",function(){r.clientWidth&&e(r.scrollLeft,"horizontal")}),this.checkedOverlay=!1,uo&&8>ho&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function v(){}function b(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&za(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ka(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?Je(t,e):Ze(t,e)},t),t.display.scrollbars.addClass&&Ra(t.display.wrapper,t.display.scrollbars.addClass)}function y(t,e){e||(e=g(t));var n=t.display.barWidth,i=t.display.barHeight;w(t,e);for(var r=0;4>r&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&O(t),w(t,g(t)),n=t.display.barWidth,i=t.display.barHeight}function w(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function k(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-Rt(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=Yi(e,i),a=Yi(e,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;o>s?(o=s,a=Yi(e,Qi(qi(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=a&&(o=Yi(e,Qi(qi(e,l))-t.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function x(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=$(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function C(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=S(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(_r("div",[_r("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a),i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",h(t),!0}return!1}function S(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function $(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function L(t,e,n){var i=t.display;this.viewport=e,this.visible=k(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=qt(t),this.force=n,this.dims=E(t),this.events=[]}function T(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=jt(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=jt(t)+"px",e.scrollbarsClipped=!0)}function M(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return De(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ue(t))return!1;C(t)&&(De(t),e.dims=E(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),a=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),Mo&&(o=pi(t.doc,o),a=gi(t.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;We(t,o,a),n.viewOffset=Qi(qi(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var l=Ue(t);if(!s&&0==l&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Ur();return l>4&&(n.lineDiv.style.display="none"),D(t,n.updateLineNumbers,e.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Ur()!=c&&c.offsetHeight&&c.focus(),Hr(n.cursorDiv),Hr(n.selectionDiv),n.gutters.style.height=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,Ht(t,400)),n.updateLineNumbers=null,!0}function A(t,e){for(var n=e.force,i=e.viewport,r=!0;;r=!1){if(r&&t.options.lineWrapping&&e.oldDisplayWidth!=qt(t))n=!0;else if(n=!1,i&&null!=i.top&&(i={top:Math.min(t.doc.height+Ft(t.display)-Gt(t),i.top)}),e.visible=k(t.display,t.doc,i),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!M(t,e))break;O(t);var o=g(t);Ot(t),N(t,o),y(t,o)}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function P(t,e){var n=new L(t,e);if(M(t,n)){O(t),A(t,n);var i=g(t);Ot(t),N(t,i),y(t,i),n.finish()}}function N(t,e){t.display.sizer.style.minHeight=e.docHeight+"px";var n=e.docHeight+t.display.barHeight;t.display.heightForcer.style.top=n+"px",t.display.gutters.style.height=Math.max(n+jt(t),e.clientHeight)+"px"}function O(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r,o=e.view[i];if(!o.hidden){if(uo&&8>ho){var a=o.node.offsetTop+o.node.offsetHeight;r=a-n,n=a}else{var s=o.node.getBoundingClientRect();r=s.bottom-s.top}var l=o.line.height-r;if(2>r&&(r=me(e)),(l>.001||-.001>l)&&(Ki(o.line,r),I(o.line),o.rest))for(var c=0;c<o.rest.length;c++)I(o.rest[c])}}}function I(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function E(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[t.options.gutters[a]]=o.offsetLeft+o.clientLeft+r,i[t.options.gutters[a]]=o.clientWidth;return{fixedPos:$(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function D(t,e,n){function i(e){var n=e.nextSibling;return fo&&xo&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var r=t.display,o=t.options.lineNumbers,a=r.lineDiv,s=a.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var h=l[u];if(h.hidden);else if(h.node&&h.node.parentNode==a){for(;s!=h.node;)s=i(s);var d=o&&null!=e&&c>=e&&h.lineNumber;h.changes&&(Tr(h.changes,"gutter")>-1&&(d=!1),_(t,h,c,n)),d&&(Hr(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(S(t.options,c)))),s=h.node.nextSibling}else{var f=j(t,h,c,n);a.insertBefore(f,s)}c+=h.size}for(;s;)s=i(s)}function _(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?z(t,e):"gutter"==o?F(t,e,n,i):"class"==o?R(e):"widget"==o&&B(t,e,i)}e.changes=null}function H(t){return t.node==t.text&&(t.node=_r("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),uo&&8>ho&&(t.node.style.zIndex=2)),t.node}function W(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var n=H(t);t.background=n.insertBefore(_r("div",null,e),n.firstChild)}}function U(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Oi(t,e)}function z(t,e){var n=e.text.className,i=U(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,R(e)):n&&(e.text.className=n)}function R(t){W(t),t.line.wrapClass?H(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function F(t,e,n,i){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var o=H(e),a=e.gutter=_r("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px");if(t.display.input.setUneditable(a),o.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(_r("div",S(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var s=0;s<t.options.gutters.length;++s){var l=t.options.gutters[s],c=r.hasOwnProperty(l)&&r[l];c&&a.appendChild(_r("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function B(t,e,n){e.alignable&&(e.alignable=null);for(var i,r=e.node.firstChild;r;r=i){var i=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}q(t,e,n)}function j(t,e,n,i){var r=U(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),R(e),F(t,e,n,i),q(t,e,i),e.node}function q(t,e,n){if(G(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)G(t,e.rest[i],e,n,!1)}function G(t,e,n,i,r){if(e.widgets)for(var o=H(n),a=0,s=e.widgets;a<s.length;++a){var l=s[a],c=_r("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),V(l,c,n,i),t.display.input.setUneditable(c),r&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),vr(l,"redraw")}}function V(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function K(t){return Ao(t.line,t.ch)}function X(t,e){return Po(t,e)<0?e:t}function Y(t,e){return Po(t,e)<0?t:e}function Q(t){t.state.focused||(t.display.input.focus(),hn(t))}function Z(t){return t.options.readOnly||t.doc.cantEdit}function J(t,e,n,i){var r=t.doc;t.display.shift=!1,i||(i=r.sel);var o=ja(e),a=null;t.state.pasteIncoming&&i.ranges.length>1&&(No&&No.join("\n")==e?a=i.ranges.length%No.length==0&&Mr(No,ja):o.length==i.ranges.length&&(a=Mr(o,function(t){return[t]})));for(var s=i.ranges.length-1;s>=0;s--){var l=i.ranges[s],c=l.from(),u=l.to();l.empty()&&(n&&n>0?c=Ao(c.line,c.ch-n):t.state.overwrite&&!t.state.pasteIncoming&&(u=Ao(u.line,Math.min(qi(r,u.line).text.length,u.ch+Lr(o).length))));var h=t.curOp.updateInput,d={from:c,to:u,text:a?a[s%a.length]:o,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(wn(t.doc,d),vr(t,"inputRead",t,d),e&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&l.head.ch<100&&(!s||i.ranges[s-1].head.line!=l.head.line)){var f=t.getModeAt(l.head),p=jo(d);if(f.electricChars){for(var g=0;g<f.electricChars.length;g++)if(e.indexOf(f.electricChars.charAt(g))>-1){En(t,p.line,"smart");break}}else f.electricInput&&f.electricInput.test(qi(r,p.line).text.slice(0,p.ch))&&En(t,p.line,"smart")}}On(t),t.curOp.updateInput=h,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function tt(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:Ao(r,0),head:Ao(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function et(t){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck","false")}function nt(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Cr,this.inaccurateSelection=!1,this.hasSelection=!1}function it(){var t=_r("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),e=_r("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return fo?t.style.width="1000px":t.setAttribute("wrap","off"),wo&&(t.style.border="1px solid black"),et(t),e}function rt(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Cr}function ot(t,e){var n=Qt(t,e.line);if(!n||n.hidden)return null;var i=qi(t.doc,e.line),r=Kt(n,i,e.line),o=Zi(i),a="left";if(o){var s=io(o,e.ch);a=s%2?"right":"left"}var l=te(r.map,e.ch,"left");return l.offset="right"==l.collapse?l.end:l.start,l}function at(t,e){return e&&(t.bad=!0),t}function st(t,e,n){var i;if(e==t.display.lineDiv){if(i=t.display.lineDiv.childNodes[n],!i)return at(t.clipPos(Ao(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return lt(o,e,n)}}function lt(t,e,n){function i(e,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=0>r?c.map:u[r],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var l=Xi(0>r?t.line:t.rest[r]),h=o[a]+i;return(0>i||s!=e)&&(h=o[a+(i?1:0)]),Ao(l,h)}}}var r=t.text.firstChild,o=!1;if(!e||!Ha(r,e))return at(Ao(Xi(t.line),0),!0);if(e==r&&(o=!0,e=r.childNodes[n],n=0,!e)){var a=t.rest?Lr(t.rest):t.line;return at(Ao(Xi(a),a.text.length),o)}var s=3==e.nodeType?e:null,l=e;for(s||1!=e.childNodes.length||3!=e.firstChild.nodeType||(s=e.firstChild,n&&(n=s.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var c=t.measure,u=c.maps,h=i(s,l,n);if(h)return at(h,o);for(var d=l.nextSibling,f=s?s.nodeValue.length-n:0;d;d=d.nextSibling){if(h=i(d,d.firstChild,0))return at(Ao(h.line,h.ch-f),o);f+=d.textContent.length}for(var p=l.previousSibling,f=n;p;p=p.previousSibling){if(h=i(p,p.firstChild,-1))return at(Ao(h.line,h.ch+f),o);f+=d.textContent.length}}function ct(t,e,n,i,r){function o(t){return function(e){return e.id==t}}function a(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(null!=n)return""==n&&(n=e.textContent.replace(/\u200b/g,"")),void(s+=n);var c,u=e.getAttribute("cm-marker");if(u){var h=t.findMarks(Ao(i,0),Ao(r+1,0),o(+u));return void(h.length&&(c=h[0].find())&&(s+=Gi(t.doc,c.from,c.to).join("\n")))}if("false"==e.getAttribute("contenteditable"))return;for(var d=0;d<e.childNodes.length;d++)a(e.childNodes[d]);/^(pre|div|p)$/i.test(e.nodeName)&&(l=!0)}else if(3==e.nodeType){var f=e.nodeValue;if(!f)return;l&&(s+="\n",l=!1),s+=f}}for(var s="",l=!1;a(e),e!=n;)e=e.nextSibling;return s}function ut(t,e){this.ranges=t,this.primIndex=e}function ht(t,e){this.anchor=t,this.head=e}function dt(t,e){var n=t[e];t.sort(function(t,e){return Po(t.from(),e.from())}),e=Tr(t,n);for(var i=1;i<t.length;i++){var r=t[i],o=t[i-1];if(Po(o.to(),r.from())>=0){var a=Y(o.from(),r.from()),s=X(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;e>=i&&--e,t.splice(--i,2,new ht(l?s:a,l?a:s))}}return new ut(t,e)}function ft(t,e){return new ut([new ht(t,e||t)],0)}function pt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function gt(t,e){if(e.line<t.first)return Ao(t.first,0);var n=t.first+t.size-1;return e.line>n?Ao(n,qi(t,n).text.length):mt(e,qi(t,e.line).text.length)}function mt(t,e){var n=t.ch;return null==n||n>e?Ao(t.line,e):0>n?Ao(t.line,0):t}function vt(t,e){return e>=t.first&&e<t.first+t.size}function bt(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=gt(t,e[i]);return n}function yt(t,e,n,i){if(t.cm&&t.cm.display.shift||t.extend){var r=e.anchor;if(i){var o=Po(n,r)<0;o!=Po(i,r)<0?(r=n,n=i):o!=Po(n,i)<0&&(n=i)}return new ht(r,n)}return new ht(i||n,n)}function wt(t,e,n,i){Lt(t,new ut([yt(t,t.sel.primary(),e,n)],0),i)}function kt(t,e,n){for(var i=[],r=0;r<t.sel.ranges.length;r++)i[r]=yt(t,t.sel.ranges[r],e[r],null);var o=dt(i,t.sel.primIndex);Lt(t,o,n)}function xt(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,Lt(t,dt(r,t.sel.primIndex),i)}function Ct(t,e,n,i){Lt(t,ft(e,n),i)}function St(t,e){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new ht(gt(t,e[n].anchor),gt(t,e[n].head))}};return Ca(t,"beforeSelectionChange",t,n),t.cm&&Ca(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?dt(n.ranges,n.ranges.length-1):e}function $t(t,e,n){var i=t.history.done,r=Lr(i);r&&r.ranges?(i[i.length-1]=e,Tt(t,e,n)):Lt(t,e,n)}function Lt(t,e,n){Tt(t,e,n),or(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Tt(t,e,n){(kr(t,"beforeSelectionChange")||t.cm&&kr(t.cm,"beforeSelectionChange"))&&(e=St(t,e));var i=n&&n.bias||(Po(e.primary().head,t.sel.primary().head)<0?-1:1);Mt(t,Pt(t,e,i,!0)),n&&n.scroll===!1||!t.cm||On(t.cm)}function Mt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,wr(t.cm)),vr(t,"cursorActivity",t))}function At(t){Mt(t,Pt(t,t.sel,null,!1),Ta)}function Pt(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=Nt(t,a.anchor,n,i),l=Nt(t,a.head,n,i);(r||s!=a.anchor||l!=a.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new ht(s,l))}return r?dt(r,e.primIndex):e}function Nt(t,e,n,i){var r=!1,o=e,a=n||1;t.cantEdit=!1;t:for(;;){var s=qi(t,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(i&&(Ca(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find(0>a?-1:1);if(0==Po(h,o)&&(h.ch+=a,h.ch<0?h=h.line>t.first?gt(t,Ao(h.line-1)):null:h.ch>s.text.length&&(h=h.line<t.first+t.size-1?Ao(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,Ao(t.first,0)):Nt(t,e,n,!0);r=!0,h=e,a=-a}o=h;continue t}}return o}}function Ot(t){t.display.input.showSelection(t.display.input.prepareSelection())}function It(t,e){for(var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e!==!1||a!=n.sel.primIndex){var s=n.sel.ranges[a],l=s.empty();(l||t.options.showCursorWhenSelecting)&&Et(t,s,r),l||Dt(t,s,o)}return i}function Et(t,e,n){var i=he(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(_r("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var o=n.appendChild(_r("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Dt(t,e,n){function i(t,e,n,i){0>e&&(e=0),e=Math.round(e),i=Math.round(i),s.appendChild(_r("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?u-t:n)+"px; height: "+(i-e)+"px"))}function r(e,n,r){function o(n,i){return ue(t,Ao(e,n),"div",h,i)}var s,l,h=qi(a,e),d=h.text.length;return Kr(Zi(h),n||0,null==r?d:r,function(t,e,a){var h,f,p,g=o(t,"left");if(t==e)h=g,f=p=g.left;else{if(h=o(e-1,"right"),"rtl"==a){var m=g;g=h,h=m}f=g.left,p=h.right}null==n&&0==t&&(f=c),h.top-g.top>3&&(i(f,g.top,null,g.bottom),f=c,g.bottom<h.top&&i(f,g.bottom,null,h.top)),null==r&&e==d&&(p=u),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),c+1>f&&(f=c),i(f,h.top,p-f,h.bottom)}),{start:s,end:l}}var o=t.display,a=t.doc,s=document.createDocumentFragment(),l=Bt(t.display),c=l.left,u=Math.max(o.sizerWidth,qt(t)-o.sizer.offsetLeft)-l.right,h=e.from(),d=e.to();if(h.line==d.line)r(h.line,h.ch,d.ch);else{var f=qi(a,h.line),p=qi(a,d.line),g=di(f)==di(p),m=r(h.line,h.ch,g?f.text.length+1:null).end,v=r(d.line,g?0:null,d.ch).start;g&&(m.top<v.top-2?(i(m.right,m.top,null,m.bottom),i(c,v.top,v.left,v.bottom)):i(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&i(c,m.bottom,null,v.top)}n.appendChild(s)}function _t(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Ht(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,Or(Wt,t))}function Wt(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=Jo(e.mode,zt(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(e.frontier>=t.display.viewFrom){var a=o.styles,s=Mi(t,o,i,!0);o.styles=s.styles;var l=o.styleClasses,c=s.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var u=!a||a.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),h=0;!u&&h<a.length;++h)u=a[h]!=o.styles[h];u&&r.push(e.frontier),o.stateAfter=Jo(e.mode,i)}else Pi(t,o.text,i),o.stateAfter=e.frontier%5==0?Jo(e.mode,i):null;return++e.frontier,+new Date>n?(Ht(t,t.options.workDelay),!0):void 0}),r.length&&Te(t,function(){for(var e=0;e<r.length;e++)Ee(t,r[e],"text")})}}function Ut(t,e,n){for(var i,r,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=qi(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=Pa(l.text,null,t.options.tabSize);(null==r||i>c)&&(r=s-1,i=c)}return r}function zt(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return!0;var o=Ut(t,e,n),a=o>i.first&&qi(i,o-1).stateAfter;return a=a?Jo(i.mode,a):ta(i.mode),i.iter(o,e,function(n){Pi(t,n.text,a);var s=o==e-1||o%5==0||o>=r.viewFrom&&o<r.viewTo;n.stateAfter=s?Jo(i.mode,a):null,++o}),n&&(i.frontier=o),a}function Rt(t){return t.lineSpace.offsetTop}function Ft(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Bt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var n=Wr(e.measure,_r("pre","x")),i=t.getComputedStyle?t.getComputedStyle(n):n.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function jt(t){return $a-t.display.nativeBarWidth}function qt(t){return t.display.scroller.clientWidth-jt(t)-t.display.barWidth}function Gt(t){return t.display.scroller.clientHeight-jt(t)-t.display.barHeight}function Vt(t,e,n){var i=t.options.lineWrapping,r=i&&qt(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Kt(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var i=0;i<t.rest.length;i++)if(Xi(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Xt(t,e){e=di(e);var n=Xi(e),i=t.display.externalMeasured=new Ne(t.doc,e,n);i.lineN=n;var r=i.built=Oi(t,i);return i.text=r.pre,Wr(t.display.lineMeasure,r.pre),i}function Yt(t,e,n,i){return Jt(t,Zt(t,e),n,i)}function Qt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[_e(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Zt(t,e){var n=Xi(e),i=Qt(t,n);i&&!i.text?i=null:i&&i.changes&&_(t,i,n,E(t)),i||(i=Xt(t,e));var r=Kt(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Jt(t,e,n,i,r){e.before&&(n=-1);var o,a=n+(i||"");return e.cache.hasOwnProperty(a)?o=e.cache[a]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Vt(t,e.view,e.rect),e.hasHeights=!0),o=ee(t,e,n,i),o.bogus||(e.cache[a]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}function te(t,e,n){for(var i,r,o,a,s=0;s<t.length;s+=3){var l=t[s],c=t[s+1];if(l>e?(r=0,o=1,a="left"):c>e?(r=e-l,o=r+1):(s==t.length-3||e==c&&t[s+3]>e)&&(o=c-l,r=o-1,e>=c&&(a="right")),null!=r){if(i=t[s+2],l==c&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;s&&t[s-2]==t[s-3]&&t[s-1].insertLeft;)i=t[(s-=3)+2],a="left";if("right"==n&&r==c-l)for(;s<t.length-3&&t[s+3]==t[s+4]&&!t[s+5].insertLeft;)i=t[(s+=3)+2],a="right";break}}return{node:i,start:r,end:o,collapse:a,coverStart:l,coverEnd:c}}function ee(t,e,n,i){var r,o=te(e.map,n,i),a=o.node,s=o.start,l=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;4>u;u++){for(;s&&Dr(e.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&Dr(e.line.text.charAt(o.coverStart+l));)++l;if(uo&&9>ho&&0==s&&l==o.coverEnd-o.coverStart)r=a.parentNode.getBoundingClientRect();else if(uo&&t.options.lineWrapping){var h=Ia(a,s,l).getClientRects();r=h.length?h["right"==i?h.length-1:0]:Do}else r=Ia(a,s,l).getBoundingClientRect()||Do;if(r.left||r.right||0==s)break;l=s,s-=1,c="right"}uo&&11>ho&&(r=ne(t.display.measure,r))}else{s>0&&(c=i="right");var h;r=t.options.lineWrapping&&(h=a.getClientRects()).length>1?h["right"==i?h.length-1:0]:a.getBoundingClientRect()}if(uo&&9>ho&&!s&&(!r||!r.left&&!r.right)){var d=a.parentNode.getClientRects()[0];r=d?{left:d.left,right:d.left+ve(t.display),top:d.top,bottom:d.bottom}:Do}for(var f=r.top-e.rect.top,p=r.bottom-e.rect.top,g=(f+p)/2,m=e.view.measure.heights,u=0;u<m.length-1&&!(g<m[u]);u++);var v=u?m[u-1]:0,b=m[u],y={left:("right"==c?r.right:r.left)-e.rect.left,right:("left"==c?r.left:r.right)-e.rect.left,top:v,bottom:b};return r.left||r.right||(y.bogus=!0),t.options.singleCursorHeightPerLine||(y.rtop=f,y.rbottom=p),y}function ne(e,n){if(!t.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Vr(e))return n;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*i,right:n.right*i,top:n.top*r,bottom:n.bottom*r}}function ie(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function re(t){t.display.externalMeasure=null,Hr(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)ie(t.display.view[e])}function oe(t){re(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function ae(){return t.pageXOffset||(document.documentElement||document.body).scrollLeft}function se(){return t.pageYOffset||(document.documentElement||document.body).scrollTop}function le(t,e,n,i){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var o=yi(e.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=Qi(e);if("local"==i?a+=Rt(t.display):a-=t.display.viewOffset,"page"==i||"window"==i){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==i?0:se());var l=s.left+("window"==i?0:ae());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function ce(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=ae(),r-=se();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function ue(t,e,n,i,r){return i||(i=qi(t.doc,e.line)),le(t,i,Yt(t,i,e.ch,r),n)}function he(t,e,n,i,r,o){function a(e,a){var s=Jt(t,r,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,le(t,i,s,n)}function s(t,e){var n=l[e],i=n.level%2;return t==Xr(n)&&e&&n.level<l[e-1].level?(n=l[--e],t=Yr(n)-(n.level%2?0:1),i=!0):t==Yr(n)&&e<l.length-1&&n.level<l[e+1].level&&(n=l[++e],t=Xr(n)-n.level%2,i=!1),i&&t==n.to&&t>n.from?a(t-1):a(t,i)}i=i||qi(t.doc,e.line),r||(r=Zt(t,i));var l=Zi(i),c=e.ch;if(!l)return a(c);var u=io(l,c),h=s(c,u);return null!=Xa&&(h.other=s(c,Xa)),h}function de(t,e){var n=0,e=gt(t.doc,e);t.options.lineWrapping||(n=ve(t.display)*e.ch);var i=qi(t.doc,e.line),r=Qi(i)+Rt(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function fe(t,e,n,i){var r=Ao(t,e);return r.xRel=i,n&&(r.outside=!0),r}function pe(t,e,n){var i=t.doc;if(n+=t.display.viewOffset,0>n)return fe(i.first,0,!0,-1);var r=Yi(i,n),o=i.first+i.size-1;if(r>o)return fe(i.first+i.size-1,qi(i,o).text.length,!0,1);0>e&&(e=0);for(var a=qi(i,r);;){var s=ge(t,a,r,e,n),l=ui(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;r=Xi(a=c.to.line)}}function ge(t,e,n,i,r){function o(i){var r=he(t,Ao(n,i),"line",e,c);return s=!0,a>r.bottom?r.left-l:a<r.top?r.left+l:(s=!1,r.left)}var a=r-Qi(e),s=!1,l=2*t.display.wrapper.clientWidth,c=Zt(t,e),u=Zi(e),h=e.text.length,d=Qr(e),f=Zr(e),p=o(d),g=s,m=o(f),v=s;if(i>m)return fe(n,f,v,1);for(;;){if(u?f==d||f==oo(e,d,1):1>=f-d){for(var b=p>i||m-i>=i-p?d:f,y=i-(b==d?p:m);Dr(e.text.charAt(b));)++b;var w=fe(n,b,b==d?g:v,-1>y?-1:y>1?1:0);return w}var k=Math.ceil(h/2),x=d+k;if(u){x=d;for(var C=0;k>C;++C)x=oo(e,x,1)}var S=o(x);S>i?(f=x,m=S,(v=s)&&(m+=1e3),h=k):(d=x,p=S,g=s,h-=k)}}function me(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Oo){Oo=_r("pre");for(var e=0;49>e;++e)Oo.appendChild(document.createTextNode("x")),Oo.appendChild(_r("br"));Oo.appendChild(document.createTextNode("x"))}Wr(t.measure,Oo);var n=Oo.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),Hr(t.measure),n||1}function ve(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=_r("span","xxxxxxxxxx"),n=_r("pre",[e]);Wr(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function be(t){
t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Ho},_o?_o.ops.push(t.curOp):t.curOp.ownsGroup=_o={ops:[t.curOp],delayedCallbacks:[]}}function ye(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n]();for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(n<e.length)}function we(t){var e=t.curOp,n=e.ownsGroup;if(n)try{ye(n)}finally{_o=null;for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;ke(n)}}function ke(t){for(var e=t.ops,n=0;n<e.length;n++)xe(e[n]);for(var n=0;n<e.length;n++)Ce(e[n]);for(var n=0;n<e.length;n++)Se(e[n]);for(var n=0;n<e.length;n++)$e(e[n]);for(var n=0;n<e.length;n++)Le(e[n])}function xe(t){var e=t.cm,n=e.display;T(e),t.updateMaxLine&&f(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new L(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Ce(t){t.updatedDisplay=t.mustUpdate&&M(t.cm,t.update)}function Se(t){var e=t.cm,n=e.display;t.updatedDisplay&&O(e),t.barMeasure=g(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Yt(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+jt(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-qt(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function $e(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Je(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.preparedSelection&&e.display.input.showSelection(t.preparedSelection),t.updatedDisplay&&N(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&y(e,t.barMeasure),t.selectionChanged&&_t(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing)}function Le(t){var e=t.cm,n=e.display,i=e.doc;if(t.updatedDisplay&&A(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==t.scrollTop||n.scroller.scrollTop==t.scrollTop&&!t.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,t.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==t.scrollLeft||n.scroller.scrollLeft==t.scrollLeft&&!t.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-qt(e),t.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,x(e)),t.scrollToPos){var r=Mn(e,gt(i,t.scrollToPos.from),gt(i,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&Tn(e,r)}var o=t.maybeHiddenMarkers,a=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Ca(o[s],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&Ca(a[s],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&Ca(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Te(t,e){if(t.curOp)return e();be(t);try{return e()}finally{we(t)}}function Me(t,e){return function(){if(t.curOp)return e.apply(t,arguments);be(t);try{return e.apply(t,arguments)}finally{we(t)}}}function Ae(t){return function(){if(this.curOp)return t.apply(this,arguments);be(this);try{return t.apply(this,arguments)}finally{we(this)}}}function Pe(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);be(e);try{return t.apply(this,arguments)}finally{we(e)}}}function Ne(t,e,n){this.line=e,this.rest=fi(e),this.size=this.rest?Xi(Lr(this.rest))-n+1:1,this.node=this.text=null,this.hidden=mi(t,e)}function Oe(t,e,n){for(var i,r=[],o=e;n>o;o=i){var a=new Ne(t.doc,qi(t.doc,o),o);i=o+a.size,r.push(a)}return r}function Ie(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)Mo&&pi(t.doc,e)<r.viewTo&&De(t);else if(n<=r.viewFrom)Mo&&gi(t.doc,n+i)>r.viewFrom?De(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)De(t);else if(e<=r.viewFrom){var o=He(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):De(t)}else if(n>=r.viewTo){var o=He(t,e,e,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):De(t)}else{var a=He(t,e,e,-1),s=He(t,n,n+i,1);a&&s?(r.view=r.view.slice(0,a.index).concat(Oe(t,a.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):De(t)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:e<l.lineN+l.size&&(r.externalMeasured=null))}function Ee(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[_e(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==Tr(a,n)&&a.push(n)}}}function De(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function _e(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,0>e)return null;for(var n=t.display.view,i=0;i<n.length;i++)if(e-=n[i].size,0>e)return i}function He(t,e,n,i){var r,o=_e(t,e),a=t.display.view;if(!Mo||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=0,l=t.display.viewFrom;o>s;s++)l+=a[s].size;if(l!=e){if(i>0){if(o==a.length-1)return null;r=l+a[o].size-e,o++}else r=l-e;e+=r,n+=r}for(;pi(t.doc,n)!=n;){if(o==(0>i?0:a.length-1))return null;n+=i*a[o-(0>i?1:0)].size,o+=i}return{index:o,lineN:n}}function We(t,e,n){var i=t.display,r=i.view;0==r.length||e>=i.viewTo||n<=i.viewFrom?(i.view=Oe(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=Oe(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(_e(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(Oe(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,_e(t,n)))),i.viewTo=n}function Ue(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function ze(t){function e(){o.activeTouch&&(a=setTimeout(function(){o.activeTouch=null},1e3),s=o.activeTouch,s.end=+new Date)}function n(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function i(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}function r(e){yr(t,e)||wa(e)}var o=t.display;ka(o.scroller,"mousedown",Me(t,je)),uo&&11>ho?ka(o.scroller,"dblclick",Me(t,function(e){if(!yr(t,e)){var n=Be(t,e);if(n&&!Xe(t,e)&&!Fe(t.display,e)){ba(e);var i=t.findWordAt(n);wt(t.doc,i.anchor,i.head)}}})):ka(o.scroller,"dblclick",function(e){yr(t,e)||ba(e)}),Lo||ka(o.scroller,"contextmenu",function(e){fn(t,e)});var a,s={end:0};ka(o.scroller,"touchstart",function(t){if(!n(t)){clearTimeout(a);var e=+new Date;o.activeTouch={start:e,moved:!1,prev:e-s.end<=300?s:null},1==t.touches.length&&(o.activeTouch.left=t.touches[0].pageX,o.activeTouch.top=t.touches[0].pageY)}}),ka(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),ka(o.scroller,"touchend",function(n){var r=o.activeTouch;if(r&&!Fe(o,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=t.coordsChar(o.activeTouch,"page");a=!r.prev||i(r,r.prev)?new ht(s,s):!r.prev.prev||i(r,r.prev.prev)?t.findWordAt(s):new ht(Ao(s.line,0),gt(t.doc,Ao(s.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),ba(n)}e()}),ka(o.scroller,"touchcancel",e),ka(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Ze(t,o.scroller.scrollTop),Je(t,o.scroller.scrollLeft,!0),Ca(t,"scroll",t))}),ka(o.scroller,"mousewheel",function(e){tn(t,e)}),ka(o.scroller,"DOMMouseScroll",function(e){tn(t,e)}),ka(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),t.options.dragDrop&&(ka(o.scroller,"dragstart",function(e){Qe(t,e)}),ka(o.scroller,"dragenter",r),ka(o.scroller,"dragover",r),ka(o.scroller,"drop",Me(t,Ye)));var l=o.input.getField();ka(l,"keyup",function(e){cn.call(t,e)}),ka(l,"keydown",Me(t,sn)),ka(l,"keypress",Me(t,un)),ka(l,"focus",Or(hn,t)),ka(l,"blur",Or(dn,t))}function Re(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}function Fe(t,e){for(var n=gr(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function Be(t,e,n,i){var r=t.display;if(!n&&"true"==gr(e).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(e){return null}var l,c=pe(t,o,a);if(i&&1==c.xRel&&(l=qi(t.doc,c.line).text).length==c.ch){var u=Pa(l,l.length,t.options.tabSize)-l.length;c=Ao(c.line,Math.max(0,Math.round((o-Bt(t.display).left)/ve(t.display))-u))}return c}function je(e){var n=this,i=n.display;if(!(i.activeTouch&&i.input.supportsTouch()||yr(n,e))){if(i.shift=e.shiftKey,Fe(i,e))return void(fo||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Xe(n,e)){var r=Be(n,e);switch(t.focus(),mr(e)){case 1:r?qe(n,e,r):gr(e)==i.scroller&&ba(e);break;case 2:fo&&(n.state.lastMiddleDown=+new Date),r&&wt(n.doc,r),setTimeout(function(){i.input.focus()},20),ba(e);break;case 3:Lo&&fn(n,e)}}}}function qe(t,e,n){uo?setTimeout(Or(Q,t),0):Q(t);var i,r=+new Date;Eo&&Eo.time>r-400&&0==Po(Eo.pos,n)?i="triple":Io&&Io.time>r-400&&0==Po(Io.pos,n)?(i="double",Eo={time:r,pos:n}):(i="single",Io={time:r,pos:n});var o,a=t.doc.sel,s=xo?e.metaKey:e.ctrlKey;t.options.dragDrop&&Ba&&!Z(t)&&"single"==i&&(o=a.contains(n))>-1&&!a.ranges[o].empty()?Ge(t,e,n,s):Ve(t,e,n,i,s)}function Ge(t,e,n,i){var r=t.display,o=Me(t,function(a){fo&&(r.scroller.draggable=!1),t.state.draggingText=!1,xa(document,"mouseup",o),xa(r.scroller,"drop",o),Math.abs(e.clientX-a.clientX)+Math.abs(e.clientY-a.clientY)<10&&(ba(a),i||wt(t.doc,n),r.input.focus(),uo&&9==ho&&setTimeout(function(){document.body.focus(),r.input.focus()},20))});fo&&(r.scroller.draggable=!0),t.state.draggingText=o,r.scroller.dragDrop&&r.scroller.dragDrop(),ka(document,"mouseup",o),ka(r.scroller,"drop",o)}function Ve(t,e,n,i,r){function o(e){if(0!=Po(m,e))if(m=e,"rect"==i){for(var r=[],o=t.options.tabSize,a=Pa(qi(c,n.line).text,n.ch,o),s=Pa(qi(c,e.line).text,e.ch,o),l=Math.min(a,s),f=Math.max(a,s),p=Math.min(n.line,e.line),g=Math.min(t.lastLine(),Math.max(n.line,e.line));g>=p;p++){var v=qi(c,p).text,b=Sr(v,l,o);l==f?r.push(new ht(Ao(p,b),Ao(p,b))):v.length>b&&r.push(new ht(Ao(p,b),Ao(p,Sr(v,f,o))))}r.length||r.push(new ht(n,n)),Lt(c,dt(d.ranges.slice(0,h).concat(r),h),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var y=u,w=y.anchor,k=e;if("single"!=i){if("double"==i)var x=t.findWordAt(e);else var x=new ht(Ao(e.line,0),gt(c,Ao(e.line+1,0)));Po(x.anchor,w)>0?(k=x.head,w=Y(y.from(),x.anchor)):(k=x.anchor,w=X(y.to(),x.head))}var r=d.ranges.slice(0);r[h]=new ht(gt(c,w),k),Lt(c,dt(r,h),Ma)}}function a(e){var n=++b,r=Be(t,e,!0,"rect"==i);if(r)if(0!=Po(r,m)){Q(t),o(r);var s=k(l,c);(r.line>=s.to||r.line<s.from)&&setTimeout(Me(t,function(){b==n&&a(e)}),150)}else{var u=e.clientY<v.top?-20:e.clientY>v.bottom?20:0;u&&setTimeout(Me(t,function(){b==n&&(l.scroller.scrollTop+=u,a(e))}),50)}}function s(t){b=1/0,ba(t),l.input.focus(),xa(document,"mousemove",y),xa(document,"mouseup",w),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;ba(e);var u,h,d=c.sel,f=d.ranges;if(r&&!e.shiftKey?(h=c.sel.contains(n),u=h>-1?f[h]:new ht(n,n)):u=c.sel.primary(),e.altKey)i="rect",r||(u=new ht(n,n)),n=Be(t,e,!0,!0),h=-1;else if("double"==i){var p=t.findWordAt(n);u=t.display.shift||c.extend?yt(c,u,p.anchor,p.head):p}else if("triple"==i){var g=new ht(Ao(n.line,0),gt(c,Ao(n.line+1,0)));u=t.display.shift||c.extend?yt(c,u,g.anchor,g.head):g}else u=yt(c,u,n);r?-1==h?(h=f.length,Lt(c,dt(f.concat([u]),h),{scroll:!1,origin:"*mouse"})):f.length>1&&f[h].empty()&&"single"==i?(Lt(c,dt(f.slice(0,h).concat(f.slice(h+1)),0)),d=c.sel):xt(c,h,u,Ma):(h=0,Lt(c,new ut([u],0),Ma),d=c.sel);var m=n,v=l.wrapper.getBoundingClientRect(),b=0,y=Me(t,function(t){mr(t)?a(t):s(t)}),w=Me(t,s);ka(document,"mousemove",y),ka(document,"mouseup",w)}function Ke(t,e,n,i,r){try{var o=e.clientX,a=e.clientY}catch(e){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&ba(e);var s=t.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!kr(t,n))return pr(e);a-=l.top-s.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){var h=Yi(t.doc,a),d=t.options.gutters[c];return r(t,n,t,h,d,e),pr(e)}}}function Xe(t,e){return Ke(t,e,"gutterClick",!0,vr)}function Ye(e){var n=this;if(!yr(n,e)&&!Fe(n.display,e)){ba(e),uo&&(Wo=+new Date);var i=Be(n,e,!0),r=e.dataTransfer.files;if(i&&!Z(n))if(r&&r.length&&t.FileReader&&t.File)for(var o=r.length,a=Array(o),s=0,l=function(t,e){var r=new FileReader;r.onload=Me(n,function(){if(a[e]=r.result,++s==o){i=gt(n.doc,i);var t={from:i,to:i,text:ja(a.join("\n")),origin:"paste"};wn(n.doc,t),$t(n.doc,ft(i,jo(t)))}}),r.readAsText(t)},c=0;o>c;++c)l(r[c],c);else{if(n.state.draggingText&&n.doc.sel.contains(i)>-1)return n.state.draggingText(e),void setTimeout(function(){n.display.input.focus()},20);try{var a=e.dataTransfer.getData("Text");if(a){if(n.state.draggingText&&!(xo?e.metaKey:e.ctrlKey))var u=n.listSelections();if(Tt(n.doc,ft(i,i)),u)for(var c=0;c<u.length;++c)Ln(n.doc,"",u[c].anchor,u[c].head,"drag");n.replaceSelection(a,"around","paste"),n.display.input.focus()}}catch(e){}}}}function Qe(t,e){if(uo&&(!t.state.draggingText||+new Date-Wo<100))return void wa(e);if(!yr(t,e)&&!Fe(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!vo)){var n=_r("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",mo&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),mo&&n.parentNode.removeChild(n)}}function Ze(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,so||P(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbars.setScrollTop(e),so&&P(t),Ht(t,100))}function Je(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,x(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function tn(t,e){var n=Ro(e),i=n.x,r=n.y,o=t.display,a=o.scroller;if(i&&a.scrollWidth>a.clientWidth||r&&a.scrollHeight>a.clientHeight){if(r&&xo&&fo)t:for(var s=e.target,l=o.view;s!=a;s=s.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==s){t.display.currentWheelTarget=s;break t}if(i&&!so&&!mo&&null!=zo)return r&&Ze(t,Math.max(0,Math.min(a.scrollTop+r*zo,a.scrollHeight-a.clientHeight))),Je(t,Math.max(0,Math.min(a.scrollLeft+i*zo,a.scrollWidth-a.clientWidth))),ba(e),void(o.wheelStartX=null);if(r&&null!=zo){var u=r*zo,h=t.doc.scrollTop,d=h+o.wrapper.clientHeight;0>u?h=Math.max(0,h+u-50):d=Math.min(t.doc.height,d+u+50),P(t,{top:h,bottom:d})}20>Uo&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=i,o.wheelDY=r,setTimeout(function(){if(null!=o.wheelStartX){var t=a.scrollLeft-o.wheelStartX,e=a.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(zo=(zo*Uo+n)/(Uo+1),++Uo)}},200)):(o.wheelDX+=i,o.wheelDY+=r))}}function en(t,e,n){if("string"==typeof e&&(e=ea[e],!e))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{Z(t)&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=La}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function nn(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=ia(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&ia(e,t.options.extraKeys,n,t)||ia(e,t.options.keyMap,n,t)}function rn(t,e,n,i){var r=t.state.keySeq;if(r){if(ra(e))return"handled";Fo.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())}),e=r+" "+e}var o=nn(t,e,i);return"multi"==o&&(t.state.keySeq=e),"handled"==o&&vr(t,"keyHandled",t,e,n),"handled"!=o&&"multi"!=o||(ba(n),_t(t)),r&&!o&&/\'$/.test(e)?(ba(n),!0):!!o}function on(t,e){var n=oa(e,!0);return n?e.shiftKey&&!t.state.keySeq?rn(t,"Shift-"+n,e,function(e){return en(t,e,!0)})||rn(t,n,e,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?en(t,e):void 0}):rn(t,n,e,function(e){return en(t,e)}):!1}function an(t,e,n){return rn(t,"'"+n+"'",e,function(e){return en(t,e,!0)})}function sn(t){var e=this;if(Q(e),!yr(e,t)){uo&&11>ho&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=on(e,t);mo&&(Bo=i?n:null,!i&&88==n&&!Ga&&(xo?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||ln(e)}}function ln(t){function e(t){18!=t.keyCode&&t.altKey||(za(n,"CodeMirror-crosshair"),xa(document,"keyup",e),xa(document,"mouseover",e))}var n=t.display.lineDiv;Ra(n,"CodeMirror-crosshair"),ka(document,"keyup",e),ka(document,"mouseover",e)}function cn(t){16==t.keyCode&&(this.doc.sel.shift=!1),yr(this,t)}function un(t){var e=this;if(!(Fe(e.display,t)||yr(e,t)||t.ctrlKey&&!t.altKey||xo&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(mo&&n==Bo)return Bo=null,void ba(t);if(!mo||t.which&&!(t.which<10)||!on(e,t)){var r=String.fromCharCode(null==i?n:i);an(e,t,r)||e.display.input.onKeyPress(t)}}}function hn(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(Ca(t,"focus",t),t.state.focused=!0,Ra(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),fo&&setTimeout(function(){t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),_t(t))}function dn(t){t.state.focused&&(Ca(t,"blur",t),t.state.focused=!1,za(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function fn(t,e){Fe(t.display,e)||pn(t,e)||t.display.input.onContextMenu(e)}function pn(t,e){return kr(t,"gutterContextMenu")?Ke(t,e,"gutterContextMenu",!1,Ca):!1}function gn(t,e){if(Po(t,e.from)<0)return t;if(Po(t,e.to)<=0)return jo(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=jo(e).ch-e.to.ch),Ao(n,i)}function mn(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new ht(gn(r.anchor,e),gn(r.head,e)))}return dt(n,t.sel.primIndex)}function vn(t,e,n){return t.line==e.line?Ao(n.line,t.ch-e.ch+n.ch):Ao(n.line+(t.line-e.line),t.ch)}function bn(t,e,n){for(var i=[],r=Ao(t.first,0),o=r,a=0;a<e.length;a++){var s=e[a],l=vn(s.from,r,o),c=vn(jo(s),r,o);if(r=s.to,o=c,"around"==n){var u=t.sel.ranges[a],h=Po(u.head,u.anchor)<0;i[a]=new ht(h?c:l,h?l:c)}else i[a]=new ht(l,l)}return new ut(i,t.sel.primIndex)}function yn(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,r){e&&(this.from=gt(t,e)),n&&(this.to=gt(t,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),Ca(t,"beforeChange",t,i),t.cm&&Ca(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function wn(t,e,n){if(t.cm){if(!t.cm.curOp)return Me(t.cm,wn)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(kr(t,"beforeChange")||t.cm&&kr(t.cm,"beforeChange"))||(e=yn(t,e,!0))){var i=To&&!n&&ni(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)kn(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text});else kn(t,e)}}function kn(t,e){if(1!=e.text.length||""!=e.text[0]||0!=Po(e.from,e.to)){var n=mn(t,e);ir(t,e,n,t.cm?t.cm.curOp.id:NaN),Sn(t,e,n,Jn(t,e));var i=[];Bi(t,function(t,n){n||-1!=Tr(i,t.history)||(fr(t.history,e),i.push(t.history)),Sn(t,e,null,Jn(t,e))})}}function xn(t,e,n){if(!t.cm||!t.cm.state.suppressEdits){for(var i,r=t.history,o=t.sel,a="undo"==e?r.done:r.undone,s="undo"==e?r.undone:r.done,l=0;l<a.length&&(i=a[l],n?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=a.length){for(r.lastOrigin=r.lastSelOrigin=null;i=a.pop(),i.ranges;){if(ar(i,s),n&&!i.equals(t.sel))return void Lt(t,i,{clearRedo:!1});o=i}var c=[];ar(o,s),s.push({changes:c,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;for(var u=kr(t,"beforeChange")||t.cm&&kr(t.cm,"beforeChange"),l=i.changes.length-1;l>=0;--l){var h=i.changes[l];if(h.origin=e,u&&!yn(t,h,!1))return void(a.length=0);c.push(tr(t,h));var d=l?mn(t,h):Lr(a);Sn(t,h,d,ei(t,h)),!l&&t.cm&&t.cm.scrollIntoView({from:h.from,to:jo(h)});var f=[];Bi(t,function(t,e){e||-1!=Tr(f,t.history)||(fr(t.history,h),f.push(t.history)),Sn(t,h,null,ei(t,h))})}}}}function Cn(t,e){if(0!=e&&(t.first+=e,t.sel=new ut(Mr(t.sel.ranges,function(t){return new ht(Ao(t.anchor.line+e,t.anchor.ch),Ao(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Ie(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)Ee(t.cm,i,"gutter")}}function Sn(t,e,n,i){if(t.cm&&!t.cm.curOp)return Me(t.cm,Sn)(t,e,n,i);if(e.to.line<t.first)return void Cn(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Cn(t,r),e={from:Ao(t.first,0),to:Ao(e.to.line+r,e.to.ch),text:[Lr(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:Ao(o,qi(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Gi(t,e.from,e.to),n||(n=mn(t,e)),t.cm?$n(t.cm,e,i):zi(t,e,i),Tt(t,n,Ta)}}function $n(t,e,n){var i=t.doc,r=t.display,o=e.from,s=e.to,l=!1,c=o.line;t.options.lineWrapping||(c=Xi(di(qi(i,o.line))),i.iter(c,s.line+1,function(t){return t==r.maxLine?(l=!0,!0):void 0})),i.sel.contains(e.from,e.to)>-1&&wr(t),zi(i,e,n,a(t)),t.options.lineWrapping||(i.iter(c,o.line+e.text.length,function(t){var e=d(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Ht(t,400);var u=e.text.length-(s.line-o.line)-1;e.full?Ie(t):o.line!=s.line||1!=e.text.length||Ui(t.doc,e)?Ie(t,o.line,s.line+1,u):Ee(t,o.line,"text");var h=kr(t,"changes"),f=kr(t,"change");if(f||h){var p={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};f&&vr(t,"change",t,p),h&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function Ln(t,e,n,i,r){if(i||(i=n),Po(i,n)<0){var o=i;i=n,n=o}"string"==typeof e&&(e=ja(e)),wn(t,{from:n,to:i,text:e,origin:r})}function Tn(e,n){if(!yr(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),o=null;if(n.top+r.top<0?o=!0:n.bottom+r.top>(t.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!yo){var a=_r("div","​",null,"position: absolute; top: "+(n.top-i.viewOffset-Rt(e.display))+"px; height: "+(n.bottom-n.top+jt(e)+i.barHeight)+"px; left: "+n.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(o),e.display.lineSpace.removeChild(a)}}}function Mn(t,e,n,i){null==i&&(i=0);for(var r=0;5>r;r++){var o=!1,a=he(t,e),s=n&&n!=e?he(t,n):a,l=Pn(t,Math.min(a.left,s.left),Math.min(a.top,s.top)-i,Math.max(a.left,s.left),Math.max(a.bottom,s.bottom)+i),c=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=l.scrollTop&&(Ze(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(Je(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return a}function An(t,e,n,i,r){var o=Pn(t,e,n,i,r);null!=o.scrollTop&&Ze(t,o.scrollTop),null!=o.scrollLeft&&Je(t,o.scrollLeft)}function Pn(t,e,n,i,r){var o=t.display,a=me(t.display);0>n&&(n=0);var s=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=Gt(t),c={};r-n>l&&(r=n+l);var u=t.doc.height+Ft(o),h=a>n,d=r>u-a;if(s>n)c.scrollTop=h?0:n;else if(r>s+l){var f=Math.min(n,(d?u:r)-l);f!=s&&(c.scrollTop=f)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,g=qt(t)-(t.options.fixedGutter?o.gutters.offsetWidth:0),m=i-e>g;return m&&(i=e+g),10>e?c.scrollLeft=0:p>e?c.scrollLeft=Math.max(0,e-(m?0:10)):i>g+p-3&&(c.scrollLeft=i+(m?0:10)-g),c}function Nn(t,e,n){null==e&&null==n||In(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function On(t){In(t);var e=t.getCursor(),n=e,i=e;t.options.lineWrapping||(n=e.ch?Ao(e.line,e.ch-1):e,i=Ao(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:i,margin:t.options.cursorScrollMargin,isCursor:!0}}function In(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=de(t,e.from),i=de(t,e.to),r=Pn(t,Math.min(n.left,i.left),Math.min(n.top,i.top)-e.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+e.margin);t.scrollTo(r.scrollLeft,r.scrollTop)}}function En(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=zt(t,e):n="prev");var a=t.options.tabSize,s=qi(o,e),l=Pa(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(i||/\S/.test(s.text)){if("smart"==n&&(c=o.mode.indent(r,s.text.slice(u.length),s.text),c==La||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>o.first?Pa(qi(o,e-1).text,null,a):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(c/a);f;--f)d+=a,h+="	";if(c>d&&(h+=$r(c-d)),h!=u)Ln(o,h,Ao(e,0),Ao(e,u.length),"+input");else for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==e&&p.head.ch<u.length){var d=Ao(e,u.length);xt(o,f,new ht(d,d));break}}s.stateAfter=null}function Dn(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=qi(t,pt(t,e)):r=Xi(e),null==r?null:(i(o,r)&&t.cm&&Ee(t.cm,r,n),o)}function _n(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&Po(o.from,Lr(i).to)<=0;){var a=i.pop();if(Po(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Te(t,function(){for(var e=i.length-1;e>=0;e--)Ln(t.doc,"",i[e].from,i[e].to,"+delete");On(t)})}function Hn(t,e,n,i,r){function o(){var e=s+n;return e<t.first||e>=t.first+t.size?h=!1:(s=e,u=qi(t,e))}function a(t){var e=(r?oo:ao)(u,l,n,!0);if(null==e){if(t||!o())return h=!1;l=r?(0>n?Zr:Qr)(u):0>n?u.text.length:0}else l=e;return!0}var s=e.line,l=e.ch,c=n,u=qi(t,s),h=!0;if("char"==i)a();else if("column"==i)a(!0);else if("word"==i||"group"==i)for(var d=null,f="group"==i,p=t.cm&&t.cm.getHelper(e,"wordChars"),g=!0;!(0>n)||a(!g);g=!1){var m=u.text.charAt(l)||"\n",v=Ir(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||g||v||(v="s"),d&&d!=v){0>n&&(n=1,a());break}if(v&&(d=v),n>0&&!a(!g))break}var b=Nt(t,Ao(s,l),c,!0);return h||(b.hitSide=!0),b}function Wn(e,n,i,r){var o,a=e.doc,s=n.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,t.innerHeight||document.documentElement.clientHeight);o=n.top+i*(l-(0>i?1.5:.5)*me(e.display))}else"line"==r&&(o=i>0?n.bottom+3:n.top-3);for(;;){var c=pe(e,s,o);if(!c.outside)break;if(0>i?0>=o:o>=a.height){c.hitSide=!0;break}o+=5*i}return c}function Un(t,n,i,r){e.defaults[t]=n,i&&(Go[t]=r?function(t,e,n){n!=Vo&&i(t,e,n)}:i)}function zn(t){for(var e,n,i,r,o=t.split(/-(?!$)/),t=o[o.length-1],a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Rn(t){return"string"==typeof t?na[t]:t}function Fn(t,e,n,i,r){if(i&&i.shared)return Bn(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return Me(t.cm,Fn)(t,e,n,i,r);var o=new la(t,r),a=Po(e,n);if(i&&Nr(i,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=_r("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(hi(t,e.line,e,n,o)||e.line!=n.line&&hi(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Mo=!0}o.addToHistory&&ir(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,c=t.cm;if(t.iter(l,n.line+1,function(t){c&&o.collapsed&&!c.options.lineWrapping&&di(t)==c.display.maxLine&&(s=!0),o.collapsed&&l!=e.line&&Ki(t,0),Yn(t,new Vn(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&t.iter(e.line,n.line+1,function(e){mi(t,e)&&Ki(e,0)}),o.clearOnEnter&&ka(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(To=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++sa,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)Ie(c,e.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=e.line;u<=n.line;u++)Ee(c,u,"text");o.atomic&&At(c.doc),vr(c,"markerAdded",c,o)}return o}function Bn(t,e,n,i,r){i=Nr(i),i.shared=!1;var o=[Fn(t,e,n,i,r)],a=o[0],s=i.widgetNode;return Bi(t,function(t){s&&(i.widgetNode=s.cloneNode(!0)),o.push(Fn(t,gt(t,e),gt(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=Lr(o)}),new ca(o,a)}function jn(t){return t.findMarks(Ao(t.first,0),t.clipPos(Ao(t.lastLine())),function(t){return t.parent})}function qn(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),a=t.clipPos(r.to);if(Po(o,a)){var s=Fn(t,o,a,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}function Gn(t){for(var e=0;e<t.length;e++){var n=t[e],i=[n.primary.doc];Bi(n.primary.doc,function(t){i.push(t)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==Tr(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}}}function Vn(t,e,n){this.marker=t,this.from=e,this.to=n}function Kn(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Xn(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Yn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Qn(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);if(s||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new Vn(a,o.from,l?null:o.to))}}return i}function Zn(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var o=t[r],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);if(s||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new Vn(a,l?null:o.from-e,null==o.to?null:o.to-e))}}return i}function Jn(t,e){if(e.full)return null;var n=vt(t,e.from.line)&&qi(t,e.from.line).markedSpans,i=vt(t,e.to.line)&&qi(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,a=0==Po(e.from,e.to),s=Qn(n,r,a),l=Zn(i,o,a),c=1==e.text.length,u=Lr(e.text).length+(c?r:0);if(s)for(var h=0;h<s.length;++h){var d=s[h];if(null==d.to){var f=Kn(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=r}}if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null!=d.to&&(d.to+=u),null==d.from){var f=Kn(s,d.marker);f||(d.from=u,c&&(s||(s=[])).push(d))}else d.from+=u,c&&(s||(s=[])).push(d)}s&&(s=ti(s)),l&&l!=s&&(l=ti(l));var p=[s];if(!c){var g,m=e.text.length-2;if(m>0&&s)for(var h=0;h<s.length;++h)null==s[h].to&&(g||(g=[])).push(new Vn(s[h].marker,null,null));for(var h=0;m>h;++h)p.push(g);p.push(l)}return p}function ti(t){for(var e=0;e<t.length;++e){
var n=t[e];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function ei(t,e){var n=cr(t,e),i=Jn(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else a&&(n[r]=a)}return n}function ni(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Tr(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var a=i[o],s=a.find(0),l=0;l<r.length;++l){var c=r[l];if(!(Po(c.to,s.from)<0||Po(c.from,s.to)>0)){var u=[l,1],h=Po(c.from,s.from),d=Po(c.to,s.to);(0>h||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&u.push({from:s.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function ii(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function ri(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function oi(t){return t.inclusiveLeft?-1:0}function ai(t){return t.inclusiveRight?1:0}function si(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=Po(i.from,r.from)||oi(t)-oi(e);if(o)return-o;var a=Po(i.to,r.to)||ai(t)-ai(e);return a?a:e.id-t.id}function li(t,e){var n,i=Mo&&t.markedSpans;if(i)for(var r,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&null==(e?r.from:r.to)&&(!n||si(n,r.marker)<0)&&(n=r.marker);return n}function ci(t){return li(t,!0)}function ui(t){return li(t,!1)}function hi(t,e,n,i,r){var o=qi(t,e),a=Mo&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=Po(c.from,n)||oi(l.marker)-oi(r),h=Po(c.to,i)||ai(l.marker)-ai(r);if(!(u>=0&&0>=h||0>=u&&h>=0)&&(0>=u&&(Po(c.to,n)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(Po(c.from,i)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function di(t){for(var e;e=ci(t);)t=e.find(-1,!0).line;return t}function fi(t){for(var e,n;e=ui(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function pi(t,e){var n=qi(t,e),i=di(n);return n==i?e:Xi(i)}function gi(t,e){if(e>t.lastLine())return e;var n,i=qi(t,e);if(!mi(t,i))return e;for(;n=ui(i);)i=n.find(1,!0).line;return Xi(i)+1}function mi(t,e){var n=Mo&&e.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&vi(t,e,i))return!0}}function vi(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return vi(t,i.line,Kn(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r,o=0;o<e.markedSpans.length;++o)if(r=e.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&vi(t,e,r))return!0}function bi(t,e,n){Qi(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Nn(t,null,n)}function yi(t){if(null!=t.height)return t.height;if(!Ha(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.display.gutters.offsetWidth+"px;"),t.noHScroll&&(e+="width: "+t.cm.display.wrapper.clientWidth+"px;"),Wr(t.cm.display.measure,_r("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function wi(t,e,n,i){var r=new ua(t,n,i);return r.noHScroll&&(t.display.alignWidgets=!0),Dn(t.doc,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!mi(t.doc,e)){var i=Qi(e)<t.doc.scrollTop;Ki(e,e.height+yi(r)),i&&Nn(t,null,r.height),t.curOp.forceUpdate=!0}return!0}),r}function ki(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),ii(t),ri(t,n);var r=i?i(t):1;r!=t.height&&Ki(t,r)}function xi(t){t.parent=null,ii(t)}function Ci(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function Si(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var i=e.innerMode(t,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function $i(t,n,i,r){for(var o=0;10>o;o++){r&&(r[0]=e.innerMode(t,i).mode);var a=t.token(n,i);if(n.pos>n.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function Li(t,e,n,i){function r(t){return{start:h.start,end:h.pos,string:h.current(),type:o||null,state:t?Jo(a.mode,u):u}}var o,a=t.doc,s=a.mode;e=gt(a,e);var l,c=qi(a,e.line),u=zt(t,e.line,n),h=new aa(c.text,t.options.tabSize);for(i&&(l=[]);(i||h.pos<e.ch)&&!h.eol();)h.start=h.pos,o=$i(s,h,u),i&&l.push(r(!0));return i?l:r()}function Ti(t,e,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,c=0,u=null,h=new aa(e,t.options.tabSize),d=t.options.addModeClass&&[null];for(""==e&&Ci(Si(n,i),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(s=!1,a&&Pi(t,e,i,h.pos),h.pos=e.length,l=null):l=Ci($i(n,h,i,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e4),r(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);r(p,u),c=p}}function Mi(t,e,n,i){var r=[t.state.modeGen],o={};Ti(t,e.text,t.doc.mode,n,function(t,e){r.push(t,e)},o,i);for(var a=0;a<t.state.overlays.length;++a){var s=t.state.overlays[a],l=1,c=0;Ti(t,e.text,s.mode,!0,function(t,e){for(var n=l;t>c;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,c=Math.min(t,i)}if(e)if(s.opaque)r.splice(n,l-n,t,"cm-overlay "+e),l=n+2;else for(;l>n;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"cm-overlay "+e}},o)}return{styles:r,classes:o.bgClass||o.textClass?o:null}}function Ai(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=Mi(t,e,e.stateAfter=zt(t,Xi(e)));e.styles=i.styles,i.classes?e.styleClasses=i.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.frontier&&t.doc.frontier++}return e.styles}function Pi(t,e,n,i){var r=t.doc.mode,o=new aa(e,t.options.tabSize);for(o.start=o.pos=i||0,""==e&&Si(r,n);!o.eol()&&o.pos<=t.options.maxHighlightLength;)$i(r,o,n),o.start=o.pos}function Ni(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?fa:da;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Oi(t,e){var n=_r("span",null,null,fo?"padding-right: .1px":null),i={pre:_r("pre",[n]),content:n,col:0,pos:0,cm:t};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o,a=r?e.rest[r-1]:e.line;i.pos=0,i.addToken=Ei,(uo||fo)&&t.getOption("lineWrapping")&&(i.addToken=Di(i.addToken)),Gr(t.display.measure)&&(o=Zi(a))&&(i.addToken=_i(i.addToken,o)),i.map=[];var s=e!=t.display.externalMeasured&&Xi(a);Wi(a,i,Ai(t,a,s)),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=Rr(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=Rr(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(qr(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return fo&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),Ca(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=Rr(i.pre.className,i.textClass||"")),i}function Ii(t){var e=_r("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Ei(t,e,n,i,r,o,a){if(e){var s=t.cm.options.specialChars,l=!1;if(s.test(e))for(var c=document.createDocumentFragment(),u=0;;){s.lastIndex=u;var h=s.exec(e),d=h?h.index-u:e.length-u;if(d){var f=document.createTextNode(e.slice(u,u+d));uo&&9>ho?c.appendChild(_r("span",[f])):c.appendChild(f),t.map.push(t.pos,t.pos+d,f),t.col+=d,t.pos+=d}if(!h)break;if(u+=d+1,"	"==h[0]){var p=t.cm.options.tabSize,g=p-t.col%p,f=c.appendChild(_r("span",$r(g),"cm-tab"));f.setAttribute("role","presentation"),f.setAttribute("cm-text","	"),t.col+=g}else{var f=t.cm.options.specialCharPlaceholder(h[0]);f.setAttribute("cm-text",h[0]),uo&&9>ho?c.appendChild(_r("span",[f])):c.appendChild(f),t.col+=1}t.map.push(t.pos,t.pos+1,f),t.pos++}else{t.col+=e.length;var c=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,c),uo&&9>ho&&(l=!0),t.pos+=e.length}if(n||i||r||l||a){var m=n||"";i&&(m+=i),r&&(m+=r);var v=_r("span",[c],m,a);return o&&(v.title=o),t.content.appendChild(v)}t.content.appendChild(c)}}function Di(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":" ";return e+=" "}return function(n,i,r,o,a,s){t(n,i.replace(/ {3,}/g,e),r,o,a,s)}}function _i(t,e){return function(n,i,r,o,a,s){r=r?r+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+i.length;;){for(var u=0;u<e.length;u++){var h=e[u];if(h.to>l&&h.from<=l)break}if(h.to>=c)return t(n,i,r,o,a,s);t(n,i.slice(0,h.to-l),r,o,null,s),o=null,i=i.slice(h.to-l),l=h.to}}}function Hi(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e}function Wi(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var a,s,l,c,u,h,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=h=s="",d=null,v=1/0;for(var b=[],y=0;y<i.length;++y){var w=i[y],k=w.marker;w.from<=p&&(null==w.to||w.to>p)?(null!=w.to&&v>w.to&&(v=w.to,c=""),k.className&&(l+=" "+k.className),k.css&&(s=k.css),k.startStyle&&w.from==p&&(u+=" "+k.startStyle),k.endStyle&&w.to==v&&(c+=" "+k.endStyle),k.title&&!h&&(h=k.title),k.collapsed&&(!d||si(d.marker,k)<0)&&(d=w)):w.from>p&&v>w.from&&(v=w.from),"bookmark"==k.type&&w.from==p&&k.widgetNode&&b.push(k)}if(d&&(d.from||0)==p&&(Hi(e,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&b.length)for(var y=0;y<b.length;++y)Hi(e,0,b[y])}if(p>=f)break;for(var x=Math.min(f,v);;){if(m){var C=p+m.length;if(!d){var S=C>x?m.slice(0,x-p):m;e.addToken(e,S,a?a+l:l,u,p+S.length==v?c:"",h,s)}if(C>=x){m=m.slice(x-p),p=x;break}p=C,u=""}m=r.slice(o,o=n[g++]),a=Ni(n[g++],e.cm.options)}}else for(var g=1;g<n.length;g+=2)e.addToken(e,r.slice(o,o=n[g]),Ni(n[g+1],e.cm.options))}function Ui(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Lr(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function zi(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){ki(t,n,r,i),vr(t,"change",t,e)}function a(t,e){for(var n=t,o=[];e>n;++n)o.push(new ha(c[n],r(n),i));return o}var s=e.from,l=e.to,c=e.text,u=qi(t,s.line),h=qi(t,l.line),d=Lr(c),f=r(c.length-1),p=l.line-s.line;if(e.full)t.insert(0,a(0,c.length)),t.remove(c.length,t.size-c.length);else if(Ui(t,e)){var g=a(0,c.length-1);o(h,h.text,f),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,s.ch)+d+u.text.slice(l.ch),f);else{var g=a(1,c.length-1);g.push(new ha(d+u.text.slice(l.ch),f,i)),o(u,u.text.slice(0,s.ch)+c[0],r(0)),t.insert(s.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,s.ch)+c[0]+h.text.slice(l.ch),r(0)),t.remove(s.line+1,p);else{o(u,u.text.slice(0,s.ch)+c[0],r(0)),o(h,d+h.text.slice(l.ch),f);var g=a(1,c.length-1);p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,g)}vr(t,"change",t,e)}function Ri(t){this.lines=t,this.parent=null;for(var e=0,n=0;e<t.length;++e)t[e].parent=this,n+=t[e].height;this.height=n}function Fi(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}function Bi(t,e,n){function i(t,r,o){if(t.linked)for(var a=0;a<t.linked.length;++a){var s=t.linked[a];if(s.doc!=r){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),i(s.doc,t,l))}}}i(t,null,!0)}function ji(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,s(t),i(t),t.options.lineWrapping||f(t),t.options.mode=e.modeOption,Ie(t)}function qi(t,e){if(e-=t.first,0>e||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(o>e){n=r;break}e-=o}return n.lines[e]}function Gi(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function Vi(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function Ki(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function Xi(t){if(null==t.parent)return null;for(var e=t.parent,n=Tr(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function Yi(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(o>e){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var i=0;i<t.lines.length;++i){var a=t.lines[i],s=a.height;if(s>e)break;e-=s}return n+i}function Qi(t){t=di(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var i=0;i<o.children.length;++i){var a=o.children[i];if(a==n)break;e+=a.height}return e}function Zi(t){var e=t.order;return null==e&&(e=t.order=Ya(t.text)),e}function Ji(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function tr(t,e){var n={from:K(e.from),to:jo(e),text:Gi(t,e.from,e.to)};return sr(t,n,e.from.line,e.to.line+1),Bi(t,function(t){sr(t,n,e.from.line,e.to.line+1)},!0),n}function er(t){for(;t.length;){var e=Lr(t);if(!e.ranges)break;t.pop()}}function nr(t,e){return e?(er(t.done),Lr(t.done)):t.done.length&&!Lr(t.done).ranges?Lr(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Lr(t.done)):void 0}function ir(t,e,n,i){var r=t.history;r.undone.length=0;var o,a=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastModTime>a-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=nr(r,r.lastOp==i))){var s=Lr(o.changes);0==Po(e.from,e.to)&&0==Po(e.from,s.to)?s.to=jo(e):o.changes.push(tr(t,e))}else{var l=Lr(r.done);for(l&&l.ranges||ar(t.sel,r.done),o={changes:[tr(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,s||Ca(t,"historyAdded")}function rr(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function or(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||rr(t,o,Lr(r.done),e))?r.done[r.done.length-1]=e:ar(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&i.clearRedo!==!1&&er(r.undone)}function ar(t,e){var n=Lr(e);n&&n.ranges&&n.equals(t)||e.push(t)}function sr(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function lr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function cr(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];i<e.text.length;++i)r.push(lr(n[i]));return r}function ur(t,e,n){for(var i=0,r=[];i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?ut.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var c,u=a[l];if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&Tr(e,Number(c[1]))>-1&&(Lr(s)[h]=u[h],delete u[h])}}}return r}function hr(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function dr(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],a=!0;if(o.ranges){o.copied||(o=t[r]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)hr(o.ranges[s].anchor,e,n,i),hr(o.ranges[s].head,e,n,i)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=Ao(l.from.line+i,l.from.ch),l.to=Ao(l.to.line+i,l.to.ch);else if(e<=l.to.line){a=!1;break}}a||(t.splice(0,r+1),r=0)}}}function fr(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;dr(t.done,n,i,r),dr(t.undone,n,i,r)}function pr(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function gr(t){return t.target||t.srcElement}function mr(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),xo&&t.ctrlKey&&1==e&&(e=3),e}function vr(t,e){function n(t){return function(){t.apply(null,o)}}var i=t._handlers&&t._handlers[e];if(i){var r,o=Array.prototype.slice.call(arguments,2);_o?r=_o.delayedCallbacks:Sa?r=Sa:(r=Sa=[],setTimeout(br,0));for(var a=0;a<i.length;++a)r.push(n(i[a]))}}function br(){var t=Sa;Sa=null;for(var e=0;e<t.length;++e)t[e]()}function yr(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),Ca(t,n||e.type,t,e),pr(e)||e.codemirrorIgnore}function wr(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==Tr(n,e[i])&&n.push(e[i])}function kr(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function xr(t){t.prototype.on=function(t,e){ka(this,t,e)},t.prototype.off=function(t,e){xa(this,t,e)}}function Cr(){this.id=null}function Sr(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("	",i);-1==o&&(o=t.length);var a=o-i;if(o==t.length||r+a>=e)return i+Math.min(a,e-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=e)return i}}function $r(t){for(;Na.length<=t;)Na.push(Lr(Na)+" ");return Na[t]}function Lr(t){return t[t.length-1]}function Tr(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function Mr(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Ar(){}function Pr(t,e){var n;return Object.create?n=Object.create(t):(Ar.prototype=t,n=new Ar),e&&Nr(e,n),n}function Nr(t,e,n){e||(e={});for(var i in t)!t.hasOwnProperty(i)||n===!1&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function Or(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function Ir(t,e){return e?e.source.indexOf("\\w")>-1&&Da(t)?!0:e.test(t):Da(t)}function Er(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function Dr(t){return t.charCodeAt(0)>=768&&_a.test(t)}function _r(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function Hr(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function Wr(t,e){return Hr(t).appendChild(e)}function Ur(){return document.activeElement}function zr(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function Rr(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!zr(n[i]).test(e)&&(e+=" "+n[i]);return e}function Fr(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}function Br(){Fa||(jr(),Fa=!0)}function jr(){var e;ka(t,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Fr(Re)},100))}),ka(t,"blur",function(){Fr(dn)})}function qr(t){if(null==Wa){var e=_r("span","​");Wr(t,_r("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Wa=e.offsetWidth<=1&&e.offsetHeight>2&&!(uo&&8>ho))}var n=Wa?_r("span","​"):_r("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Gr(t){if(null!=Ua)return Ua;var e=Wr(t,document.createTextNode("AخA")),n=Ia(e,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=Ia(e,1,2).getBoundingClientRect();return Ua=i.right-n.right<3}function Vr(t){if(null!=Va)return Va;var e=Wr(t,_r("span","x")),n=e.getBoundingClientRect(),i=Ia(e,0,1).getBoundingClientRect();return Va=Math.abs(n.left-i.left)>1}function Kr(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(i(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr"),r=!0)}r||i(e,n,"ltr")}function Xr(t){return t.level%2?t.to:t.from}function Yr(t){return t.level%2?t.from:t.to}function Qr(t){var e=Zi(t);return e?Xr(e[0]):0}function Zr(t){var e=Zi(t);return e?Yr(Lr(e)):t.text.length}function Jr(t,e){var n=qi(t.doc,e),i=di(n);i!=n&&(e=Xi(i));var r=Zi(i),o=r?r[0].level%2?Zr(i):Qr(i):0;return Ao(e,o)}function to(t,e){for(var n,i=qi(t.doc,e);n=ui(i);)i=n.find(1,!0).line,e=null;var r=Zi(i),o=r?r[0].level%2?Qr(i):Zr(i):i.text.length;return Ao(null==e?Xi(i):e,o)}function eo(t,e){var n=Jr(t,e.line),i=qi(t.doc,n.line),r=Zi(i);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return Ao(n.line,a?0:o)}return n}function no(t,e,n){var i=t[0].level;return e==i?!0:n==i?!1:n>e}function io(t,e){Xa=null;for(var n,i=0;i<t.length;++i){var r=t[i];if(r.from<e&&r.to>e)return i;if(r.from==e||r.to==e){if(null!=n)return no(t,r.level,t[n].level)?(r.from!=r.to&&(Xa=n),i):(r.from!=r.to&&(Xa=i),n);n=i}}return n}function ro(t,e,n,i){if(!i)return e+n;do e+=n;while(e>0&&Dr(t.text.charAt(e)));return e}function oo(t,e,n,i){var r=Zi(t);if(!r)return ao(t,e,n,i);for(var o=io(r,e),a=r[o],s=ro(t,e,a.level%2?-n:n,i);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return io(r,s)==o?s:(a=r[o+=n],n>0==a.level%2?a.to:a.from);if(a=r[o+=n],!a)return null;s=n>0==a.level%2?ro(t,a.to,-1,i):ro(t,a.from,1,i)}}function ao(t,e,n,i){var r=e+n;if(i)for(;r>0&&Dr(t.text.charAt(r));)r+=n;return 0>r||r>t.text.length?null:r}var so=/gecko\/\d/i.test(navigator.userAgent),lo=/MSIE \d/.test(navigator.userAgent),co=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),uo=lo||co,ho=uo&&(lo?document.documentMode||6:co[1]),fo=/WebKit\//.test(navigator.userAgent),po=fo&&/Qt\/\d+\.\d+/.test(navigator.userAgent),go=/Chrome\//.test(navigator.userAgent),mo=/Opera\//.test(navigator.userAgent),vo=/Apple Computer/.test(navigator.vendor),bo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),yo=/PhantomJS/.test(navigator.userAgent),wo=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ko=wo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),xo=wo||/Mac/.test(navigator.platform),Co=/win/i.test(navigator.platform),So=mo&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);So&&(So=Number(So[1])),So&&So>=15&&(mo=!1,fo=!0);var $o=xo&&(po||mo&&(null==So||12.11>So)),Lo=so||uo&&ho>=9,To=!1,Mo=!1;m.prototype=Nr({update:function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=t.scrollWidth-t.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&t.clientHeight>0&&(0==i&&this.overlayHack(),this.checkedOverlay=!0),{right:n?i:0,bottom:e?i:0}},setScrollLeft:function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t)},setScrollTop:function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t)},overlayHack:function(){var t=xo&&!bo?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=t;var e=this,n=function(t){gr(t)!=e.vert&&gr(t)!=e.horiz&&Me(e.cm,je)(t)};ka(this.vert,"mousedown",n),ka(this.horiz,"mousedown",n)},clear:function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)}},m.prototype),v.prototype=Nr({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},v.prototype),e.scrollbarModel={"native":m,"null":v},L.prototype.signal=function(t,e){kr(t,e)&&this.events.push(arguments)},L.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Ca.apply(null,this.events[t])};var Ao=e.Pos=function(t,e){return this instanceof Ao?(this.line=t,void(this.ch=e)):new Ao(t,e)},Po=e.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch},No=null;nt.prototype=Nr({init:function(t){function e(t){if(i.somethingSelected())No=i.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,o.value=No.join("\n"),Oa(o));else{var e=tt(i);No=e.text,"cut"==t.type?i.setSelections(e.ranges,null,Ta):(n.prevInput="",o.value=e.text.join("\n"),Oa(o))}"cut"==t.type&&(i.state.cutIncoming=!0)}var n=this,i=this.cm,r=this.wrapper=it(),o=this.textarea=r.firstChild;t.wrapper.insertBefore(r,t.wrapper.firstChild),wo&&(o.style.width="0px"),ka(o,"input",function(){uo&&ho>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),ka(o,"paste",function(){if(fo&&!i.state.fakedLastChar&&!(new Date-i.state.lastMiddleDown<200)){var t=o.selectionStart,e=o.selectionEnd;o.value+="$",o.selectionEnd=e,o.selectionStart=t,i.state.fakedLastChar=!0}i.state.pasteIncoming=!0,n.fastPoll()}),ka(o,"cut",e),ka(o,"copy",e),ka(t.scroller,"paste",function(e){Fe(t,e)||(i.state.pasteIncoming=!0,n.focus())}),ka(t.lineSpace,"selectstart",function(e){Fe(t,e)||ba(e)})},prepareSelection:function(){var t=this.cm,e=t.display,n=t.doc,i=It(t);if(t.options.moveInputWithCursor){var r=he(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},showSelection:function(t){var e=this.cm,n=e.display;Wr(n.cursorDiv,t.cursors),Wr(n.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},reset:function(t){if(!this.contextMenuPending){var e,n,i=this.cm,r=i.doc;if(i.somethingSelected()){this.prevInput="";var o=r.sel.primary();e=Ga&&(o.to().line-o.from().line>100||(n=i.getSelection()).length>1e3);var a=e?"-":n||i.getSelection();this.textarea.value=a,i.state.focused&&Oa(this.textarea),uo&&ho>=9&&(this.hasSelection=a)}else t||(this.prevInput=this.textarea.value="",uo&&ho>=9&&(this.hasSelection=null));this.inaccurateSelection=e}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!ko||Ur()!=this.textarea))try{this.textarea.focus()}catch(t){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var t=this;t.pollingFast||t.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},fastPoll:function(){function t(){var i=n.poll();i||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},poll:function(){var t=this.cm,e=this.textarea,n=this.prevInput;if(!t.state.focused||qa(e)&&!n||Z(t)||t.options.disableInput||t.state.keySeq)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var i=e.value;if(i==n&&!t.somethingSelected())return!1;if(uo&&ho>=9&&this.hasSelection===i||xo&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;8203!=i.charCodeAt(0)||t.doc.sel!=t.display.selForContextMenu||n||(n="​");for(var r=0,o=Math.min(n.length,i.length);o>r&&n.charCodeAt(r)==i.charCodeAt(r);)++r;var a=this;return Te(t,function(){J(t,i.slice(r),n.length-r),i.length>1e3||i.indexOf("\n")>-1?e.value=a.prevInput="":a.prevInput=i}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){uo&&ho>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function n(){if(null!=s.selectionStart){var t=o.somethingSelected(),e=s.value="​"+(t?s.value:"");r.prevInput=t?"":"​",s.selectionStart=1,s.selectionEnd=e.length,a.selForContextMenu=o.doc.sel}}function i(){if(r.contextMenuPending=!1,r.wrapper.style.position="relative",s.style.cssText=h,uo&&9>ho&&a.scrollbars.setScrollTop(a.scroller.scrollTop=c),null!=s.selectionStart){(!uo||uo&&9>ho)&&n();var t=0,e=function(){a.selForContextMenu==o.doc.sel&&0==s.selectionStart?Me(o,ea.selectAll)(o):t++<10?a.detectingSelectAll=setTimeout(e,500):a.input.reset()};a.detectingSelectAll=setTimeout(e,200)}}var r=this,o=r.cm,a=o.display,s=r.textarea,l=Be(o,e),c=a.scroller.scrollTop;if(l&&!mo){var u=o.options.resetSelectionOnContextMenu;u&&-1==o.doc.sel.contains(l)&&Me(o,Lt)(o.doc,ft(l),Ta);var h=s.style.cssText;if(r.wrapper.style.position="absolute",s.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(uo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",fo)var d=t.scrollY;if(a.input.focus(),fo&&t.scrollTo(null,d),a.input.reset(),o.somethingSelected()||(s.value=r.prevInput=" "),r.contextMenuPending=!0,a.selForContextMenu=o.doc.sel,clearTimeout(a.detectingSelectAll),uo&&ho>=9&&n(),Lo){wa(e);var f=function(){xa(t,"mouseup",f),setTimeout(i,20)};ka(t,"mouseup",f)}else setTimeout(i,50)}},setUneditable:Ar,needsContentAttribute:!1},nt.prototype),rt.prototype=Nr({init:function(t){function e(t){if(i.somethingSelected())No=i.getSelections(),"cut"==t.type&&i.replaceSelection("",null,"cut");else{var e=tt(i);No=e.text,"cut"==t.type&&i.operation(function(){i.setSelections(e.ranges,0,Ta),i.replaceSelection("",null,"cut")})}if(t.clipboardData&&!wo)t.preventDefault(),t.clipboardData.clearData(),t.clipboardData.setData("text/plain",No.join("\n"));else{var n=it(),r=n.firstChild;i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),r.value=No.join("\n");var o=document.activeElement;Oa(r),setTimeout(function(){i.display.lineSpace.removeChild(n),o.focus()},50)}}var n=this,i=n.cm,r=n.div=t.lineDiv;r.contentEditable="true",et(r),ka(r,"paste",function(t){var e=t.clipboardData&&t.clipboardData.getData("text/plain");e&&(t.preventDefault(),i.replaceSelection(e,null,"paste"))}),ka(r,"compositionstart",function(t){var e=t.data;if(n.composing={sel:i.doc.sel,data:e,startData:e},e){var r=i.doc.sel.primary(),o=i.getLine(r.head.line),a=o.indexOf(e,Math.max(0,r.head.ch-e.length));a>-1&&a<=r.head.ch&&(n.composing.sel=ft(Ao(r.head.line,a),Ao(r.head.line,a+e.length)))}}),ka(r,"compositionupdate",function(t){n.composing.data=t.data}),ka(r,"compositionend",function(t){var e=n.composing;e&&(t.data==e.startData||/\u200b/.test(t.data)||(e.data=t.data),setTimeout(function(){e.handled||n.applyComposition(e),n.composing==e&&(n.composing=null)},50))}),ka(r,"touchstart",function(){n.forceCompositionEnd()}),ka(r,"input",function(){n.composing||n.pollContent()||Te(n.cm,function(){Ie(i)})}),ka(r,"copy",e),ka(r,"cut",e)},prepareSelection:function(){var t=It(this.cm,!1);return t.focus=this.cm.state.focused,t},showSelection:function(t){t&&this.cm.display.view.length&&(t.focus&&this.showPrimarySelection(),this.showMultipleSelections(t))},showPrimarySelection:function(){var e=t.getSelection(),n=this.cm.doc.sel.primary(),i=st(this.cm,e.anchorNode,e.anchorOffset),r=st(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!r||r.bad||0!=Po(Y(i,r),n.from())||0!=Po(X(i,r),n.to())){var o=ot(this.cm,n.from()),a=ot(this.cm,n.to());if(o||a){var s=this.cm.display.view,l=e.rangeCount&&e.getRangeAt(0);
if(o){if(!a){var c=s[s.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;a={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else o={node:s[0].measure.map[2],offset:0};try{var h=Ia(o.node,o.offset,a.offset,a.node)}catch(d){}h&&(e.removeAllRanges(),e.addRange(h),l&&null==e.anchorNode&&e.addRange(l)),this.rememberSelection()}}},showMultipleSelections:function(t){Wr(this.cm.display.cursorDiv,t.cursors),Wr(this.cm.display.selectionDiv,t.selection)},rememberSelection:function(){var e=t.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=t.getSelection();if(!e.rangeCount)return!1;var n=e.getRangeAt(0).commonAncestorContainer;return Ha(this.div,n)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():Te(this.cm,function(){e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},pollSelection:function(){if(!this.composing){var e=t.getSelection(),n=this.cm;if(e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset){this.rememberSelection();var i=st(n,e.anchorNode,e.anchorOffset),r=st(n,e.focusNode,e.focusOffset);i&&r&&Te(n,function(){Lt(n.doc,ft(i,r),Ta),(i.bad||r.bad)&&(n.curOp.selectionChanged=!0)})}}},pollContent:function(){var t=this.cm,e=t.display,n=t.doc.sel.primary(),i=n.from(),r=n.to();if(i.line<e.viewFrom||r.line>e.viewTo-1)return!1;var o;if(i.line==e.viewFrom||0==(o=_e(t,i.line)))var a=Xi(e.view[0].line),s=e.view[0].node;else var a=Xi(e.view[o].line),s=e.view[o-1].node.nextSibling;var l=_e(t,r.line);if(l==e.view.length-1)var c=e.viewTo-1,u=e.view[l].node;else var c=Xi(e.view[l+1].line)-1,u=e.view[l+1].node.previousSibling;for(var h=ja(ct(t,s,u,a,c)),d=Gi(t.doc,Ao(a,0),Ao(c,qi(t.doc,c).text.length));h.length>1&&d.length>1;)if(Lr(h)==Lr(d))h.pop(),d.pop(),c--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),a++}for(var f=0,p=0,g=h[0],m=d[0],v=Math.min(g.length,m.length);v>f&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var b=Lr(h),y=Lr(d),w=Math.min(b.length-(1==h.length?f:0),y.length-(1==d.length?f:0));w>p&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)++p;h[h.length-1]=b.slice(0,b.length-p),h[0]=h[0].slice(f);var k=Ao(a,f),x=Ao(c,d.length?Lr(d).length-p:0);return h.length>1||h[0]||Po(k,x)?(Ln(t.doc,h,k,x,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(t){t.data&&t.data!=t.startData&&Me(this.cm,J)(this.cm,t.data,0,t.sel)},setUneditable:function(t){t.setAttribute("contenteditable","false")},onKeyPress:function(t){t.preventDefault(),Me(this.cm,J)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0)},onContextMenu:Ar,resetPosition:Ar,needsContentAttribute:!0},rt.prototype),e.inputStyles={textarea:nt,contenteditable:rt},ut.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(0!=Po(n.anchor,i.anchor)||0!=Po(n.head,i.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new ht(K(this.ranges[e].anchor),K(this.ranges[e].head));return new ut(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Po(e,i.from())>=0&&Po(t,i.to())<=0)return n}return-1}},ht.prototype={from:function(){return Y(this.anchor,this.head)},to:function(){return X(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Oo,Io,Eo,Do={left:0,right:0,top:0,bottom:0},_o=null,Ho=0,Wo=0,Uo=0,zo=null;uo?zo=-.53:so?zo=15:go?zo=-.7:vo&&(zo=-1/3);var Ro=function(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}};e.wheelEventPixels=function(t){var e=Ro(t);return e.x*=zo,e.y*=zo,e};var Fo=new Cr,Bo=null,jo=e.changeEnd=function(t){return t.text?Ao(t.from.line+t.text.length-1,Lr(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};e.prototype={constructor:e,focus:function(){t.focus(),this.display.input.focus()},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,Go.hasOwnProperty(t)&&Me(this,Go[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Rn(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Ae(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Ie(this)}),removeOverlay:Ae(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void Ie(this)}}),indentLine:Ae(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),vt(this.doc,t)&&En(this,t,e,n)}),indentSelection:Ae(function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(En(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&On(this));else{var o=r.from(),a=r.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;n>l;++l)En(this,l,t);var c=this.doc.sel.ranges;0==o.ch&&e.length==c.length&&c[i].from().ch>0&&xt(this.doc,i,new ht(o,c[i].to()),Ta)}}}),getTokenAt:function(t,e){return Li(this,t,e)},getLineTokens:function(t,e){return Li(this,Ao(t),e,!0)},getTokenTypeAt:function(t){t=gt(this.doc,t);var e,n=Ai(this,qi(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}i=a+1}}var s=e?e.indexOf("cm-overlay "):-1;return 0>s?e:0==s?null:e.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!Zo.hasOwnProperty(e))return Zo;var i=Zo[e],r=this.getModeAt(t);if("string"==typeof r[e])i[r[e]]&&n.push(i[r[e]]);else if(r[e])for(var o=0;o<r[e].length;o++){var a=i[r[e][o]];a&&n.push(a)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var o=0;o<i._global.length;o++){var s=i._global[o];s.pred(r,this)&&-1==Tr(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(t,e){var n=this.doc;return t=pt(n,null==t?n.first+n.size-1:t),zt(this,t+1,e)},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?gt(this.doc,t):t?i.from():i.to(),he(this,n,e||"page")},charCoords:function(t,e){return ue(this,gt(this.doc,t),e||"page")},coordsChar:function(t,e){return t=ce(this,t,e||"page"),pe(this,t.left,t.top)},lineAtHeight:function(t,e){return t=ce(this,{top:t,left:0},e||"page").top,Yi(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>i&&(t=i,n=!0);var r=qi(this.doc,t);return le(this,r,{top:0,left:0},e||"page").top+(n?this.doc.height-Qi(r):0)},defaultTextHeight:function(){return me(this.display)},defaultCharWidth:function(){return ve(this.display)},setGutterMarker:Ae(function(t,e,n){return Dn(this.doc,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&Er(i)&&(t.gutterMarkers=null),!0})}),clearGutter:Ae(function(t){var e=this,n=e.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,Ee(e,i,"gutter"),Er(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineWidget:Ae(function(t,e,n){return wi(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!vt(this.doc,t))return null;var e=t;if(t=qi(this.doc,t),!t)return null}else{var e=Xi(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=he(this,gt(this.doc,t));var a=t.bottom,s=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),o.sizer.appendChild(e),"over"==i)a=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?a=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(a=t.bottom),s+e.offsetWidth>c&&(s=c-e.offsetWidth)}e.style.top=a+"px",e.style.left=e.style.right="","right"==r?(s=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?s=0:"middle"==r&&(s=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=s+"px"),n&&An(this,s,a,s+e.offsetWidth,a+e.offsetHeight)},triggerOnKeyDown:Ae(sn),triggerOnKeyPress:Ae(un),triggerOnKeyUp:cn,execCommand:function(t){return ea.hasOwnProperty(t)?ea[t](this):void 0},findPosH:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e);for(var o=0,a=gt(this.doc,t);e>o&&(a=Hn(this.doc,a,r,n,i),!a.hitSide);++o);return a},moveH:Ae(function(t,e){var n=this;n.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Hn(n.doc,i.head,t,e,n.options.rtlMoveVisually):0>t?i.from():i.to()},Aa)}),deleteH:Ae(function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):_n(this,function(n){var r=Hn(i,n.head,t,e,!1);return 0>t?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(t,e,n,i){var r=1,o=i;0>e&&(r=-1,e=-e);for(var a=0,s=gt(this.doc,t);e>a;++a){var l=he(this,s,"div");if(null==o?o=l.left:l.left=o,s=Wn(this,l,r,n),s.hitSide)break}return s},moveV:Ae(function(t,e){var n=this,i=this.doc,r=[],o=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(a){if(o)return 0>t?a.from():a.to();var s=he(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),r.push(s.left);var l=Wn(n,s,t,e);return"page"==e&&a==i.sel.primary()&&Nn(n,null,ue(n,l,"div").top-s.top),l},Aa),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]}),findWordAt:function(t){var e=this.doc,n=qi(e,t.line).text,i=t.ch,r=t.ch;if(n){var o=this.getHelper(t,"wordChars");(t.xRel<0||r==n.length)&&i?--i:++r;for(var a=n.charAt(i),s=Ir(a,o)?function(t){return Ir(t,o)}:/\s/.test(a)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Ir(t)};i>0&&s(n.charAt(i-1));)--i;for(;r<n.length&&s(n.charAt(r));)++r}return new ht(Ao(t.line,i),Ao(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ra(this.display.cursorDiv,"CodeMirror-overwrite"):za(this.display.cursorDiv,"CodeMirror-overwrite"),Ca(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ur()},scrollTo:Ae(function(t,e){null==t&&null==e||In(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-jt(this)-this.display.barHeight,width:t.scrollWidth-jt(this)-this.display.barWidth,clientHeight:Gt(this),clientWidth:qt(this)}},scrollIntoView:Ae(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:Ao(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)In(this),this.curOp.scrollToPos=t;else{var n=Pn(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Ae(function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var i=this;null!=t&&(i.display.wrapper.style.width=n(t)),null!=e&&(i.display.wrapper.style.height=n(e)),i.options.lineWrapping&&re(this);var r=i.display.viewFrom;i.doc.iter(r,i.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Ee(i,r,"widget");break}++r}),i.curOp.forceUpdate=!0,Ca(i,"refresh",this)}),operation:function(t){return Te(this,t)},refresh:Ae(function(){var t=this.display.cachedTextHeight;Ie(this),this.curOp.forceUpdate=!0,oe(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),h(this),(null==t||Math.abs(t-me(this.display))>.5)&&s(this),Ca(this,"refresh",this)}),swapDoc:Ae(function(t){var e=this.doc;return e.cm=null,ji(this,t),oe(this),this.display.input.reset(),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,vr(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xr(e);var qo=e.defaults={},Go=e.optionHandlers={},Vo=e.Init={toString:function(){return"CodeMirror.Init"}};Un("value","",function(t,e){t.setValue(e)},!0),Un("mode",null,function(t,e){t.doc.modeOption=e,i(t)},!0),Un("indentUnit",2,i,!0),Un("indentWithTabs",!1),Un("smartIndent",!0),Un("tabSize",4,function(t){r(t),oe(t),Ie(t)},!0),Un("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("	")?"":"|	"),"g"),t.refresh()},!0),Un("specialCharPlaceholder",Ii,function(t){t.refresh()},!0),Un("electricChars",!0),Un("inputStyle",ko?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Un("rtlMoveVisually",!Co),Un("wholeLineUpdateBefore",!0),Un("theme","default",function(t){l(t),c(t)},!0),Un("keyMap","default",function(t,n,i){var r=Rn(n),o=i!=e.Init&&Rn(i);o&&o.detach&&o.detach(t,r),r.attach&&r.attach(t,o||null)}),Un("extraKeys",null),Un("lineWrapping",!1,o,!0),Un("gutters",[],function(t){p(t.options),c(t)},!0),Un("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?$(t.display)+"px":"0",t.refresh()},!0),Un("coverGutterNextToScrollbar",!1,function(t){y(t)},!0),Un("scrollbarStyle","native",function(t){b(t),y(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),Un("lineNumbers",!1,function(t){p(t.options),c(t)},!0),Un("firstLineNumber",1,c,!0),Un("lineNumberFormatter",function(t){return t},c,!0),Un("showCursorWhenSelecting",!1,Ot,!0),Un("resetSelectionOnContextMenu",!0),Un("readOnly",!1,function(t,e){"nocursor"==e?(dn(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||t.display.input.reset())}),Un("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),Un("dragDrop",!0),Un("cursorBlinkRate",530),Un("cursorScrollMargin",0),Un("cursorHeight",1,Ot,!0),Un("singleCursorHeightPerLine",!0,Ot,!0),Un("workTime",100),Un("workDelay",100),Un("flattenSpans",!0,r,!0),Un("addModeClass",!1,r,!0),Un("pollInterval",100),Un("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),Un("historyEventDelay",1250),Un("viewportMargin",10,function(t){t.refresh()},!0),Un("maxHighlightLength",1e4,r,!0),Un("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),Un("tabindex",null,function(t,e){t.display.input.getField().tabIndex=e||""}),Un("autofocus",null);var Ko=e.modes={},Xo=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Ko[t]=n},e.defineMIME=function(t,e){Xo[t]=e},e.resolveMode=function(t){if("string"==typeof t&&Xo.hasOwnProperty(t))t=Xo[t];else if(t&&"string"==typeof t.name&&Xo.hasOwnProperty(t.name)){var n=Xo[t.name];"string"==typeof n&&(n={name:n}),t=Pr(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),i=Ko[n.name];if(!i)return e.getMode(t,"text/plain");var r=i(t,n);if(Yo.hasOwnProperty(n.name)){var o=Yo[n.name];for(var a in o)o.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=o[a])}if(r.name=n.name,n.helperType&&(r.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)r[a]=n.modeProps[a];return r},e.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),e.defineMIME("text/plain","null");var Yo=e.modeExtensions={};e.extendMode=function(t,e){var n=Yo.hasOwnProperty(t)?Yo[t]:Yo[t]={};Nr(e,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(t,e){ga.prototype[t]=e},e.defineOption=Un;var Qo=[];e.defineInitHook=function(t){Qo.push(t)};var Zo=e.helpers={};e.registerHelper=function(t,n,i){Zo.hasOwnProperty(t)||(Zo[t]=e[t]={_global:[]}),Zo[t][n]=i},e.registerGlobalHelper=function(t,n,i,r){e.registerHelper(t,n,r),Zo[t]._global.push({pred:i,val:r})};var Jo=e.copyState=function(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n},ta=e.startState=function(t,e,n){return t.startState?t.startState(e,n):!0};e.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var ea=e.commands={selectAll:function(t){t.setSelection(Ao(t.firstLine(),0),Ao(t.lastLine()),Ta)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Ta)},killLine:function(t){_n(t,function(e){if(e.empty()){var n=qi(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:Ao(e.head.line+1,0)}:{from:e.head,to:Ao(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){_n(t,function(e){return{from:Ao(e.from().line,0),to:gt(t.doc,Ao(e.to().line+1,0))}})},delLineLeft:function(t){_n(t,function(t){return{from:Ao(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){_n(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return{from:i,to:e.from()}})},delWrappedLineRight:function(t){_n(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(Ao(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Ao(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Jr(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return eo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return to(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},Aa)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},Aa)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?eo(t,e.head):i},Aa)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=Pa(t.getLine(o.line),o.ch,i);e.push(new Array(i-a%i+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){Te(t,function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++){var r=e[i].head,o=qi(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new Ao(r.line,r.ch-1)),r.ch>0)r=new Ao(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),Ao(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var a=qi(t.doc,r.line-1).text;a&&t.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),Ao(r.line-1,a.length-1),Ao(r.line,1),"+transpose")}n.push(new ht(r,r))}t.setSelections(n)})},newlineAndIndent:function(t){Te(t,function(){for(var e=t.listSelections().length,n=0;e>n;n++){var i=t.listSelections()[n];t.replaceRange("\n",i.anchor,i.head,"+input"),t.indentLine(i.from().line+1,null,!0),On(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},na=e.keyMap={};na.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},na.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},na.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},na.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},na["default"]=xo?na.macDefault:na.pcDefault,e.normalizeKeyMap=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=Mr(n.split(" "),zn),o=0;o<r.length;o++){var a,s;o==r.length-1?(s=n,a=i):(s=r.slice(0,o+1).join(" "),a="...");var l=e[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var c in e)t[c]=e[c];return t};var ia=e.lookupKey=function(t,e,n,i){e=Rn(e);var r=e.call?e.call(t,i):e[t];if(r===!1)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return ia(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var a=ia(t,e.fallthrough[o],n,i);if(a)return a}}},ra=e.isModifierKey=function(t){var e="string"==typeof t?t:Ka[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},oa=e.keyName=function(t,e){if(mo&&34==t.keyCode&&t["char"])return!1;var n=Ka[t.keyCode],i=n;return null==i||t.altGraphKey?!1:(t.altKey&&"Alt"!=n&&(i="Alt-"+i),($o?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),($o?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!e&&t.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)};e.fromTextArea=function(t,n){function i(){t.value=c.getValue()}if(n=n?Nr(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=Ur();n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(ka(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){i(),o.submit=a,o.submit(),o.submit=s}}catch(l){}}n.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(xa(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=a))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c};var aa=e.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};aa.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Pa(this.string,null,this.tabSize)-(this.lineStart?Pa(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var sa=0,la=e.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++sa};xr(la),la.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&be(t),kr(this,"clear")){var n=this.find();n&&vr(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Kn(a.markedSpans,this);t&&!this.collapsed?Ee(t,Xi(a),"text"):t&&(null!=s.to&&(r=Xi(a)),null!=s.from&&(i=Xi(a))),a.markedSpans=Xn(a.markedSpans,s),null==s.from&&this.collapsed&&!mi(this.doc,a)&&t&&Ki(a,me(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=di(this.lines[o]),c=d(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Ie(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&At(t.doc)),t&&vr(t,"markerCleared",t,this),e&&we(t),this.parent&&this.parent.clear()}},la.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],a=Kn(o.markedSpans,this);if(null!=a.from&&(n=Ao(e?o:Xi(o),a.from),-1==t))return n;if(null!=a.to&&(i=Ao(e?o:Xi(o),a.to),1==t))return i}return n&&{from:n,to:i}},la.prototype.changed=function(){var t=this.find(-1,!0),e=this,n=this.doc.cm;t&&n&&Te(n,function(){var i=t.line,r=Xi(t.line),o=Qt(n,r);if(o&&(ie(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!mi(e.doc,i)&&null!=e.height){var a=e.height;e.height=null;var s=yi(e)-a;s&&Ki(i,i.height+s)}})},la.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Tr(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},la.prototype.detachLine=function(t){if(this.lines.splice(Tr(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var sa=0,ca=e.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};xr(ca),ca.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();vr(this,"clear")}},ca.prototype.find=function(t,e){return this.primary.find(t,e)};var ua=e.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};xr(ua),ua.prototype.clear=function(){var t=this.cm,e=this.line.widgets,n=this.line,i=Xi(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=yi(this);Te(t,function(){bi(t,n,-o),Ee(t,i,"widget"),Ki(n,Math.max(0,n.height-o))})}},ua.prototype.changed=function(){var t=this.height,e=this.cm,n=this.line;this.height=null;var i=yi(this)-t;i&&Te(e,function(){e.curOp.forceUpdate=!0,bi(e,n,i),Ki(n,n.height+i)})};var ha=e.Line=function(t,e,n){this.text=t,ri(this,e),this.height=n?n(this):1};xr(ha),ha.prototype.lineNo=function(){return Xi(this)};var da={},fa={};Ri.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];this.height-=r.height,xi(r),vr(r,"delete")}this.lines.splice(t,e)},collapse:function(t){
t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},Fi.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),a=i.height;if(i.removeInner(t,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Ri))){var s=[];this.collapse(s),this.children=[new Ri(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(o>=t){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var a=r.lines.splice(r.lines.length-25,25),s=new Ri(a);r.height-=s.height,this.children.splice(i+1,0,s),s.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new Fi(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=Tr(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new Fi(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(o>t){var a=Math.min(e,o-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var pa=0,ga=e.Doc=function(t,e,n){if(!(this instanceof ga))return new ga(t,e,n);null==n&&(n=0),Fi.call(this,[new Ri([new ha("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Ao(n,0);this.sel=ft(i),this.history=new Ji(null),this.id=++pa,this.modeOption=e,"string"==typeof t&&(t=ja(t)),zi(this,{from:i,to:i,text:t}),Lt(this,ft(i),Ta)};ga.prototype=Pr(Fi.prototype,{constructor:ga,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Vi(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:Pe(function(t){var e=Ao(this.first,0),n=this.first+this.size-1;wn(this,{from:e,to:Ao(n,qi(this,n).text.length),text:ja(t),origin:"setValue",full:!0},!0),Lt(this,ft(e))}),replaceRange:function(t,e,n,i){e=gt(this,e),n=n?gt(this,n):e,Ln(this,t,e,n,i)},getRange:function(t,e,n){var i=Gi(this,gt(this,t),gt(this,e));return n===!1?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){return vt(this,t)?qi(this,t):void 0},getLineNumber:function(t){return Xi(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=qi(this,t)),di(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return gt(this,t)},getCursor:function(t){var e,n=this.sel.primary();return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||t===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Pe(function(t,e,n){Ct(this,gt(this,"number"==typeof t?Ao(t,e||0):t),null,n)}),setSelection:Pe(function(t,e,n){Ct(this,gt(this,t),gt(this,e||t),n)}),extendSelection:Pe(function(t,e,n){wt(this,gt(this,t),e&&gt(this,e),n)}),extendSelections:Pe(function(t,e){kt(this,bt(this,t,e))}),extendSelectionsBy:Pe(function(t,e){kt(this,Mr(this.sel.ranges,t),e)}),setSelections:Pe(function(t,e,n){if(t.length){for(var i=0,r=[];i<t.length;i++)r[i]=new ht(gt(this,t[i].anchor),gt(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Lt(this,dt(r,e),n)}}),addSelection:Pe(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new ht(gt(this,t),gt(this,e||t))),Lt(this,dt(i,i.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=Gi(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return t===!1?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Gi(this,n[i].from(),n[i].to());t!==!1&&(r=r.join(t||"\n")),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:Pe(function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:ja(t[o]),origin:n}}for(var s=e&&"end"!=e&&bn(this,i,e),o=i.length-1;o>=0;o--)wn(this,i[o]);s?$t(this,s):this.cm&&On(this.cm)}),undo:Pe(function(){xn(this,"undo")}),redo:Pe(function(){xn(this,"redo")}),undoSelection:Pe(function(){xn(this,"undo",!0)}),redoSelection:Pe(function(){xn(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Ji(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:ur(this.history.done),undone:ur(this.history.undone)}},setHistory:function(t){var e=this.history=new Ji(this.history.maxGeneration);e.done=ur(t.done.slice(0),null,!0),e.undone=ur(t.undone.slice(0),null,!0)},addLineClass:Pe(function(t,e,n){return Dn(this,t,"gutter"==e?"gutter":"class",function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[i]){if(zr(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:Pe(function(t,e,n){return Dn(this,t,"gutter"==e?"gutter":"class",function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(zr(n));if(!o)return!1;var a=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0})}),markText:function(t,e,n){return Fn(this,gt(this,t),gt(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=gt(this,t),Fn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=gt(this,t);var e=[],n=qi(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=gt(this,t),e=gt(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];r==t.line&&t.ch>l.to||null==l.from&&r!=t.line||r==e.line&&l.from>e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,void++n)}),gt(this,Ao(n,e))},indexFromPos:function(t){t=gt(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new ga(Vi(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new ga(Vi(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],qn(i,jn(this)),i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Gn(jn(this));break}}if(t.history==this.history){var r=[t.id];Bi(t,function(t){r.push(t.id)},!0),t.history=new Ji(null),t.history.done=ur(this.history.done,r),t.history.undone=ur(this.history.undone,r)}},iterLinkedDocs:function(t){Bi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ga.prototype.eachLine=ga.prototype.iter;var ma="iter insert remove copy getEditor".split(" ");for(var va in ga.prototype)ga.prototype.hasOwnProperty(va)&&Tr(ma,va)<0&&(e.prototype[va]=function(t){return function(){return t.apply(this.doc,arguments)}}(ga.prototype[va]));xr(ga);var ba=e.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},ya=e.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},wa=e.e_stop=function(t){ba(t),ya(t)},ka=e.on=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={}),r=i[e]||(i[e]=[]);r.push(n)}},xa=e.off=function(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}},Ca=e.signal=function(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)},Sa=null,$a=30,La=e.Pass={toString:function(){return"CodeMirror.Pass"}},Ta={scroll:!1},Ma={origin:"*mouse"},Aa={origin:"+move"};Cr.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Pa=e.countColumn=function(t,e,n,i,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=i||0,a=r||0;;){var s=t.indexOf("	",o);if(0>s||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}},Na=[""],Oa=function(t){t.select()};wo?Oa=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:uo&&(Oa=function(t){try{t.select()}catch(e){}});var Ia,Ea=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Da=e.isWordChar=function(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Ea.test(t))},_a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Ia=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var Ha=e.contains=function(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do if(11==e.nodeType&&(e=e.host),e==t)return!0;while(e=e.parentNode)};uo&&11>ho&&(Ur=function(){try{return document.activeElement}catch(t){return document.body}});var Wa,Ua,za=e.rmClass=function(t,e){var n=t.className,i=zr(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}},Ra=e.addClass=function(t,e){var n=t.className;zr(e).test(n)||(t.className+=(n?" ":"")+e)},Fa=!1,Ba=function(){if(uo&&9>ho)return!1;var t=_r("div");return"draggable"in t||"dragDrop"in t}(),ja=e.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;i>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},qa=t.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},Ga=function(){var t=_r("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Va=null,Ka={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Ka,function(){for(var t=0;10>t;t++)Ka[t+48]=Ka[t+96]=String(t);for(var t=65;90>=t;t++)Ka[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Ka[t+111]=Ka[t+63235]="F"+t}();var Xa,Ya=function(){function t(t){return 247>=t?n.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1773>=t?i.charAt(t-1536):t>=1774&&2220>=t?"r":t>=8192&&8203>=t?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!r.test(n))return!1;for(var i,u=n.length,h=[],d=0;u>d;++d)h.push(i=t(n.charCodeAt(d)));for(var d=0,f=c;u>d;++d){var i=h[d];"m"==i?h[d]=f:f=i}for(var d=0,p=c;u>d;++d){var i=h[d];"1"==i&&"r"==p?h[d]="n":a.test(i)&&(p=i,"r"==i&&(h[d]="R"))}for(var d=1,f=h[0];u-1>d;++d){var i=h[d];"+"==i&&"1"==f&&"1"==h[d+1]?h[d]="1":","!=i||f!=h[d+1]||"1"!=f&&"n"!=f||(h[d]=f),f=i}for(var d=0;u>d;++d){var i=h[d];if(","==i)h[d]="N";else if("%"==i){for(var g=d+1;u>g&&"%"==h[g];++g);for(var m=d&&"!"==h[d-1]||u>g&&"1"==h[g]?"1":"N",v=d;g>v;++v)h[v]=m;d=g-1}}for(var d=0,p=c;u>d;++d){var i=h[d];"L"==p&&"1"==i?h[d]="L":a.test(i)&&(p=i)}for(var d=0;u>d;++d)if(o.test(h[d])){for(var g=d+1;u>g&&o.test(h[g]);++g);for(var b="L"==(d?h[d-1]:c),y="L"==(u>g?h[g]:c),m=b||y?"L":"R",v=d;g>v;++v)h[v]=m;d=g-1}for(var w,k=[],d=0;u>d;)if(s.test(h[d])){var x=d;for(++d;u>d&&s.test(h[d]);++d);k.push(new e(0,x,d))}else{var C=d,S=k.length;for(++d;u>d&&"L"!=h[d];++d);for(var v=C;d>v;)if(l.test(h[v])){v>C&&k.splice(S,0,new e(1,C,v));var $=v;for(++v;d>v&&l.test(h[v]);++v);k.splice(S,0,new e(2,$,v)),C=v}else++v;d>C&&k.splice(S,0,new e(1,C,d))}return 1==k[0].level&&(w=n.match(/^\s+/))&&(k[0].from=w[0].length,k.unshift(new e(0,0,w[0].length))),1==Lr(k).level&&(w=n.match(/\s+$/))&&(Lr(k).to-=w[0].length,k.push(new e(0,u-w[0].length,u))),k[0].level!=Lr(k).level&&k.push(new e(k[0].level,u,u)),k}}();e.version="5.0.0",t.CodeMirror=e}(window),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],t):t(CodeMirror)}(function(t){t.defineMode("markdown",function(e,n){function i(n){if(t.findModeByName){var i=t.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=t.getMode(e,n);return"null"==r.name?null:r}function r(t,e,n){return e.f=e.inline=n,n(t,e)}function o(t,e,n){return e.f=e.block=n,n(t,e)}function a(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,k||t.f!=l||(t.f=f,t.block=s),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.thisLineHasContent=!1,null}function s(t,e){var o=t.sol(),a=e.list!==!1;e.list!==!1&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):e.list!==!1&&e.indentation>0?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):e.list!==!1&&(e.list=!1,e.listDepth=0);var s=null;if(e.indentationDiff>=4)return e.indentation-=4,t.skipToEnd(),$;if(t.eatSpace())return null;if(s=t.match(j))return e.header=s[0].length<=6?s[0].length:6,n.highlightFormatting&&(e.formatting="header"),e.f=e.inline,h(e);if(e.prevLineHasContent&&(s=t.match(q)))return e.header="="==s[0].charAt(0)?1:2,n.highlightFormatting&&(e.formatting="header"),e.f=e.inline,h(e);if(t.eat(">"))return e.indentation++,e.quote=o?1:e.quote+1,n.highlightFormatting&&(e.formatting="quote"),t.eatSpace(),h(e);if("["===t.peek())return r(t,e,v);if(t.match(z,!0))return P;if((!e.prevLineHasContent||a)&&(t.match(R,!1)||t.match(F,!1))){var l=null;return t.match(R,!0)?l="ul":(t.match(F,!0),l="ol"),e.indentation+=4,e.list=!0,e.listDepth++,n.taskLists&&t.match(B,!1)&&(e.taskList=!0),e.f=e.inline,n.highlightFormatting&&(e.formatting=["list","list-"+l]),h(e)}return n.fencedCodeBlocks&&t.match(/^```[ \t]*([\w+#]*)/,!0)?(e.localMode=i(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),e.f=e.block=c,n.highlightFormatting&&(e.formatting="code-block"),e.code=!0,h(e)):r(t,e,e.inline)}function l(t,e){var n=x.token(t,e.htmlState);return(k&&null===e.htmlState.tagStart&&!e.htmlState.context||e.md_inside&&t.current().indexOf(">")>-1)&&(e.f=f,e.block=s,e.htmlState=null),n}function c(t,e){return t.sol()&&t.match("```",!1)?(e.localMode=e.localState=null,e.f=e.block=u,null):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),$)}function u(t,e){t.match("```"),e.block=s,e.f=f,n.highlightFormatting&&(e.formatting="code-block"),e.code=!0;var i=h(e);return e.code=!1,i}function h(t){var e=[];if(t.formatting){e.push(O),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var i=0;i<t.formatting.length;i++)e.push(O+"-"+t.formatting[i]),"header"===t.formatting[i]&&e.push(O+"-"+t.formatting[i]+"-"+t.header),"quote"===t.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(O+"-"+t.formatting[i]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref)return e.push(_),e.length?e.join(" "):null;if(t.strong&&e.push(W),t.em&&e.push(H),t.strikethrough&&e.push(U),t.linkText&&e.push(D),t.code&&e.push($),t.header&&(e.push(S),e.push(S+"-"+t.header)),t.quote&&(e.push(L),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(L+"-"+t.quote):e.push(L+"-"+n.maxBlockquoteDepth)),t.list!==!1){var r=(t.listDepth-1)%3;r?1===r?e.push(M):e.push(A):e.push(T)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function d(t,e){return t.match(G,!0)?h(e):void 0}function f(e,i){var r=i.text(e,i);if("undefined"!=typeof r)return r;if(i.list)return i.list=null,h(i);if(i.taskList){var a="x"!==e.match(B,!0)[1];return a?i.taskOpen=!0:i.taskClosed=!0,n.highlightFormatting&&(i.formatting="task"),i.taskList=!1,h(i)}if(i.taskOpen=!1,i.taskClosed=!1,i.header&&e.match(/^#+$/,!0))return n.highlightFormatting&&(i.formatting="header"),h(i);var s=e.sol(),c=e.next();if("\\"===c&&(e.next(),n.highlightFormatting)){var u=h(i);return u?u+" formatting-escape":"formatting-escape"}if(i.linkTitle){i.linkTitle=!1;var d=c;"("===c&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var f="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(e.match(new RegExp(f),!0))return _}if("`"===c){var m=i.formatting;n.highlightFormatting&&(i.formatting="code");var v=h(i),b=e.pos;e.eatWhile("`");var y=1+e.pos-b;return i.code?y===C?(i.code=!1,v):(i.formatting=m,h(i)):(C=y,i.code=!0,h(i))}if(i.code)return h(i);if("!"===c&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),i.inline=i.f=g,N;if("["===c&&e.match(/.*\](\(.*\)| ?\[.*\])/,!1))return i.linkText=!0,n.highlightFormatting&&(i.formatting="link"),h(i);if("]"===c&&i.linkText&&e.match(/\(.*\)| ?\[.*\]/,!1)){n.highlightFormatting&&(i.formatting="link");var u=h(i);return i.linkText=!1,i.inline=i.f=g,u}if("<"===c&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=p,n.highlightFormatting&&(i.formatting="link");var u=h(i);return u?u+=" ":u="",u+I}if("<"===c&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){i.f=i.inline=p,n.highlightFormatting&&(i.formatting="link");var u=h(i);return u?u+=" ":u="",u+E}if("<"===c&&e.match(/^\w/,!1)){if(-1!=e.string.indexOf(">")){var w=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(w)&&(i.md_inside=!0)}return e.backUp(1),i.htmlState=t.startState(x),o(e,i,l)}if("<"===c&&e.match(/^\/\w*?>/))return i.md_inside=!1,"tag";var k=!1;if(!n.underscoresBreakWords&&"_"===c&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var S=e.pos-2;if(S>=0){var $=e.string.charAt(S);"_"!==$&&$.match(/(\w)/,!1)&&(k=!0)}}if("*"===c||"_"===c&&!k)if(s&&" "===e.peek());else{if(i.strong===c&&e.eat(c)){n.highlightFormatting&&(i.formatting="strong");var v=h(i);return i.strong=!1,v}if(!i.strong&&e.eat(c))return i.strong=c,n.highlightFormatting&&(i.formatting="strong"),h(i);if(i.em===c){n.highlightFormatting&&(i.formatting="em");var v=h(i);return i.em=!1,v}if(!i.em)return i.em=c,n.highlightFormatting&&(i.formatting="em"),h(i)}else if(" "===c&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return h(i);e.backUp(1)}if(n.strikethrough)if("~"===c&&e.eatWhile(c)){if(i.strikethrough){n.highlightFormatting&&(i.formatting="strikethrough");var v=h(i);return i.strikethrough=!1,v}if(e.match(/^[^\s]/,!1))return i.strikethrough=!0,n.highlightFormatting&&(i.formatting="strikethrough"),h(i)}else if(" "===c&&e.match(/^~~/,!0)){if(" "===e.peek())return h(i);e.backUp(2)}return" "===c&&(e.match(/ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),h(i)}function p(t,e){var i=t.next();if(">"===i){e.f=e.inline=f,n.highlightFormatting&&(e.formatting="link");var r=h(e);return r?r+=" ":r="",r+I}return t.match(/^[^>]+/,!0),I}function g(t,e){if(t.eatSpace())return null;var i=t.next();return"("===i||"["===i?(e.f=e.inline=m("("===i?")":"]"),n.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,h(e)):"error"}function m(t){return function(e,i){var r=e.next();if(r===t){i.f=i.inline=f,n.highlightFormatting&&(i.formatting="link-string");var o=h(i);return i.linkHref=!1,o}return e.match(w(t),!0)&&e.backUp(1),i.linkHref=!0,h(i)}}function v(t,e){return t.match(/^[^\]]*\]:/,!1)?(e.f=b,t.next(),n.highlightFormatting&&(e.formatting="link"),e.linkText=!0,h(e)):r(t,e,f)}function b(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=y,n.highlightFormatting&&(e.formatting="link");var i=h(e);return e.linkText=!1,i}return t.match(/^[^\]]+/,!0),D}function y(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=f,_)}function w(t){return V[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[t]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),V[t]}var k=t.modes.hasOwnProperty("xml"),x=t.getMode(e,k?{name:"xml",htmlMode:!0}:"text/plain");void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1);var C=0,S="header",$="comment",L="quote",T="variable-2",M="variable-3",A="keyword",P="hr",N="tag",O="formatting",I="link",E="link",D="link",_="string",H="em",W="strong",U="strikethrough",z=/^([*\-=_])(?:\s*\1){2,}\s*$/,R=/^[*\-+]\s+/,F=/^[0-9]+\.\s+/,B=/^\[(x| )\](?=\s)/,j=/^#+/,q=/^(?:\={1,}|-{1,})$/,G=/^[^#!\[\]*_\\<>` "'(~]+/,V=[],K={startState:function(){return{f:s,prevLineHasContent:!1,thisLineHasContent:!1,block:s,htmlState:null,indentation:0,inline:f,text:d,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:e.htmlState&&t.copyState(x,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkTitle:e.linkTitle,em:e.em,strong:e.strong,strikethrough:e.strikethrough,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside}},token:function(t,e){if(e.formatting=!1,t.sol()){var n=!!e.header;if(e.header=0,t.match(/^\s*$/,!0)||n)return e.prevLineHasContent=!1,a(e),n?this.token(t,e):null;e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.taskList=!1,e.code=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var i=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,r=4*Math.floor((i-e.indentation)/4);r>4&&(r=4);var o=e.indentation+r;if(e.indentationDiff=o-e.indentation,e.indentation=o,i>0)return null}return e.f(t,e)},innerMode:function(t){return t.block==l?{state:t.htmlState,mode:x}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:K}},blankLine:a,getType:h,fold:"markdown"};return K},"xml"),t.defineMIME("text/x-markdown","markdown")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.overlayMode=function(e,n,i){return{startState:function(){return{base:t.startState(e),overlay:t.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:t.copyState(e,i.base),overlay:t.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(t,r){return(t!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<t.start)&&(r.streamSeen=t,r.basePos=r.overlayPos=t.start),t.start==r.basePos&&(r.baseCur=e.token(t,r.base),r.basePos=t.pos),t.start==r.overlayPos&&(t.pos=t.start,r.overlayCur=n.token(t,r.overlay),r.overlayPos=t.pos),t.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(t){e.blankLine&&e.blankLine(t.base),n.blankLine&&n.blankLine(t.overlay)}}}}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){t.defineMode("xml",function(e,n){function i(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();if("<"==i)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(a("atom","]]>")):null:t.match("--")?n(a("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(s(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta"):(C=t.eat("/")?"closeTag":"openTag",e.tokenize=r,"tag bracket");if("&"==i){var o;return o=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),o?"atom":"error"}return t.eatWhile(/[^&<]/),null}function r(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=i,C=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return C="equals",null;if("<"==n){e.tokenize=i,e.state=h,e.tagName=e.tagStart=null;var r=e.tokenize(t,e);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=o(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=r;break}return"string"};return e.isInAttribute=!0,e}function a(t,e){return function(n,r){for(;!n.eol();){if(n.match(e)){r.tokenize=i;break}n.next()}return t}}function s(t){return function(e,n){for(var r;null!=(r=e.next());){if("<"==r)return n.tokenize=s(t+1),n.tokenize(e,n);if(">"==r){if(1==t){n.tokenize=i;break}return n.tokenize=s(t-1),n.tokenize(e,n)}}return"meta"}}function l(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,($.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function c(t){t.context&&(t.context=t.context.prev)}function u(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!$.contextGrabbers.hasOwnProperty(n)||!$.contextGrabbers[n].hasOwnProperty(e))return;c(t)}}function h(t,e,n){return"openTag"==t?(n.tagStart=e.column(),d):"closeTag"==t?f:h}function d(t,e,n){return"word"==t?(n.tagName=e.current(),S="tag",m):(S="error",d)}function f(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&$.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==i?(S="tag",p):(S="tag error",g)}return S="error",g}function p(t,e,n){return"endTag"!=t?(S="error",p):(c(n),h)}function g(t,e,n){return S="error",p(t,e,n)}function m(t,e,n){if("word"==t)return S="attribute",v;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||$.autoSelfClosers.hasOwnProperty(i)?u(n,i):(u(n,i),n.context=new l(n,i,r==n.indented)),h}return S="error",m}function v(t,e,n){return"equals"==t?b:($.allowMissing||(S="error"),m(t,e,n))}function b(t,e,n){return"string"==t?y:"word"==t&&$.allowUnquoted?(S="string",
m):(S="error",m(t,e,n))}function y(t,e,n){return"string"==t?y:m(t,e,n)}var w=e.indentUnit,k=n.multilineTagIndentFactor||1,x=n.multilineTagIndentPastTag;null==x&&(x=!0);var C,S,$=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},L=n.alignCDATA;return{startState:function(){return{tokenize:i,state:h,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;C=null;var n=e.tokenize(t,e);return(n||C)&&"comment"!=n&&(S=null,e.state=e.state(C||n,t,e),S&&(n="error"==S?n+" error":S)),n},indent:function(e,n,o){var a=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+w;if(a&&a.noIndent)return t.Pass;if(e.tokenize!=r&&e.tokenize!=i)return o?o.match(/^(\s*)/)[0].length:0;if(e.tagName)return x?e.tagStart+e.tagName.length+2:e.tagStart+w*k;if(L&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;a;){if(a.tagName==s[2]){a=a.prev;break}if(!$.implicitlyClosed.hasOwnProperty(a.tagName))break;a=a.prev}else if(s)for(;a;){var l=$.contextGrabbers[a.tagName];if(!l||!l.hasOwnProperty(s[2]))break;a=a.prev}for(;a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../markdown/markdown"),require("../../addon/mode/overlay")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],t):t(CodeMirror)}(function(t){t.defineMode("gfm",function(e,n){function i(t){return t.code=!1,null}var r=0,o={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,e){if(e.combineTokens=null,e.codeBlock)return t.match(/^```/)?(e.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(e.code=!1),t.sol()&&t.match(/^```/))return t.skipToEnd(),e.codeBlock=!0,null;if("`"===t.peek()){t.next();var n=t.pos;t.eatWhile("`");var i=1+t.pos-n;return e.code?i===r&&(e.code=!1):(r=i,e.code=!0),null}if(e.code)return t.next(),null;if(t.eatSpace())return e.ateSpace=!0,null;if(t.sol()||e.ateSpace){if(e.ateSpace=!1,t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return e.combineTokens=!0,"link";if(t.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return e.combineTokens=!0,"link"}return t.match(/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i)&&"]("!=t.string.slice(t.start-2,t.start)?(e.combineTokens=!0,"link"):(t.next(),null)},blankLine:i},a={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:!0,strikethrough:!0};for(var s in n)a[s]=n[s];return a.name="markdown",t.defineMIME("gfmBase",a),t.overlayMode(t.getMode(e,"gfmBase"),o)},"markdown")}),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=u.normal,this.options.gfm&&(this.options.tables?this.rules=u.tables:this.rules=u.gfm)}function e(t,e){if(this.options=e||c.defaults,this.links=t,this.rules=h.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function n(t){this.options=t||{}}function i(t){this.tokens=[],this.token=null,this.options=t||c.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function r(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(t){return t.replace(/&([#\w]+);/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function a(t,e){return t=t.source,e=e||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,r),n):new RegExp(t,e)}}function s(){}function l(t){for(var e,n,i=1;i<arguments.length;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function c(e,n,o){if(o||"function"==typeof n){o||(o=n,n=null),n=l({},c.defaults,n||{});var a,s,u=n.highlight,h=0;try{a=t.lex(e,n)}catch(d){return o(d)}s=a.length;var f=function(t){if(t)return n.highlight=u,o(t);var e;try{e=i.parse(a,n)}catch(r){t=r}return n.highlight=u,t?o(t):o(null,e)};if(!u||u.length<3)return f();if(delete n.highlight,!s)return f();for(;h<a.length;h++)!function(t){return"code"!==t.type?--s||f():u(t.text,t.lang,function(e,n){return e?f(e):null==n||n===t.text?--s||f():(t.text=n,t.escaped=!0,void(--s||f()))})}(a[h])}else try{return n&&(n=l({},c.defaults,n)),i.parse(t.lex(e,n),n)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+r(d.message+"",!0)+"</pre>";throw d}}var u={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};u.bullet=/(?:[*+-]|\d+\.)/,u.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,u.item=a(u.item,"gm")(/bull/g,u.bullet)(),u.list=a(u.list)(/bull/g,u.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+u.def.source+")")(),u.blockquote=a(u.blockquote)("def",u.def)(),u._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",u.html=a(u.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,u._tag)(),u.paragraph=a(u.paragraph)("hr",u.hr)("heading",u.heading)("lheading",u.lheading)("blockquote",u.blockquote)("tag","<"+u._tag)("def",u.def)(),u.normal=l({},u),u.gfm=l({},u.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),u.gfm.paragraph=a(u.paragraph)("(?!","(?!"+u.gfm.fences.source.replace("\\1","\\2")+"|"+u.list.source.replace("\\1","\\3")+"|")(),u.tables=l({},u.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=u,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,n){for(var i,r,o,a,s,l,c,h,d,t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(e&&(o=this.rules.nptable.exec(t))){for(t=t.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,e,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),o=o[0].match(this.rules.item),i=!1,d=o.length,h=0;d>h;h++)l=o[h],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&h!==d-1&&(s=u.bullet.exec(o[h+1])[0],a===s||a.length>1&&s.length>1||(t=o.slice(h+1).join("\n")+t,h=d-1)),r=i||/\n\n(?!\s*$)/.test(l),h!==d-1&&(i="\n"===l.charAt(l.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0]});else if(!n&&e&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(e&&(o=this.rules.table.exec(t))){for(t=t.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=a(h.link)("inside",h._inside)("href",h._href)(),h.reflink=a(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:a(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:a(h.br)("{2,}","*")(),text:a(h.gfm.text)("{2,}","*")()}),e.rules=h,e.output=function(t,n,i){var r=new e(n,i);return r.output(t)},e.prototype.output=function(t){for(var e,n,i,o,a="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),a+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+n):(n=r(o[1]),i=n),a+=this.renderer.link(i,null,n);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),t=t.substring(o[0].length),a+=this.options.sanitize?r(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),this.inLink=!0,a+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){a+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),a+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),a+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),a+=this.renderer.codespan(r(o[2],!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),a+=r(this.smartypants(o[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(o[0].length),n=r(o[1]),i=n,a+=this.renderer.link(i,null,n);return a},e.prototype.outputLink=function(t,e){var n=r(e.href),i=e.title?r(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,r(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},e.prototype.mangle=function(t){for(var e,n="",i=t.length,r=0;i>r;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+r(e,!0)+'">'+(n?t:r(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:r(t,!0))+"\n</code></pre>"},n.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},n.prototype.html=function(t){return t},n.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},n.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},n.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},n.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},n.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},n.prototype.tablecell=function(t,e){var n=e.header?"th":"td",i=e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">";return i+t+"</"+n+">\n"},n.prototype.strong=function(t){return"<strong>"+t+"</strong>"},n.prototype.em=function(t){return"<em>"+t+"</em>"},n.prototype.codespan=function(t){return"<code>"+t+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(t){return"<del>"+t+"</del>"},n.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(o(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:"))return""}var a='<a href="'+t+'"';return e&&(a+=' title="'+e+'"'),a+=">"+n+"</a>"},n.prototype.image=function(t,e,n){var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},i.parse=function(t,e,n){var r=new i(e,n);return r.parse(t)},i.prototype.parse=function(t){this.inline=new e(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,r,o="",a="";for(n="",t=0;t<this.token.header.length;t++)i={header:!0,align:this.token.align[t]},n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});a+=this.renderer.tablerow(n)}return this.renderer.table(o,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",s=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,c.options=c.setOptions=function(t){return l(c.defaults,t),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},c.Parser=i,c.parser=i.parse,c.Renderer=n,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=e,c.inlineLexer=e.output,c.parse=c,window.marked=c,"undefined"!=typeof module&&"object"==typeof exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),function(t){var e=[];return t.component("htmleditor",{defaults:{iframe:!0,mode:"split",markdown:!0,autocomplete:!0,height:500,maxsplitsize:350,codemirror:{mode:"htmlmixed",lineWrapping:!0,dragDrop:!1,autoCloseTags:!0,matchTags:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4,hintOptions:{completionSingle:!1}},toolbar:["bold","italic","strike","link","image","blockquote","listUl","listOl"],lblPreview:"Preview",lblCodeview:"Markdown",lblMarkedview:"Markdown"},boot:function(){t.ready(function(e){t.$("textarea[data-uk-htmleditor]",e).each(function(){var e=t.$(this);e.data("htmleditor")||t.htmleditor(e,t.Utils.options(e.attr("data-uk-htmleditor")))})})},init:function(){var n=this,i=t.components.htmleditor.template;this.buttons={},i=i.replace(/\{:lblPreview}/g,this.options.lblPreview),i=i.replace(/\{:lblCodeview}/g,this.options.lblCodeview),this.htmleditor=t.$(i),this.content=this.htmleditor.find(".uk-htmleditor-content"),this.toolbar=this.htmleditor.find(".uk-htmleditor-toolbar"),this.preview=this.htmleditor.find(".uk-htmleditor-preview").children().eq(0),this.code=this.htmleditor.find(".uk-htmleditor-code"),this.element.before(this.htmleditor).appendTo(this.code),this.editor=window.CodeMirror.fromTextArea(this.element[0],this.options.codemirror),this.editor.htmleditor=this,this.editor.on("change",t.Utils.debounce(function(){n.render()},150)),this.editor.on("change",function(){n.editor.save(),n.element.trigger("input")}),this.code.find(".CodeMirror").css("height",this.options.height),this.options.iframe?(this.iframe=t.$('<iframe class="uk-htmleditor-iframe" frameborder="0" scrolling="auto" height="100" width="100%"></iframe>'),this.preview.append(this.iframe),this.iframe[0].contentWindow.document.open(),this.iframe[0].contentWindow.document.close(),this.preview.container=t.$(this.iframe[0].contentWindow.document).find("body"),"string"==typeof this.options.iframe&&this.preview.container.parent().append('<link rel="stylesheet" href="'+this.options.iframe+'">')):this.preview.container=this.preview,t.$win.on("resize load",t.Utils.debounce(function(){n.fit()},200));var r=this.iframe?this.preview.container:n.preview.parent(),o=this.code.find(".CodeMirror-sizer"),a=this.code.find(".CodeMirror-scroll").on("scroll",t.Utils.debounce(function(){if("tab"!=n.htmleditor.attr("data-mode")){var t=o.height()-a.height(),e=r[0].scrollHeight-(n.iframe?n.iframe.height():r.height()),i=e/t,s=a.scrollTop()*i;r.scrollTop(s)}},10));this.htmleditor.on("click",".uk-htmleditor-button-code, .uk-htmleditor-button-preview",function(e){e.preventDefault(),"tab"==n.htmleditor.attr("data-mode")&&(n.htmleditor.find(".uk-htmleditor-button-code, .uk-htmleditor-button-preview").removeClass("uk-active").filter(this).addClass("uk-active"),n.activetab=t.$(this).hasClass("uk-htmleditor-button-code")?"code":"preview",n.htmleditor.attr("data-active-tab",n.activetab),n.editor.refresh())}),this.htmleditor.on("click","a[data-htmleditor-button]",function(){n.code.is(":visible")&&n.trigger("action."+t.$(this).data("htmleditor-button"),[n.editor])}),this.preview.parent().css("height",this.code.height()),this.options.autocomplete&&window.CodeMirror.showHint&&window.CodeMirror.hint&&window.CodeMirror.hint.html&&this.editor.on("inputRead",t.Utils.debounce(function(){var t=n.editor.getDoc(),e=t.getCursor(),i=window.CodeMirror.innerMode(n.editor.getMode(),n.editor.getTokenAt(e).state).mode.name;if("xml"==i){var r=n.editor.getCursor(),o=n.editor.getTokenAt(r);"<"!=o.string.charAt(0)&&"attribute"!=o.type||window.CodeMirror.showHint(n.editor,window.CodeMirror.hint.html,{completeSingle:!1})}},100)),this.debouncedRedraw=t.Utils.debounce(function(){n.redraw()},5),this.on("init.uk.component",function(){n.debouncedRedraw()}),this.element.attr("data-uk-check-display",1).on("display.uk.check",function(t){this.htmleditor.is(":visible")&&this.fit()}.bind(this)),e.push(this)},addButton:function(t,e){this.buttons[t]=e},addButtons:function(e){t.$.extend(this.buttons,e)},replaceInPreview:function(t,e){function n(t){var e=i.getValue().substring(0,t).split("\n");return{line:e.length-1,ch:e[e.length-1].length}}var i=this.editor,r=[],o=i.getValue(),a=-1,s=0;return this.currentvalue=this.currentvalue.replace(t,function(){a=o.indexOf(arguments[0],++a);var t={matches:arguments,from:n(a),to:n(a+arguments[0].length),replace:function(e){i.replaceRange(e,t.from,t.to)},inRange:function(e){return e.line===t.from.line&&e.line===t.to.line?e.ch>=t.from.ch&&e.ch<t.to.ch:e.line===t.from.line&&e.ch>=t.from.ch||e.line>t.from.line&&e.line<t.to.line||e.line===t.to.line&&e.ch<t.to.ch}},l=e(t,s);return l?(s++,r.push(t),l):arguments[0]}),r},_buildtoolbar:function(){if(this.options.toolbar&&this.options.toolbar.length){var t=this,e=[];this.toolbar.empty(),this.options.toolbar.forEach(function(n){if(t.buttons[n]){var i=t.buttons[n].title?t.buttons[n].title:n;e.push('<li><a data-htmleditor-button="'+n+'" title="'+i+'" data-uk-tooltip>'+t.buttons[n].label+"</a></li>")}}),this.toolbar.html(e.join("\n"))}},fit:function(){var t=this.options.mode;"split"==t&&this.htmleditor.width()<this.options.maxsplitsize&&(t="tab"),"tab"==t&&(this.activetab||(this.activetab="code",this.htmleditor.attr("data-active-tab",this.activetab)),this.htmleditor.find(".uk-htmleditor-button-code, .uk-htmleditor-button-preview").removeClass("uk-active").filter("code"==this.activetab?".uk-htmleditor-button-code":".uk-htmleditor-button-preview").addClass("uk-active")),this.editor.refresh(),this.preview.parent().css("height",this.code.height()),this.htmleditor.attr("data-mode",t)},redraw:function(){this._buildtoolbar(),this.render(),this.fit()},getMode:function(){return this.editor.getOption("mode")},getCursorMode:function(){var t={mode:"html"};return this.trigger("cursorMode",[t]),t.mode},render:function(){return this.currentvalue=this.editor.getValue(),this.currentvalue?(this.trigger("render",[this]),this.trigger("renderLate",[this]),void this.preview.container.html(this.currentvalue)):(this.element.val(""),void this.preview.container.html(""))},addShortcut:function(e,n){var i={};return t.$.isArray(e)||(e=[e]),e.forEach(function(t){i[t]=n}),this.editor.addKeyMap(i),i},addShortcutAction:function(t,e){var n=this;this.addShortcut(e,function(){n.element.trigger("action."+t,[n.editor])})},replaceSelection:function(t){var e=this.editor.getSelection();if(!e.length){for(var n=this.editor.getCursor(),i=this.editor.getLine(n.line),r=n.ch,o=r;o<i.length&&/[\w$]+/.test(i.charAt(o));)++o;for(;r&&/[\w$]+/.test(i.charAt(r-1));)--r;var a=r!=o&&i.slice(r,o);a&&(this.editor.setSelection({line:n.line,ch:r},{line:n.line,ch:o}),e=a)}var s=t.replace("$1",e);this.editor.replaceSelection(s,"end"),this.editor.focus()},replaceLine:function(t){var e=this.editor.getDoc().getCursor(),n=this.editor.getLine(e.line),i=t.replace("$1",n);this.editor.replaceRange(i,{line:e.line,ch:0},{line:e.line,ch:n.length}),this.editor.setCursor({line:e.line,ch:i.length}),this.editor.focus()},save:function(){this.editor.save()}}),t.components.htmleditor.template=['<div class="uk-htmleditor uk-clearfix" data-mode="split">','<div class="uk-htmleditor-navbar">','<ul class="uk-htmleditor-navbar-nav uk-htmleditor-toolbar"></ul>','<div class="uk-htmleditor-navbar-flip">','<ul class="uk-htmleditor-navbar-nav">','<li class="uk-htmleditor-button-code"><a>{:lblCodeview}</a></li>','<li class="uk-htmleditor-button-preview"><a>{:lblPreview}</a></li>','<li><a data-htmleditor-button="fullscreen"><i class="uk-icon-expand"></i></a></li>',"</ul>","</div>","</div>",'<div class="uk-htmleditor-content">','<div class="uk-htmleditor-code"></div>','<div class="uk-htmleditor-preview"><div></div></div>',"</div>","</div>"].join(""),t.plugin("htmleditor","base",{init:function(e){function n(t,n,i){e.on("action."+t,function(){"html"==e.getCursorMode()&&e["replaceLine"==i?"replaceLine":"replaceSelection"](n)})}e.addButtons({fullscreen:{title:"Fullscreen",label:'<i class="uk-icon-expand"></i>'},bold:{title:"Bold",label:'<i class="uk-icon-bold"></i>'},italic:{title:"Italic",label:'<i class="uk-icon-italic"></i>'},strike:{title:"Strikethrough",label:'<i class="uk-icon-strikethrough"></i>'},blockquote:{title:"Blockquote",label:'<i class="uk-icon-quote-right"></i>'},link:{title:"Link",label:'<i class="uk-icon-link"></i>'},image:{title:"Image",label:'<i class="uk-icon-picture-o"></i>'},listUl:{title:"Unordered List",label:'<i class="uk-icon-list-ul"></i>'},listOl:{title:"Ordered List",label:'<i class="uk-icon-list-ol"></i>'}}),n("bold","<strong>$1</strong>"),n("italic","<em>$1</em>"),n("strike","<del>$1</del>"),n("blockquote","<blockquote><p>$1</p></blockquote>","replaceLine"),n("link",'<a href="http://">$1</a>'),n("image",'<img src="http://" alt="$1">');var i=function(){if("html"==e.getCursorMode()){for(var t=e.editor,n=t.getDoc().getCursor(!0),i=t.getDoc().getCursor(!1),r=n.line;r<i.line+1;r++)t.replaceRange("<li>"+t.getLine(r)+"</li>",{line:r,ch:0},{line:r,ch:t.getLine(r).length});t.setCursor({line:i.line,ch:t.getLine(i.line).length}),t.focus()}};e.on("action.listUl",function(){i()}),e.on("action.listOl",function(){i()}),e.htmleditor.on("click",'a[data-htmleditor-button="fullscreen"]',function(){e.htmleditor.toggleClass("uk-htmleditor-fullscreen");var n=e.editor.getWrapperElement();if(e.htmleditor.hasClass("uk-htmleditor-fullscreen"))e.editor.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:n.style.width,height:n.style.height},n.style.width="",n.style.height=e.content.height()+"px",document.documentElement.style.overflow="hidden";else{document.documentElement.style.overflow="";var i=e.editor.state.fullScreenRestore;n.style.width=i.width,n.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop)}setTimeout(function(){e.fit(),t.$win.trigger("resize")},50)}),e.addShortcut(["Ctrl-S","Cmd-S"],function(){e.element.trigger("htmleditor-save",[e])}),e.addShortcutAction("bold",["Ctrl-B","Cmd-B"])}}),t.plugin("htmleditor","markdown",{init:function(e){function n(){e.editor.setOption("mode","gfm"),e.htmleditor.find(".uk-htmleditor-button-code a").html(e.options.lblMarkedview)}function i(t,n,i){e.on("action."+t,function(){"markdown"==e.getCursorMode()&&e["replaceLine"==i?"replaceLine":"replaceSelection"](n)})}var r=e.options.mdparser||window.marked||null;r&&(e.options.markdown&&n(),i("bold","**$1**"),i("italic","*$1*"),i("strike","~~$1~~"),i("blockquote","> $1","replaceLine"),i("link","[$1](http://)"),i("image","![$1](http://)"),e.on("action.listUl",function(){if("markdown"==e.getCursorMode()){for(var t=e.editor,n=t.getDoc().getCursor(!0),i=t.getDoc().getCursor(!1),r=n.line;r<i.line+1;r++)t.replaceRange("* "+t.getLine(r),{line:r,ch:0},{line:r,ch:t.getLine(r).length});t.setCursor({line:i.line,ch:t.getLine(i.line).length}),t.focus()}}),e.on("action.listOl",function(){if("markdown"==e.getCursorMode()){var t=e.editor,n=t.getDoc().getCursor(!0),i=t.getDoc().getCursor(!1),r=1;if(n.line>0){var o,a=t.getLine(n.line-1);(o=a.match(/^(\d+)\./))&&(r=Number(o[1])+1)}for(var s=n.line;s<i.line+1;s++)t.replaceRange(r+". "+t.getLine(s),{line:s,ch:0},{line:s,ch:t.getLine(s).length}),r++;t.setCursor({line:i.line,ch:t.getLine(i.line).length}),t.focus()}}),e.on("renderLate",function(){"gfm"==e.editor.options.mode&&(e.currentvalue=r(e.currentvalue))}),e.on("cursorMode",function(t,n){if("gfm"==e.editor.options.mode){var i=e.editor.getDoc().getCursor();e.editor.getTokenAt(i).state.base.htmlState||(n.mode="markdown")}}),t.$.extend(e,{enableMarkdown:function(){n(),this.render()},disableMarkdown:function(){this.editor.setOption("mode","htmlmixed"),this.htmleditor.find(".uk-htmleditor-button-code a").html(this.options.lblCodeview),this.render()}}),e.on({enableMarkdown:function(){e.enableMarkdown()},disableMarkdown:function(){e.disableMarkdown()}}))}}),t.htmleditor}(window.UIkit),function(){function t(t){var e={omitExtraWLInCodeBlocks:{"default":!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{"default":!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{"default":!1,describe:"Specify a prefix to generated header ids",
type:"string"},headerLevelStart:{"default":!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{"default":!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{"default":!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{"default":!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{"default":!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{"default":!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{"default":!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{"default":!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{"default":!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{"default":!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"}};if(t===!1)return JSON.parse(JSON.stringify(e));var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]["default"]);return n}function e(t,e){var n=e?"Error in "+e+" extension->":"Error in unnamed extension",r={valid:!0,error:""};i.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var a=n+" sub-extension "+o+": ",s=t[o];if("object"!=typeof s)return r.valid=!1,r.error=a+"must be an object, but "+typeof s+" given",r;if(!i.helper.isString(s.type))return r.valid=!1,r.error=a+'property "type" must be a string, but '+typeof s.type+" given",r;var l=s.type=s.type.toLowerCase();if("language"===l&&(l=s.type="lang"),"html"===l&&(l=s.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return r.valid=!1,r.error=a+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===l){if(i.helper.isUndefined(s.listeners))return r.valid=!1,r.error=a+'. Extensions of type "listener" must have a property called "listeners"',r}else if(i.helper.isUndefined(s.filter)&&i.helper.isUndefined(s.regex))return r.valid=!1,r.error=a+l+' extensions must define either a "regex" property or a "filter" method',r;if(s.listeners){if("object"!=typeof s.listeners)return r.valid=!1,r.error=a+'"listeners" property must be an object but '+typeof s.listeners+" given",r;for(var c in s.listeners)if(s.listeners.hasOwnProperty(c)&&"function"!=typeof s.listeners[c])return r.valid=!1,r.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof s.listeners[c]+" given",r}if(s.filter){if("function"!=typeof s.filter)return r.valid=!1,r.error=a+'"filter" must be a function, but '+typeof s.filter+" given",r}else if(s.regex){if(i.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!s.regex instanceof RegExp)return r.valid=!1,r.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",r;if(i.helper.isUndefined(s.replace))return r.valid=!1,r.error=a+'"regex" extensions must implement a replace string or function',r}}return r}function n(t,e){var n=e.charCodeAt(0);return"~E"+n+"E"}var i={},r={},o={},a=t(!0),s={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:t(!0)};i.helper={},i.extensions={},i.setOption=function(t,e){return a[t]=e,this},i.getOption=function(t){return a[t]},i.getOptions=function(){return a},i.resetOptions=function(){a=t(!0)},i.setFlavor=function(t){if(s.hasOwnProperty(t)){var e=s[t];for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n])}},i.getDefaultOptions=function(e){return t(e)},i.subParser=function(t,e){if(i.helper.isString(t)){if("undefined"==typeof e){if(r.hasOwnProperty(t))return r[t];throw Error("SubParser named "+t+" not registered!")}r[t]=e}},i.extension=function(t,n){if(!i.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=i.helper.stdExtName(t),i.helper.isUndefined(n)){if(!o.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return o[t]}"function"==typeof n&&(n=n()),i.helper.isArray(n)||(n=[n]);var r=e(n,t);if(!r.valid)throw Error(r.error);o[t]=n},i.getAllExtensions=function(){return o},i.removeExtension=function(t){delete o[t]},i.resetExtensions=function(){o={}},i.validateExtension=function(t){var n=e(t,null);return n.valid?!0:(console.warn(n.error),!1)},i.hasOwnProperty("helper")||(i.helper={}),i.helper.isString=function(t){return"string"==typeof t||t instanceof String},i.helper.forEach=function(t,e){if("function"==typeof t.forEach)t.forEach(e);else for(var n=0;n<t.length;n++)e(t[n],n,t)},i.helper.isArray=function(t){return t.constructor===Array},i.helper.isUndefined=function(t){return"undefined"==typeof t},i.helper.stdExtName=function(t){return t.replace(/[_-]||\s/g,"").toLowerCase()},i.helper.escapeCharactersCallback=n,i.helper.escapeCharacters=function(t,e,i){var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(r="\\\\"+r);var o=new RegExp(r,"g");return t=t.replace(o,n)},i.helper.matchRecursiveRegExp=function(t,e,n,i){var r,o,a,s,l,c=i||"",u=c.indexOf("g")>-1,h=new RegExp(e+"|"+n,c),d=new RegExp(e,c.replace(/g/g,"")),f=[];do for(r=0;a=h.exec(t);)if(d.test(a[0]))r++||(s=a[0],o=h.lastIndex);else if(r&&!--r){l=a[0];var p=t.slice(o,a.index);if(f.push([s+p+l,p]),!u)return f}while(r&&(h.lastIndex=o));return f},i.helper.isUndefined(console)&&(console={warn:function(t){alert(t)},log:function(t){alert(t)},error:function(t){throw t}}),i.Converter=function(t){function n(){t=t||{};for(var e in a)a.hasOwnProperty(e)&&(u[e]=a[e]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var n in t)t.hasOwnProperty(n)&&(u[n]=t[n]);u.extensions&&i.helper.forEach(u.extensions,r)}function r(t,n){if(n=n||null,i.helper.isString(t)){if(t=i.helper.stdExtName(t),n=t,i.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void l(i.extensions[t],t);if(i.helper.isUndefined(o[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=o[t]}"function"==typeof t&&(t=t()),i.helper.isArray(t)||(t=[t]);var r=e(t,n);if(!r.valid)throw Error(r.error);for(var a=0;a<t.length;++a){switch(t[a].type){case"lang":h.push(t[a]);break;case"output":d.push(t[a])}if(t[a].hasOwnProperty(f))for(var s in t[a].listeners)t[a].listeners.hasOwnProperty(s)&&c(s,t[a].listeners[s])}}function l(t,n){"function"==typeof t&&(t=t(new i.Converter)),i.helper.isArray(t)||(t=[t]);var r=e(t,n);if(!r.valid)throw Error(r.error);for(var o=0;o<t.length;++o)switch(t[o].type){case"lang":h.push(t[o]);break;case"output":d.push(t[o]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function c(t,e){if(!i.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof e)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof e+" given");f.hasOwnProperty(t)||(f[t]=[]),f[t].push(e)}var u={},h=[],d=[],f={};n(),this._dispatch=function(t,e,n){if(f.hasOwnProperty(t))for(var i=0;i<f[t].length;++i){var r=f[t][i](t,e,this,n);r&&"undefined"!=typeof r&&(e=r)}return e},this.listen=function(t,e){return c(t,e),this},this.makeHtml=function(t){if(!t)return t;var e={gHtmlBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:h,outputModifiers:d,converter:this};return t=t.replace(/~/g,"~T"),t=t.replace(/\$/g,"~D"),t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n"),t="\n\n"+t+"\n\n",t=i.subParser("detab")(t,u,e),t=i.subParser("stripBlankLines")(t,u,e),i.helper.forEach(h,function(n){t=i.subParser("runExtension")(n,t,u,e)}),t=i.subParser("githubCodeBlocks")(t,u,e),t=i.subParser("hashHTMLBlocks")(t,u,e),t=i.subParser("hashHTMLSpans")(t,u,e),t=i.subParser("stripLinkDefinitions")(t,u,e),t=i.subParser("blockGamut")(t,u,e),t=i.subParser("unhashHTMLSpans")(t,u,e),t=i.subParser("unescapeSpecialChars")(t,u,e),t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~"),i.helper.forEach(d,function(n){t=i.subParser("runExtension")(n,t,u,e)}),t},this.setOption=function(t,e){u[t]=e},this.getOption=function(t){return u[t]},this.getOptions=function(){return u},this.addExtension=function(t,e){e=e||null,r(t,e)},this.useExtension=function(t){r(t)},this.setFlavor=function(t){if(s.hasOwnProperty(t)){var e=s[t];for(var n in e)e.hasOwnProperty(n)&&(u[n]=e[n])}},this.removeExtension=function(t){i.helper.isArray(t)||(t=[t]);for(var e=0;e<t.length;++e){for(var n=t[e],r=0;r<h.length;++r)h[r]===n&&h[r].splice(r,1);for(var o=0;o<d.length;++r)d[o]===n&&d[o].splice(r,1)}},this.getAllExtensions=function(){return{language:h,output:d}}},i.subParser("anchors",function(t,e,n){t=n.converter._dispatch("anchors.before",t,e);var r=function(t,e,r,o,a,s,l,c){i.helper.isUndefined(c)&&(c=""),t=e;var u=r,h=o.toLowerCase(),d=a,f=c;if(!d)if(h||(h=u.toLowerCase().replace(/ ?\n/g," ")),d="#"+h,i.helper.isUndefined(n.gUrls[h])){if(!(t.search(/\(\s*\)$/m)>-1))return t;d=""}else d=n.gUrls[h],i.helper.isUndefined(n.gTitles[h])||(f=n.gTitles[h]);d=i.helper.escapeCharacters(d,"*_",!1);var p='<a href="'+d+'"';return""!==f&&null!==f&&(f=f.replace(/"/g,"&quot;"),f=i.helper.escapeCharacters(f,"*_",!1),p+=' title="'+f+'"'),p+=">"+u+"</a>"};return t=t.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,r),t=t.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,r),t=t.replace(/(\[([^\[\]]+)])()()()()()/g,r),t=n.converter._dispatch("anchors.after",t,e)}),i.subParser("autoLinks",function(t,e,n){function r(t,e){var n=i.subParser("unescapeSpecialChars")(e);return i.subParser("encodeEmailAddress")(n)}t=n.converter._dispatch("autoLinks.before",t,e);var o=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,a=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,s=/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-\/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,l=/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi;return t=t.replace(a,'<a href="$1">$1</a>'),t=t.replace(l,r),e.simplifiedAutoLink&&(t=t.replace(o,'<a href="$1">$1</a>'),t=t.replace(s,r)),t=n.converter._dispatch("autoLinks.after",t,e)}),i.subParser("blockGamut",function(t,e,n){t=n.converter._dispatch("blockGamut.before",t,e),t=i.subParser("blockQuotes")(t,e,n),t=i.subParser("headers")(t,e,n);var r=i.subParser("hashBlock")("<hr />",e,n);return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,r),t=t.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,r),t=t.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,r),t=i.subParser("lists")(t,e,n),t=i.subParser("codeBlocks")(t,e,n),t=i.subParser("tables")(t,e,n),t=i.subParser("hashHTMLBlocks")(t,e,n),t=i.subParser("paragraphs")(t,e,n),t=n.converter._dispatch("blockGamut.after",t,e)}),i.subParser("blockQuotes",function(t,e,n){return t=n.converter._dispatch("blockQuotes.before",t,e),t=t.replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,r){var o=r;return o=o.replace(/^[ \t]*>[ \t]?/gm,"~0"),o=o.replace(/~0/g,""),o=o.replace(/^[ \t]+$/gm,""),o=i.subParser("githubCodeBlocks")(o,e,n),o=i.subParser("blockGamut")(o,e,n),o=o.replace(/(^|\n)/g,"$1  "),o=o.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),i.subParser("hashBlock")("<blockquote>\n"+o+"\n</blockquote>",e,n)}),t=n.converter._dispatch("blockQuotes.after",t,e)}),i.subParser("codeBlocks",function(t,e,n){t=n.converter._dispatch("codeBlocks.before",t,e),t+="~0";var r=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g;return t=t.replace(r,function(t,r,o){var a=r,s=o,l="\n";return a=i.subParser("outdent")(a),a=i.subParser("encodeCode")(a),a=i.subParser("detab")(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(l=""),a="<pre><code>"+a+l+"</code></pre>",i.subParser("hashBlock")(a,e,n)+s}),t=t.replace(/~0/,""),t=n.converter._dispatch("codeBlocks.after",t,e)}),i.subParser("codeSpans",function(t,e,n){return t=n.converter._dispatch("codeSpans.before",t,e),t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,r){var o=r;return o=o.replace(/^([ \t]*)/g,""),o=o.replace(/[ \t]*$/g,""),o=i.subParser("encodeCode")(o),e+"<code>"+o+"</code>"}),t=n.converter._dispatch("codeSpans.after",t,e)}),i.subParser("detab",function(t){return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,function(t,e){for(var n=e,i=4-n.length%4,r=0;i>r;r++)n+=" ";return n}),t=t.replace(/~A/g,"    "),t=t.replace(/~B/g,"")}),i.subParser("encodeAmpsAndAngles",function(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),i.subParser("encodeBackslashEscapes",function(t){return t=t.replace(/\\(\\)/g,i.helper.escapeCharactersCallback),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,i.helper.escapeCharactersCallback)}),i.subParser("encodeCode",function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=i.helper.escapeCharacters(t,"*_{}[]\\",!1)}),i.subParser("encodeEmailAddress",function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else if(":"!==t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}),t='<a href="'+t+'">'+t+"</a>",t=t.replace(/">.+:/g,'">')}),i.subParser("escapeSpecialCharsWithinTagAttributes",function(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=i.helper.escapeCharacters(e,"\\`*_",!1)})}),i.subParser("githubCodeBlocks",function(t,e,n){return e.ghCodeBlocks?(t=n.converter._dispatch("githubCodeBlocks.before",t,e),t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,r,o){var a=e.omitExtraWLInCodeBlocks?"":"\n";return o=i.subParser("encodeCode")(o),o=i.subParser("detab")(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),o="<pre><code"+(r?' class="'+r+" language-"+r+'"':"")+">"+o+a+"</code></pre>",i.subParser("hashBlock")(o,e,n)}),t=t.replace(/~0/,""),t=n.converter._dispatch("githubCodeBlocks.after",t,e)):t}),i.subParser("hashBlock",function(t,e,n){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n"}),i.subParser("hashElement",function(t,e,n){return function(t,e){var i=e;return i=i.replace(/\n\n/g,"\n"),i=i.replace(/^\n/,""),i=i.replace(/\n+$/g,""),i="\n\n~K"+(n.gHtmlBlocks.push(i)-1)+"K\n\n"}}),i.subParser("hashHTMLBlocks",function(t,e,n){return t=t.replace(/\n/g,"\n\n"),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,i.subParser("hashElement")(t,e,n)),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside|address|audio|canvas|figure|hgroup|output|video)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,i.subParser("hashElement")(t,e,n)),t=t.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,n)),t=t.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,n)),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,n)),t=t.replace(/\n\n/g,"\n")}),i.subParser("hashHTMLSpans",function(t,e,n){for(var r=i.helper.matchRecursiveRegExp(t,"<code\\b[^>]*>","</code>","gi"),o=0;o<r.length;++o)t=t.replace(r[o][0],"~L"+(n.gHtmlSpans.push(r[o][0])-1)+"L");return t}),i.subParser("unhashHTMLSpans",function(t,e,n){for(var i=0;i<n.gHtmlSpans.length;++i)t=t.replace("~L"+i+"L",n.gHtmlSpans[i]);return t}),i.subParser("headers",function(t,e,n){function r(t){var e,r=t.replace(/[^\w]/g,"").toLowerCase();return n.hashLinkCounts[r]?e=r+"-"+n.hashLinkCounts[r]++:(e=r,n.hashLinkCounts[r]=1),o===!0&&(o="section"),i.helper.isString(o)?o+e:e}t=n.converter._dispatch("headers.before",t,e);var o=e.prefixHeaderId,a=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),s=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,l=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;return t=t.replace(s,function(t,o){var s=i.subParser("spanGamut")(o,e,n),l=e.noHeaderId?"":' id="'+r(o)+'"',c=a,u="<h"+c+l+">"+s+"</h"+c+">";return i.subParser("hashBlock")(u,e,n)}),t=t.replace(l,function(t,o){var s=i.subParser("spanGamut")(o,e,n),l=e.noHeaderId?"":' id="'+r(o)+'"',c=a+1,u="<h"+c+l+">"+s+"</h"+c+">";return i.subParser("hashBlock")(u,e,n)}),t=t.replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(t,o,s){var l=i.subParser("spanGamut")(s,e,n),c=e.noHeaderId?"":' id="'+r(s)+'"',u=a-1+o.length,h="<h"+u+c+">"+l+"</h"+u+">";return i.subParser("hashBlock")(h,e,n)}),t=n.converter._dispatch("headers.after",t,e)}),i.subParser("images",function(t,e,n){function r(t,e,r,o,a,s,l,c){var u=n.gUrls,h=n.gTitles,d=n.gDimensions;if(r=r.toLowerCase(),c||(c=""),""===o||null===o){if((""===r||null===r)&&(r=e.toLowerCase().replace(/ ?\n/g," ")),o="#"+r,i.helper.isUndefined(u[r]))return t;o=u[r],i.helper.isUndefined(h[r])||(c=h[r]),i.helper.isUndefined(d[r])||(a=d[r].width,s=d[r].height)}e=e.replace(/"/g,"&quot;"),e=i.helper.escapeCharacters(e,"*_",!1),o=i.helper.escapeCharacters(o,"*_",!1);var f='<img src="'+o+'" alt="'+e+'"';return c&&(c=c.replace(/"/g,"&quot;"),c=i.helper.escapeCharacters(c,"*_",!1),f+=' title="'+c+'"'),a&&s&&(a="*"===a?"auto":a,s="*"===s?"auto":s,f+=' width="'+a+'"',f+=' height="'+s+'"'),f+=" />"}t=n.converter._dispatch("images.before",t,e);var o=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,a=/!\[(.*?)][ ]?(?:\n[ ]*)?\[(.*?)]()()()()()/g;return t=t.replace(a,r),t=t.replace(o,r),t=n.converter._dispatch("images.after",t,e)}),i.subParser("italicsAndBold",function(t,e,n){return t=n.converter._dispatch("italicsAndBold.before",t,e),e.literalMidWordUnderscores?(t=t.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>"),t=t.replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>"),t=t.replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")):(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")),t=n.converter._dispatch("italicsAndBold.after",t,e)}),i.subParser("lists",function(t,e,n){function r(t,r){n.gListLevel++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var o=/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,a=/\n[ \t]*\n(?!~0)/.test(t);return t=t.replace(o,function(t,r,o,s,l,c,u){u=u&&""!==u.trim();var h=i.subParser("outdent")(l,e,n),d="";return c&&e.tasklists&&(d=' class="task-list-item" style="list-style-type: none;"',h=h.replace(/^[ \t]*\[(x| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(t+=" checked"),t+=">"})),r||h.search(/\n{2,}/)>-1?(h=i.subParser("githubCodeBlocks")(h,e,n),h=i.subParser("blockGamut")(h,e,n)):(h=i.subParser("lists")(h,e,n),h=h.replace(/\n$/,""),h=a?i.subParser("paragraphs")(h,e,n):i.subParser("spanGamut")(h,e,n)),h="\n<li"+d+">"+h+"</li>\n"}),t=t.replace(/~0/g,""),n.gListLevel--,r&&(t=t.replace(/\s+$/,"")),t}function o(t,e,n){var i="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,o=[],a="";if(-1!==t.search(i)){!function l(t){var o=t.search(i);-1!==o?(a+="\n\n<"+e+">"+r(t.slice(0,o),!!n)+"</"+e+">\n\n",e="ul"===e?"ol":"ul",i="ul"===e?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,l(t.slice(o))):a+="\n\n<"+e+">"+r(t,!!n)+"</"+e+">\n\n"}(t);for(var s=0;s<o.length;++s);}else a="\n\n<"+e+">"+r(t,!!n)+"</"+e+">\n\n";return a}t=n.converter._dispatch("lists.before",t,e),t+="~0";var a=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return n.gListLevel?t=t.replace(a,function(t,e,n){var i=n.search(/[*+-]/g)>-1?"ul":"ol";return o(e,i,!0)}):(a=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,t=t.replace(a,function(t,e,n,i){var r=i.search(/[*+-]/g)>-1?"ul":"ol";return o(n,r)})),t=t.replace(/~0/,""),t=n.converter._dispatch("lists.after",t,e)}),i.subParser("outdent",function(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")}),i.subParser("paragraphs",function(t,e,n){t=n.converter._dispatch("paragraphs.before",t,e),t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var r=t.split(/\n{2,}/g),o=[],a=r.length,s=0;a>s;s++){var l=r[s];l.search(/~K(\d+)K/g)>=0?o.push(l):l.search(/\S/)>=0&&(l=i.subParser("spanGamut")(l,e,n),l=l.replace(/^([ \t]*)/g,"<p>"),l+="</p>",o.push(l))}for(a=o.length,s=0;a>s;s++)for(;o[s].search(/~K(\d+)K/)>=0;){var c=n.gHtmlBlocks[RegExp.$1];c=c.replace(/\$/g,"$$$$"),o[s]=o[s].replace(/~K\d+K/,c)}return t=n.converter._dispatch("paragraphs.after",t,e),o.join("\n\n")}),i.subParser("runExtension",function(t,e,n,i){if(t.filter)e=t.filter(e,i.converter,n);else if(t.regex){var r=t.regex;!r instanceof RegExp&&(r=new RegExp(r,"g")),e=e.replace(r,t.replace)}return e}),i.subParser("spanGamut",function(t,e,n){return t=n.converter._dispatch("spanGamut.before",t,e),t=i.subParser("codeSpans")(t,e,n),t=i.subParser("escapeSpecialCharsWithinTagAttributes")(t,e,n),t=i.subParser("encodeBackslashEscapes")(t,e,n),t=i.subParser("images")(t,e,n),t=i.subParser("anchors")(t,e,n),t=i.subParser("autoLinks")(t,e,n),t=i.subParser("encodeAmpsAndAngles")(t,e,n),t=i.subParser("italicsAndBold")(t,e,n),t=i.subParser("strikethrough")(t,e,n),t=t.replace(/  +\n/g," <br />\n"),t=n.converter._dispatch("spanGamut.after",t,e)}),i.subParser("strikethrough",function(t,e,n){return e.strikethrough&&(t=n.converter._dispatch("strikethrough.before",t,e),t=t.replace(/(?:~T){2}([^~]+)(?:~T){2}/g,"<del>$1</del>"),t=n.converter._dispatch("strikethrough.after",t,e)),t}),i.subParser("stripBlankLines",function(t){return t.replace(/^[ \t]+$/gm,"")}),i.subParser("stripLinkDefinitions",function(t,e,n){var r=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm;return t+="~0",t=t.replace(r,function(t,r,o,a,s,l,c){return r=r.toLowerCase(),n.gUrls[r]=i.subParser("encodeAmpsAndAngles")(o),l?l+c:(c&&(n.gTitles[r]=c.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&a&&s&&(n.gDimensions[r]={width:a,height:s}),"")}),t=t.replace(/~0/,"")}),i.subParser("tables",function(t,e,n){var r=function(){var t,r={};return r.th=function(t,r){var o="";return t=t.trim(),""===t?"":(e.tableHeaderId&&(o=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),t=i.subParser("spanGamut")(t,e,n),r=r&&""!==r.trim()?' style="'+r+'"':"","<th"+o+r+">"+t+"</th>")},r.td=function(t,r){var o=i.subParser("spanGamut")(t.trim(),e,n);return r=r&&""!==r.trim()?' style="'+r+'"':"","<td"+r+">"+o+"</td>"},r.ths=function(){var t="",e=0,n=[].slice.apply(arguments[0]),i=[].slice.apply(arguments[1]);for(e;e<n.length;e+=1)t+=r.th(n[e],i[e])+"\n";return t},r.tds=function(){var t="",e=0,n=[].slice.apply(arguments[0]),i=[].slice.apply(arguments[1]);for(e;e<n.length;e+=1)t+=r.td(n[e],i[e])+"\n";return t},r.thead=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<thead>\n",t+="<tr>\n",t+=r.ths.apply(this,[e,n]),t+="</tr>\n",t+="</thead>\n"},r.tr=function(){var t,e=[].slice.apply(arguments[0]),n=[].slice.apply(arguments[1]);return t="<tr>\n",t+=r.tds.apply(this,[e,n]),t+="</tr>\n"},t=function(t){var e,n,i=0,o=t.split("\n"),a=[];for(i;i<o.length;i+=1){if(e=o[i],e.trim().match(/^[|].*[|]$/)){e=e.trim();var s=[],l=o[i+1].trim(),c=[],u=0;if(l.match(/^[|][-=|: ]+[|]$/))for(c=l.substring(1,l.length-1).split("|"),u=0;u<c.length;++u)c[u]=c[u].trim(),c[u].match(/^[:][-=| ]+[:]$/)?c[u]="text-align:center;":c[u].match(/^[-=| ]+[:]$/)?c[u]="text-align:right;":c[u].match(/^[:][-=| ]+$/)?c[u]="text-align:left;":c[u]="";if(s.push("<table>"),n=e.substring(1,e.length-1).split("|"),0===c.length)for(u=0;u<n.length;++u)c.push("text-align:left");if(s.push(r.thead.apply(this,[n,c])),e=o[++i],e.trim().match(/^[|][-=|: ]+[|]$/)){for(e=o[++i],s.push("<tbody>");e.trim().match(/^[|].*[|]$/);)e=e.trim(),s.push(r.tr.apply(this,[e.substring(1,e.length-1).split("|"),c])),e=o[++i];s.push("</tbody>"),s.push("</table>"),a.push(s.join("\n"));continue}e=o[--i]}a.push(e)}return a.join("\n")},{parse:t}};if(e.tables){t=n.converter._dispatch("tables.before",t,e);var o=r();t=o.parse(t),t=n.converter._dispatch("tables.after",t,e)}return t}),i.subParser("unescapeSpecialChars",function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})});var l=this;"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define("showdown",function(){return i}):l.showdown=i}.call(this);